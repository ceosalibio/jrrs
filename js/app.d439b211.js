(function(){var t={8719:function(t,e,a){var i={"./D00.png":643,"./D01.png":6618,"./D02.png":7328,"./D03.png":794,"./D04.png":4633,"./D05.png":4383,"./D06.png":3031,"./D07.png":9353,"./D08.png":7072,"./D09.png":4005,"./D10.png":6013,"./D11.png":2737,"./D12.png":8442,"./D13 - Copy.png":3254,"./D13.png":1934,"./D14.png":2846,"./D15.png":5055,"./D16.png":142,"./D17.png":2189,"./D18.png":9597,"./D19.png":726,"./D20.png":9085,"./D21.png":172,"./D22.png":5817,"./D23.png":2019,"./D24.png":9432,"./home.png":2086,"./navyLogo.png":6915,"./person.png":2916};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=8719},8041:function(t,e,a){var i={"./D00.png":643,"./D01.png":6618,"./D02.png":7328,"./D03.png":794,"./D04.png":4633,"./D05.png":4383,"./D06.png":3031,"./D07.png":9353,"./D08.png":7072,"./D09.png":4005,"./D10.png":6013,"./D11.png":2737,"./D12.png":8442,"./D13 - Copy.png":3254,"./D13.png":1934,"./D14.png":2846,"./D15.png":5055,"./D16.png":142,"./D17.png":2189,"./D18.png":9597,"./D19.png":726,"./D20.png":9085,"./D21.png":172,"./D22.png":5817,"./D23.png":2019,"./D24.png":9432};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=8041},7957:function(t,e,a){var i={"./D00.png":643,"./D01.png":6618,"./D02.png":7328,"./D03.png":794,"./D04.png":4633,"./D05.png":4383,"./D06.png":3031,"./D07.png":9353,"./D08.png":7072,"./D09.png":4005};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=7957},6700:function(t,e,a){var i={"./af":2786,"./af.js":2786,"./ar":867,"./ar-dz":4130,"./ar-dz.js":4130,"./ar-kw":6135,"./ar-kw.js":6135,"./ar-ly":6440,"./ar-ly.js":6440,"./ar-ma":7702,"./ar-ma.js":7702,"./ar-sa":6040,"./ar-sa.js":6040,"./ar-tn":7100,"./ar-tn.js":7100,"./ar.js":867,"./az":1083,"./az.js":1083,"./be":9808,"./be.js":9808,"./bg":8338,"./bg.js":8338,"./bm":7438,"./bm.js":7438,"./bn":8905,"./bn-bd":6225,"./bn-bd.js":6225,"./bn.js":8905,"./bo":1560,"./bo.js":1560,"./br":1278,"./br.js":1278,"./bs":622,"./bs.js":622,"./ca":2468,"./ca.js":2468,"./cs":5822,"./cs.js":5822,"./cv":877,"./cv.js":877,"./cy":7373,"./cy.js":7373,"./da":4780,"./da.js":4780,"./de":9740,"./de-at":217,"./de-at.js":217,"./de-ch":894,"./de-ch.js":894,"./de.js":9740,"./dv":5300,"./dv.js":5300,"./el":837,"./el.js":837,"./en-au":8348,"./en-au.js":8348,"./en-ca":7925,"./en-ca.js":7925,"./en-gb":2243,"./en-gb.js":2243,"./en-ie":6436,"./en-ie.js":6436,"./en-il":941,"./en-il.js":941,"./en-in":4175,"./en-in.js":4175,"./en-nz":6319,"./en-nz.js":6319,"./en-sg":1662,"./en-sg.js":1662,"./eo":2915,"./eo.js":2915,"./es":5655,"./es-do":5251,"./es-do.js":5251,"./es-mx":6112,"./es-mx.js":6112,"./es-us":1146,"./es-us.js":1146,"./es.js":5655,"./et":5603,"./et.js":5603,"./eu":7763,"./eu.js":7763,"./fa":6959,"./fa.js":6959,"./fi":1897,"./fi.js":1897,"./fil":2549,"./fil.js":2549,"./fo":4694,"./fo.js":4694,"./fr":4470,"./fr-ca":3049,"./fr-ca.js":3049,"./fr-ch":2330,"./fr-ch.js":2330,"./fr.js":4470,"./fy":5044,"./fy.js":5044,"./ga":9295,"./ga.js":9295,"./gd":2101,"./gd.js":2101,"./gl":8794,"./gl.js":8794,"./gom-deva":7884,"./gom-deva.js":7884,"./gom-latn":3168,"./gom-latn.js":3168,"./gu":5349,"./gu.js":5349,"./he":4206,"./he.js":4206,"./hi":94,"./hi.js":94,"./hr":316,"./hr.js":316,"./hu":2138,"./hu.js":2138,"./hy-am":1423,"./hy-am.js":1423,"./id":9218,"./id.js":9218,"./is":135,"./is.js":135,"./it":626,"./it-ch":150,"./it-ch.js":150,"./it.js":626,"./ja":9183,"./ja.js":9183,"./jv":4286,"./jv.js":4286,"./ka":2105,"./ka.js":2105,"./kk":7772,"./kk.js":7772,"./km":8758,"./km.js":8758,"./kn":9282,"./kn.js":9282,"./ko":3730,"./ko.js":3730,"./ku":1408,"./ku.js":1408,"./ky":3291,"./ky.js":3291,"./lb":6841,"./lb.js":6841,"./lo":5466,"./lo.js":5466,"./lt":7010,"./lt.js":7010,"./lv":7595,"./lv.js":7595,"./me":9861,"./me.js":9861,"./mi":5493,"./mi.js":5493,"./mk":5966,"./mk.js":5966,"./ml":7341,"./ml.js":7341,"./mn":5115,"./mn.js":5115,"./mr":370,"./mr.js":370,"./ms":9847,"./ms-my":1237,"./ms-my.js":1237,"./ms.js":9847,"./mt":2126,"./mt.js":2126,"./my":6165,"./my.js":6165,"./nb":4924,"./nb.js":4924,"./ne":6744,"./ne.js":6744,"./nl":3901,"./nl-be":9814,"./nl-be.js":9814,"./nl.js":3901,"./nn":3877,"./nn.js":3877,"./oc-lnc":2135,"./oc-lnc.js":2135,"./pa-in":5858,"./pa-in.js":5858,"./pl":4495,"./pl.js":4495,"./pt":9520,"./pt-br":7971,"./pt-br.js":7971,"./pt.js":9520,"./ro":6459,"./ro.js":6459,"./ru":1793,"./ru.js":1793,"./sd":950,"./sd.js":950,"./se":490,"./se.js":490,"./si":124,"./si.js":124,"./sk":4249,"./sk.js":4249,"./sl":4985,"./sl.js":4985,"./sq":1104,"./sq.js":1104,"./sr":8227,"./sr-cyrl":9915,"./sr-cyrl.js":9915,"./sr.js":8227,"./ss":5893,"./ss.js":5893,"./sv":8760,"./sv.js":8760,"./sw":1172,"./sw.js":1172,"./ta":7333,"./ta.js":7333,"./te":3110,"./te.js":3110,"./tet":2095,"./tet.js":2095,"./tg":7321,"./tg.js":7321,"./th":9041,"./th.js":9041,"./tk":9005,"./tk.js":9005,"./tl-ph":5768,"./tl-ph.js":5768,"./tlh":9444,"./tlh.js":9444,"./tr":2397,"./tr.js":2397,"./tzl":8254,"./tzl.js":8254,"./tzm":1106,"./tzm-latn":699,"./tzm-latn.js":699,"./tzm.js":1106,"./ug-cn":9288,"./ug-cn.js":9288,"./uk":7691,"./uk.js":7691,"./ur":3795,"./ur.js":3795,"./uz":6791,"./uz-latn":588,"./uz-latn.js":588,"./uz.js":6791,"./vi":5666,"./vi.js":5666,"./x-pseudo":4378,"./x-pseudo.js":4378,"./yo":5805,"./yo.js":5805,"./zh-cn":3839,"./zh-cn.js":3839,"./zh-hk":5726,"./zh-hk.js":5726,"./zh-mo":9807,"./zh-mo.js":9807,"./zh-tw":4152,"./zh-tw.js":4152};function n(t){var e=r(t);return a(e)}function r(t){if(!a.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}n.keys=function(){return Object.keys(i)},n.resolve=r,t.exports=n,n.id=6700},1418:function(t,e,a){const i=a(9669),n=a(381),r=t=>{i({method:"post",url:`${t.url}api/approvedReport`,data:{Month:t.month,Team:t.team,Time:n().format("YYYY-MM-DD HH:mm:ss"),Name:t.name,Table:t.table,Status:t.status}}).then((t=>{console.log(t.data)}))};t.exports=r},6925:function(t,e,a){const i=a(9669),n=a(381),r=t=>{i({method:"post",url:`${t.url}api/declinedReport`,data:{Month:t.month,Team:t.team,Time:n().format("YYYY-MM-DD HH:mm:ss"),Name:t.name,Table:t.table}}).then((t=>{console.log(t.data)}))};t.exports=r},5409:function(t,e,a){const i=a(9669),n=(t,e)=>{i({method:"post",url:t.url,data:{Table:t.Table,Team:t.Team,Name:t.Name,Time:t.Time,Year:t.Year}}).then((t=>{200==t.status&&(alert("Deleted"),e&&"function"===typeof e&&e())}))};t.exports=n},9579:function(t,e,a){"use strict";var i=a(144),n=a(998),r=a(6232),s=a(5550),l=a(4562),o=a(4145),d=a(4886),c=a(9223),u=a(8271),h=a(4324),m=a(5495),p=a(7397),g=a(4525),f=a(1137),b=a(7912),v=a(4611),y=a(3059),D=a(9709),x=a(3687),R=a(7953),_=a(2082),S=function(){var t=this,e=t._self._c;return e(n.Z,{attrs:{id:"inspire"}},[t.showAppBar?e(D.Z,{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(b.Z,{model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[e("h2",{staticClass:"s-header text-center",staticStyle:{"margin-bottom":"15px"}},[t._v("NAVIGATION")]),t._l(t.navItems,(function(a,i){return e(o.Z,{key:i,staticStyle:{"border-radius":"0",border:".5px #0080ff solid",background:"linear-gradient(#ffffff, #eeeeee)","font-size":"10px",cursor:"default"},attrs:{light:"",dense:""}},[0==a.subMenu?e(g.Z,{attrs:{link:"","active-class":"active",to:a.to}},[e(v.Z,[e(h.Z,[t._v(t._s(a.icon))])],1),e(f.km,[e(f.V9,[t._v(t._s(a.text))])],1)],1):e(p.Z,{scopedSlots:t._u([{key:"activator",fn:function(){return[e(v.Z,[e(h.Z,{attrs:{light:""}},[t._v(t._s(a.icon))])],1),e(f.V9,[t._v(t._s(a.text))])]},proxy:!0}],null,!0)},t._l(a.subMenu,(function(a,i){return e(g.Z,{key:i,attrs:{link:"",to:a.to,"active-class":"active"}},[e(f.V9,{domProps:{textContent:t._s(a.text)}})],1)})),1)],1)}))],2)],1):t._e(),t.showAppBar?e(r.Z,{attrs:{app:"",color:"primary",dark:""}},[e(_.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(s.Z,t._g(t._b({attrs:{color:"white"},on:{click:function(e){t.drawer=!t.drawer}}},"v-app-bar-nav-icon",i,!1),a))]}}],null,!1,937442581)},[t.drawer?e("span",[t._v("Click to hide navigation drawer")]):e("span",[t._v("Click to show navigation drawer")])]),e(R.qW,{staticStyle:{color:"white",cursor:"pointer"},on:{click:function(e){return t.goHome()}}},[e("span",{staticClass:"d-none d-md-block d-lg-block d-xl-block"},[t._v("PHILIPPINE NAVY")])]),e(x.Z),e(m.Z,{staticClass:"d-none d-md-block d-lg-block d-xl-block",attrs:{src:a(8719)(`./${t.$store.state.user.main}.png`),"max-width":"3%"}}),e(m.Z,{staticClass:"d-sm-flex d-md-none",attrs:{src:a(8719)(`./${t.$store.state.user.main}.png`),"max-width":"5%"}}),e("span",[t._v(t._s(t.$store.state.user.name)),e("br"),t._v(t._s("D01"==t.$store.state.user.main?t.$store.state.user.officeName:t.$store.state.user.unitName))]),e(_.Z,{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(l.Z,t._g(t._b({attrs:{icon:""}},"v-btn",i,!1),a),[e(h.Z,{on:{click:function(e){return t.getLogout()}}},[t._v("mdi-logout")])],1)]}}],null,!1,400236214)},[e("span",[t._v("Logout")])])],1):t._e(),e(y.Z,{staticClass:"ma-1"},[e("router-view"),e("br"),e("br"),e("br"),e(c.Z,{staticClass:"footer-wrapper"}),e(u.Z,{staticClass:"footer-wrapper",attrs:{padless:""}},[e(o.Z,{staticClass:"flex",attrs:{flat:"",tile:""}},[e(d.ZB,[e("center",[e(h.Z,{attrs:{small:""}},[t._v("mdi-copyright")]),t._v("2023 — "),e("strong",[t._v("OFFICE OF AC OF NS FOR OPERATIONS N3")]),e("br"),e("span",[t._v("All Rights Reserved")])],1)],1)],1)],1)],1)],1)},C=[],T=(a(7658),a(629)),w=a(381),A=a.n(w),N=a(9669),k=a.n(N),E={data:()=>({selectedItem:1,drawer:!0,items:[{subMenu:[],text:"Personnel",icon:"mdi-account-tie",to:"personnel"},{subMenu:[],text:"Training",icon:"mdi-book-open",to:"training"},{subMenu:[],text:"Equipment",icon:"mdi-tools",to:"equipment"},{subMenu:[],text:"Maintenance",icon:"mdi-wrench-cog-outline",to:"maintenance"},{subMenu:[],text:"Facilities",icon:"mdi-office-building",to:"facility"},{subMenu:[],text:"Report",icon:"mdi-file-document-check",to:"unitReport"},{subMenu:[{text:"Check Report",icon:"mdi-file-document-check",to:"report"},{text:"Update TO",icon:"mdi-note-plus",to:"ceo"},{text:"Update Training",icon:"mdi-note-plus",to:"trainingAdmin"},{text:"Update TE",icon:"mdi-note-plus",to:"equipmentAdmin"},{text:"Update Facility",icon:"mdi-note-plus",to:"facilityAdmin"},{text:"Update User",icon:"mdi-note-plus",to:"addUser"},{text:"Inventory",icon:"mdi-note-plus",to:"inventory"}],text:"Admin",icon:"mdi-shield-crown"}]}),methods:{goHome(){"home"!=this.$route.name&&this.$router.push("/home")},getLogout(){k()({method:"post",url:`${this.$baseUrl}api/logout`,data:{id:this.$store.state.user.id,log:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((t=>{200==t.status&&(this.$store.dispatch("getLogin","logout"),this.$store.state.hideLogin=!1,this.$router.push("/login"))}))}},computed:{...(0,T.rn)(["user"]),navItems(){let t;return t="1"==this.$store.state.user.rights||["T12","T14","T15","T17","T19"].includes(this.$store.state.user.office)?"T19"==this.$store.state.user.office?this.items.map((t=>(t.subMenu=t.subMenu.filter((t=>"Update Training"==t.text||"Check Report"==t.text)),t))):"T15"==this.$store.state.user.office?this.items.map((t=>(t.subMenu=t.subMenu.filter((t=>"Update TE"==t.text||"Update Facility"==t.text||"Inventory"==t.text||"Check Report"==t.text)),t))):"T12"==this.$store.state.user.office?this.items.map((t=>(t.subMenu=t.subMenu.filter((t=>"Update TO"==t.text||"Inventory"==t.text||"Check Report"==t.text)),t))):"T17"==this.$store.state.user.office?this.items.map((t=>(t.subMenu=t.subMenu.filter((t=>"Inventory"==t.text)),t))):this.items:this.items.slice(0,-1),t},showAppBar(){return"login"!=this.$route.name}}},I=E,Z=a(1001),P=(0,Z.Z)(I,S,C,!1,null,null,null),M=P.exports,U=a(5205);(0,U.z)("/jrrs/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(t){console.error("Error during service worker registration:",t)}});var q=a(8345),$=(a(2801),a(4702));i.ZP.use(T.ZP);const O=new $.Z({key:"store",storage:localStorage,reducer:t=>({user:t.user,hideLogin:t.hideLogin,signatories:t.signatories})});var L=new T.ZP.Store({state:()=>({user:[],signatories:[],hideLogin:!1,departmentData:null,sectionData:null,teamData:null,monthData:null,departmentItems:[],teamItems:[],branchItems:[],positionItems:[],rankItems:[],afposItems:[],serviceItems:["PN","PN(M)","PN(GSC)","PN(MNSA)","Civ"],lastMonthData:[],psgTable:[],gradePoints:0,afposPoints:0,questionData:[],remarksData:[],overlay:!1,loadingPage:!1,overlayRemarks:!1,personnelAddTable:[],personnelRecap:[],divisionItems:[],unitItems:[],filterDivisionItems:[],filterRankItems:[],filterUnitItems:[],trainingTableUpdate:!1}),actions:{getLogin({commit:t},e){t("getLogin",e)},getSignatories({commit:t},e){t("getSignatories",e)},getDepartment({commit:t}){t("getDepartment")},getTeam({commit:t}){t("getTeam")},getLastMonth({commit:t}){t("getLastMonth")},getBranch({commit:t},e){t("getBranch",e)},getPosition({commit:t},e){t("getPosition",e)},getRank({commit:t}){t("getRank")},getAfpos({commit:t}){t("getAfpos")},getPsgTable({commit:t}){t("getPsgTable")},getPoints({commit:t}){t("getPoints")},getQuestion({commit:t},e){t("getQuestion",e)},diplayRemarks({commit:t},e){t("diplayRemarks",e)},updateRemarks({commit:t},e){t("updateRemarks",e)},getDivision({commit:t}){t("getDivision")},getFilterDivision({commit:t},e){t("getFilterDivision",e)},getFilterRank({commit:t},e){t("getFilterRank",e)},getUnit({commit:t}){t("getUnit")},getFilterUnit({commit:t},e){t("getFilterUnit",e)}},mutations:{getLogin(t,e){"logout"==e?(t.user=[],t.signatories=[]):(t.user=e,k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/insertLog`,data:{unit:"D01"==e.main?e.office:e.unit,id:e.id,log:A()().format("YYYY-MM-DD HH:mm:ss")}}))},getSignatories(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getUserSignatory`,data:{unit:"D01"==e.main?e.office:e.unit,main:e.main}}).then((e=>{t.signatories=e.data}))},getTeam(t){t.loadingPage=!0,k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getTeamList`,data:{department:t.departmentData}}).then((e=>{const a=atob(e.data);let i=JSON.parse(a);"D01"==t.departmentData?t.teamItems=i:t.teamItems=i.reduce(((t,e)=>{let a=t.findIndex((t=>t.UnitTeamCode==e.UnitTeamCode));return-1==a&&t.push(e),t}),[]),t.loadingPage=!1}))},getDepartment(t){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getDepartmentList`}).then((e=>{const a=atob(e.data);let i=JSON.parse(a);t.departmentItems=i,t.loadingPage=!1}))},getLastMonth(t){t.overlay=!0,k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getLastMonth`,data:{Month:t.monthData,Team:t.teamData,User:t.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((e=>{t.lastMonthData=[],200==e.status&&(t.lastMonthData=e.data,t.overlay=!1)})).catch((e=>{e&&(t.overlay=!1)}))},getBranch(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getBranchList`,data:{data:e}}).then((e=>{const a=atob(e.data);let i=JSON.parse(a);t.branchItems=i.reduce(((t,e)=>{let a=t.findIndex((t=>t.BranchCode==e.BranchCode));return-1==a&&t.push(e),t}),[])}))},getPosition(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getPositionList`,data:{data:e,unit:t.teamData}}).then((e=>{t.positionItems=e.data.reduce(((t,e)=>{let a=t.findIndex((t=>t.PositionCode==e.PositionCode));return-1==a&&t.push(e),t}),[])}))},getRank(t){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getRankList`}).then((e=>{t.rankItems=e.data}))},getAfpos(t){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getAfposList`}).then((e=>{t.afposItems=e.data}))},getPsgTable(t){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getPsgTable`,data:{Month:t.monthData,Team:t.teamData}}).then((e=>{t.psgTable=e.data.reduce(((t,e)=>{let a=t.findIndex((t=>t.DivisionCode==e.DivisionCode));if(-1==a){let a={...e};a.count=1,a.GroupDivision=e.DivisionName,a.TotalRequired=e.countRequired,a.TotalActual=e.countActual,t.push(a)}else t[a].TotalRequired+=e.countRequired,t[a].TotalActual+=e.countActual,t[a].count+=1,e.totalCountRequired=t[a].TotalRequired,e.totalCountActual=t[a].TotalActual,t.push(e);return t}),[])}))},getPoints(t){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getPoints`,data:{Month:t.monthData,Section:t.sectionData,Team:t.teamData}}).then((e=>{let a=e.data;a&&(t.gradePoints=a.GradePoint,t.afposPoints=a.AfposPoint)}))},getQuestion(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getQuestion`,data:{Table:e}}).then((e=>{t.questionData=e.data}))},diplayRemarks(t,e){t.overlayRemarks=!0,k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getRemarks`,data:{Month:t.monthData,Team:t.teamData,Table:e}}).then((e=>{t.remarksData=e.data,t.overlayRemarks=!1}))},updateRemarks(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/updateRemarks`,data:{id:e.id,remarks:e.remarks,Time:A()().format("YYYY-MM-DD HH:mm:ss"),Name:t.user.name}}).then((function(){}))},getDivision(t){k()({method:"get",url:`${i.ZP.prototype.$baseUrl}api/getDivision`}).then((e=>{t.divisionItems=e.data}))},getFilterDivision(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getFilterDivision`,data:{data:e}}).then((e=>{t.filterDivisionItems=e.data}))},getFilterRank(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getFilterRank`,data:{data:e}}).then((e=>{t.filterRankItems=e.data}))},getUnit(t){k()({method:"get",url:`${i.ZP.prototype.$baseUrl}api/getUnit`}).then((e=>{t.unitItems=e.data}))},getFilterUnit(t,e){k()({method:"post",url:`${i.ZP.prototype.$baseUrl}api/getFilterUnit`,data:{data:e}}).then((e=>{t.filterUnitItems=e.data}))}},getters:{},plugins:[O]}),z=a(266),F=a(1713),B=function(){var t=this,e=t._self._c;return e("div",[e(F.Z,[e("center",[e(z.Z,[e(m.Z,{attrs:{src:t.D01,"max-width":"30%","max-height":"30%"}})],1)],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"6"}},[e(m.Z,{attrs:{src:t.D02,"max-width":"50%","max-height":"50%"}})],1),e(z.Z,{attrs:{cols:"6"}},[e(m.Z,{attrs:{src:t.D03,"max-width":"50%","max-height":"50%"}})],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"2"}},[e(m.Z,{attrs:{src:t.D04,"max-width":"50%","max-height":"50%"}})],1),e(z.Z,{attrs:{cols:"2"}},[e(m.Z,{attrs:{src:t.D05,"max-width":"50%","max-height":"50%"}})],1),e(z.Z,{attrs:{cols:"2"}},[e(m.Z,{attrs:{src:t.D06,"max-width":"50%","max-height":"50%"}})],1),e(z.Z,{attrs:{cols:"2"}},[e(m.Z,{attrs:{src:t.D07,"max-width":"50%","max-height":"50%"}})],1)],1)],1)},Y=[],G=a(6618),Q=a(7328),j=a(794),H=a(4383),V=a(3031),W=a(9353),K=a(7072),J=a(4005),X=a(6013),tt=a(2737),et=a(8442),at=a(1934),it=a(2846),nt=a(5055),rt=a(142),st=a(2189),lt=a(9597),ot=a(726),dt=a(9085),ct=a(172),ut=a(5817),ht=a(2019),mt=a(9432),pt={name:"WelcomeComponent",data:()=>({D01:G,D02:Q,D03:j,D04:G,D05:H,D06:V,D07:W,D08:K,D09:J,D10:X,D11:tt,D12:et,D13:at,D14:it,D15:nt,D16:rt,D17:st,D18:lt,D19:ot,D20:dt,D21:ct,D22:ut,D23:ht,D24:mt})},gt=pt,ft=(0,Z.Z)(gt,B,Y,!1,null,null,null),bt=ft.exports,vt=a(344),yt=a(4061),Dt=a(5125),xt=a(8224),Rt=a(7808),_t=function(){var t=this,e=t._self._c;return e("div",[t.hideLogin?e("div",[e("br"),e("div",{staticClass:"d-none d-md-block d-lg-block d-xl-block"},[e(l.Z,{attrs:{icon:""}},[e(h.Z,{attrs:{color:"primary","x-large":""},on:{click:function(e){return t.startLog(!1)}}},[t._v("mdi-arrow-left")])],1),e("h1",{staticStyle:{"font-size":"70px","font-weight":"bold"}},[e("center",[t._v("PHILIPPINE NAVY")])],1),t._l(t.groupedDepartment,(function(a,i){return e("div",{key:i,staticClass:"row-container"},[e("div",{staticClass:"title"},[e("span",[t._v(t._s(a[0].title))])]),e("div",{staticClass:"images"},[e(F.Z,{staticClass:"d-flex justify-center"},t._l(a,(function(a,i){return e(z.Z,{key:i,attrs:{cols:"12",sm:"1",md:"1",lg:"1",xl:"1"}},[e("center",[e(m.Z,{staticClass:"image-container",staticStyle:{cursor:"pointer"},attrs:{src:a.path,"max-width":"100%","max-height":"100%",transition:"slide-x-reverse-transition"},on:{click:function(e){return t.openDialog(a)}}}),e("span",{staticClass:"text-container",staticStyle:{"font-size":"10px","font-weight":"bold"}},[t._v(t._s(a.name))])],1)],1)})),1)],1)])}))],2),e("div",{staticClass:"d-sm-none"},[e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(l.Z,{attrs:{icon:""}},[e(h.Z,{attrs:{color:"primary","x-large":""},on:{click:function(e){return t.startLog(!1)}}},[t._v("mdi-arrow-left")])],1),e("div",{staticClass:"text-center"},[e("h1",{staticStyle:{"font-size":"40px","font-weight":"bold"}},[t._v("PHILIPPINE NAVY")])]),e("br"),e("div",[e(vt.Z,{staticClass:"text-center",attrs:{outlined:"",label:"Select Unit",items:this.department,"item-text":"type","item-value":"row",clearable:"",block:""},on:{change:function(e){return t.selectDepartment()}},model:{value:t.departmentMobile,callback:function(e){t.departmentMobile=e},expression:"departmentMobile"}})],1)],1)],1),e("br"),t._l(t.department,(function(a,i){return e("div",{key:i},[a.row==t.departmentMobile?e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e("center",[e(m.Z,{staticStyle:{cursor:"pointer"},attrs:{src:a.path,transition:"slide-x-reverse-transition","max-height":"100%","max-width":"100%"},on:{click:function(e){return t.openDialog(a)}}}),e("span",{staticClass:"text-container",staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v(t._s(a.name))])],1)],1)],1):t._e()],1)}))],2)]):t._e(),e(yt.Z,{attrs:{width:"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.captcha?e("div",{staticClass:"captchaContainer"},[e(o.Z,[e(d.ZB,[e("h3",[t._v("Prove you are human.")]),e("div",{staticClass:"captcha"},[t._l(t.captchaChars,(function(a,i){return[e("span",{key:i,staticClass:"captcha-char",style:{fontSize:a.fontSize+"px",transform:"rotate("+a.rotation+"deg)"}},[t._v(" "+t._s(a.char)+" ")])]}))],2),e("div",[e("br"),e(Rt.Z,{staticClass:"text-center",attrs:{dense:"",outlined:"",label:"Text",placeholder:"Type the text",maxlength:"6"},model:{value:t.captchaCode,callback:function(e){t.captchaCode=e},expression:"captchaCode"}})],1)]),e(d.h7,[e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(l.Z,{attrs:{block:""},on:{click:t.generateCaptcha}},[t._v("Generate Text")])],1),e(z.Z,{attrs:{cols:"12"}},[e(l.Z,{attrs:{block:"",color:"success"},on:{click:function(e){return t.validateCaptcha()}}},[t._v("Submit")])],1)],1)],1)],1)],1):e("div",[e(o.Z,[e("br"),e("center",[e(m.Z,{attrs:{src:t.logo,"max-width":"70%","max-height":"70%"}}),e("h3",[t._v(t._s(t.logoName))])],1),e(Dt.Z,{ref:"Login",attrs:{"lazy-validation":""},on:{submit:function(e){return e.preventDefault(),t.Login.apply(null,arguments)}}},[e(d.ZB,{staticClass:"d-flex flex-column"},[e(Rt.Z,{staticClass:"text-center",attrs:{dense:"",outlined:"",rules:[t.rules.required],label:"Username",maxlength:"10"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e(Rt.Z,{staticClass:"text-center",attrs:{dense:"",outlined:"",label:"Password","append-icon":t.show?"mdi-eye":"mdi-eye-off",type:t.show?"text":"password",rules:[t.rules.required],name:"input-10-1",maxlength:"12"},on:{"click:append":function(e){t.show=!t.show},input:function(e){return t.passCheck()}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),e(d.h7,{staticClass:"d-flex flex-column"},[e(l.Z,{attrs:{block:"",color:"primary",type:"submit",disabled:!t.logBtnRules,loading:t.loading}},[t._v("Login")])],1)],1)],1)],1)]),t.hideLogin?t._e():e("div",[e("center",[e(o.Z,{staticStyle:{top:"200px"},attrs:{width:"50%",height:"90%",rounded:"",flat:""}},[e("div",{staticClass:"d-none d-md-block d-lg-block d-xl-block"},[e(F.Z,[e(z.Z,{attrs:{cols:"6"}},[e(m.Z,{attrs:{src:t.navyLogo}})],1),e(z.Z,{staticStyle:{"text-align":"left"},attrs:{cols:"6"}},[e("h1",{staticStyle:{"font-size":"50px",margin:"0"}},[t._v("Philippine Navy Joint Readiness Reporting System")]),e("span",{staticStyle:{color:"#466ded","font-size":"30px","margin-top":"-30px"}},[e("span",{staticClass:"typed-text"},[t._v(t._s(t.typeValue))]),e("span",{staticClass:"blinking-cursor"},[t._v("|")]),e("span",{staticClass:"cursor",class:{typing:t.typeStatus}},[t._v(" ")])]),e("br"),e(xt.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:a}){return[e(l.Z,{class:{elevate:a},staticStyle:{"font-size":"24px"},attrs:{width:"50%",height:"25%","x-large":"",color:"primary"},on:{click:function(e){return t.startLog(!0)}}},[t._v(" GET STARTED "),a?e(h.Z,[t._v("mdi-arrow-right")]):t._e()],1)]}}],null,!1,2028621462)})],1)],1)],1),e("div",{staticClass:"d-sm-flex d-md-none"},[e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(m.Z,{attrs:{src:t.navyLogo}})],1),e(z.Z,{staticStyle:{"text-align":"center"},attrs:{cols:"12"}},[e("h2",{staticStyle:{"font-size":"25px",margin:"0"}},[t._v("Philippine Navy")]),e("h2",{staticStyle:{"font-size":"25px",margin:"0"}},[t._v("Joint Readiness ")]),e("h2",{staticStyle:{"font-size":"20px",margin:"0"}},[t._v("Reporting System")]),e("span",{staticStyle:{color:"#466ded","font-size":"15px","margin-top":"-30px"}},[e("span",{staticClass:"typed-text"},[t._v(t._s(t.typeValue))]),e("span",{staticClass:"blinking-cursor"},[t._v("|")]),e("span",{staticClass:"cursor",class:{typing:t.typeStatus}},[t._v(" ")])]),e("br"),e(xt.Z,{scopedSlots:t._u([{key:"default",fn:function({hover:a}){return[e(l.Z,{class:{elevate:a},staticStyle:{"font-size":"15px"},attrs:{width:"70%",height:"25%",medium:"",color:"primary"},on:{click:function(e){return t.startLog(!0)}}},[t._v(" GET STARTED "),a?e(h.Z,[t._v("mdi-arrow-right")]):t._e()],1)]}}],null,!1,2605894307)})],1)],1)],1)])],1)],1)],1)},St=[],Ct=a(6915),Tt=a(2916),wt={name:"LoginComponent",data:()=>({dialog:!1,sampleImage:Tt,navyLogo:Ct,images:[],logo:null,logoName:null,logoCode:null,show:!1,rules:{required:t=>!!t||"Required.",userMatch:()=>"The email and password you entered don't match"},password:null,username:null,logBtnRules:!1,loading:!1,log:!1,typeValue:"",typeStatus:!1,displayTextArray:["PHILIPPINE NAVY","Protecting the Seas","Securing our Future"],typingSpeed:100,erasingSpeed:100,newTextDelay:2e3,displayTextArrayIndex:0,charIndex:0,captchaChars:[],characters:"0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",captcha:!1,combinedWord:null,logObj:{},captchaCode:null,inLog:!1,departmentMobile:null}),methods:{generateCaptcha(){const t=this.characters.split("");let e=[];for(let a=0;a<6;a++){let a=t[Math.floor(Math.random()*t.length)],i=Math.floor(10*Math.random())+30,n=Math.floor(30*Math.random())-10;e.push({char:a,fontSize:i,rotation:n})}this.captchaChars=e,this.combinedWord=this.captchaChars.map((t=>t.char)).join("")},typeText(){this.charIndex<this.displayTextArray[this.displayTextArrayIndex].length?(this.typeStatus||(this.typeStatus=!0),this.typeValue+=this.displayTextArray[this.displayTextArrayIndex].charAt(this.charIndex),this.charIndex+=1,setTimeout(this.typeText,this.typingSpeed)):(this.typeStatus=!1,setTimeout(this.eraseText,this.newTextDelay))},eraseText(){this.charIndex>0?(this.typeStatus||(this.typeStatus=!0),this.typeValue=this.displayTextArray[this.displayTextArrayIndex].substring(0,this.charIndex-1),this.charIndex-=1,setTimeout(this.eraseText,this.erasingSpeed)):(this.typeStatus=!1,this.displayTextArrayIndex+=1,this.displayTextArrayIndex>=this.displayTextArray.length&&(this.displayTextArrayIndex=0),setTimeout(this.typeText,this.typingSpeed+1e3))},startLog(t){this.$store.state.hideLogin=t,t||(this.captcha=!1)},loadImage(){this.images=[];for(let t=1;t<=24;t++){let e={name:t<10?`D0${t}`:`D${t}`,path:t<10?a(7957)(`./D0${t}.png`):a(8041)(`./D${t}.png`)};this.images.push(e)}},getImageDataUrl(t,e){const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t},openDialog(t){this.logo=t.path,this.logoName=t.name,this.logoCode=t.code,this.dialog=!0},passCheck(){this.username&&this.password?this.logBtnRules=!0:this.logBtnRules=!1},decryptData(t){const e=atob(t);return e},Login(){this.$refs.Login.validate()&&k()({method:"post",url:`${this.$baseUrl}api/getLogin`,data:{username:this.username,password:this.password}}).then((t=>{let e=this.decryptData(t.data),a=JSON.parse(e).find((t=>t.Username==this.username&&t.Password==this.password));a&&a.UnitDepartmentCode==this.logoCode?(this.logObj={id:a.id,main:a.UnitDepartmentCode,mainName:a.UnitDepartmentName,unit:a.UnitSectionCode,office:a.UnitTeamCode,unitName:a.UnitSectionName,officeName:a.UnitTeamName,approver:a.Approver,name:a.Name,username:a.Username,rights:a.AccessRight,res:a.Office},this.captcha=!0):a&&a.UnitDepartmentCode!=this.logoCode?alert("You cannot log in to this unit"):alert("Username and Password are not match")}))},validateCaptcha(){k()({method:"post",url:`${this.$baseUrl}api/validateCaptcha`,data:{captchaData:this.combinedWord,validateData:this.captchaCode}}).then((t=>{let e=t.data;1==e.success?(this.$store.dispatch("getLogin",this.logObj),this.$store.dispatch("getSignatories",this.logObj),this.$router.push("/home")):alert("You enter wrong text")}))},selectDepartment(){console.log(this.departmentMobile)}},computed:{...(0,T.rn)(["user","departmentItems","hideLogin"]),department(){let t=[];return this.images.forEach(((e,a)=>{for(const i of this.departmentItems)if(i.UnitDepartmentCode==e.name){let n={row:null,type:null,path:null,code:null,name:null};0==a?(n.type="HPN & HSG",n.row=1):a>=1&&a<=2?(n.type="TYPE COMMANDS",n.row=2):a>=3&&a<=9?(n.type="COMBAT FORCES",n.row=3):a>=10&&a<=16?(n.type="COMBAT SUPPORT FORCES",n.row=4):a>=17&&a<=22?(n.type="GENERAL SUPPORT AND SUSTAINMENT FORCES",n.row=5):23==a&&(n.type="RESERVE FORCES",n.row=6),n.path=e.path,n.code=e.name,n.name=i.UnitDepartmentName,t.push(n)}})),t.reduce(((t,e)=>{let a=t.findIndex((t=>t.type==e.type));return-1==a?(e.title=e.type,t.push(e)):(t[a].title=e.type,t.push(e)),t}),[])},groupedDepartment(){const t={};return this.department.forEach((e=>{e.row in t||(t[e.row]=[]),t[e.row].push(e)})),Object.values(t)}},watch:{dialog(t){t||(this.$refs.Login&&(this.$refs.Login.resetValidation(),this.$refs.Login.reset()),this.captcha=!1)}},components:{},created(){this.$store.dispatch("getDepartment"),this.loadImage(),setTimeout(this.typeText,this.newTextDelay+200)},mounted(){this.generateCaptcha(),this.loadImage();const t=this;this.images.forEach((e=>{this.getImageDataUrl(e.path,(a=>{t.images=t.images.map((t=>t.path===e.path?{...t,dataUrl:a}:t))}))}))}},At=wt,Nt=(0,Z.Z)(At,_t,St,!1,null,"2d074a50",null),kt=Nt.exports,Et=a(2118),It=a(1030),Zt=a(2933),Pt=a(3305),Mt=a(9449),Ut=a(9258),qt=a(3924),$t=a(2165),Ot=a(7771),Lt=a(5085),zt=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Personnel Readiness")])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e(z.Z,{directives:[{name:"show",rawName:"v-show",value:t.approved.Status&&["1","2"].includes(t.user.approver)||!["1","2"].includes(t.user.approver),expression:"approved.Status && ['1','2'].includes(user.approver)|| !['1','2'].includes(user.approver)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.personel_tab,callback:function(e){t.personel_tab=e},expression:"personel_tab"}},[t.tableData?e(qt.Z,{attrs:{href:"#pqr"},on:{click:function(e){return t.pqr("pqr")}}},[t._v("PERSONNEL QUALIFICATION RATING")]):t._e(),t.tableData.length>0?e(qt.Z,{attrs:{href:"#psg"},on:{click:function(e){return t.psg("psg")}}},[t._v("PERSONNEL STRENGTH BY GRADE")]):t._e(),t.tableData.length>0?e(qt.Z,{attrs:{href:"#prs"},on:{click:function(e){return t.prs("prs")}}},[t._v("PERSONNEL READINESS RATING")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.personel_tab,callback:function(e){t.personel_tab=e},expression:"personel_tab"}},[e($t.Z,{attrs:{value:"pqr"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e(Et.Z,[e("div",[e("br"),!("1"==t.user.rights||["1","3"].includes(t.user.res)&&"D01"==t.user.main)?t._e():e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-top":"-30px"},attrs:{label:"Unit",dense:"",outlined:"",items:t.departmentItems,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),"1"!=t.user.rights&&!["1","3"].includes(t.user.res)?t._e():e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"Sub-Unit",dense:"",outlined:"",items:t.teamItems,"item-text":"UnitTeamName","item-value":"UnitTeamCode"},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),e(z.Z,[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1),e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate||t.generateDate>t.monthnow},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")]),e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:0==t.tableData.length||!t.approved.Status||!t.approved.Status&&"-"!=t.user.approver},on:{click:function(e){return t.print()}}},[t._v("PRINT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status&&2==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status&&3==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status&&4==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&5==t.user.approver&&t.disableApproved)},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:1==this.user.approver,expression:"this.user.approver == 1"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||!t.disableSubmit},on:{click:function(e){return t.submitData(t.generateDate,t.team)}}},[t._v("SUBMIT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"2")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"3")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"4")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],attrs:{color:"success",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&t.disableApproved)},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"5")}}},[t._v("APPROVED")]),t._v(" "),t.tableData.length>0?e("div",[e("br"),e("hr"),e("center",[e("StatusTimeline",{ref:"StatusTimeline",attrs:{month:t.generateDate,department:t.department,team:t.team,table:"personnel"},on:{fromTimeline:t.handledTimelineData}})],1)],1):t._e()],1)],1)])],1)],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"12",xl:"12",md:"12",lg:"12"}},[e("DeclinedCard",{ref:"DeclinedCard",attrs:{details:t.reasonDetails}})],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,{attrs:{elevation:"3"}},[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"150vh"}},[e("thead",[e("tr",[e("th",[t._v("DESCRIPTION/POSITION")]),e("th",{attrs:{width:"25%"}},[t._v("NAME")]),e("th",[t._v("RANK REQUIRED")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("POINTS")]),e("th",[t._v("AFPOS")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("POINTS")]),e("th",[t._v("REQUIRED")]),e("th",{directives:[{name:"show",rawName:"v-show",value:"0"==t.approved.Status&&1==t.user.approver,expression:"approved.Status == '0' && user.approver == 1"}]},[t._v("UPDATE")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{directives:[{name:"show",rawName:"v-show",value:t.approved&&1==t.user.approver||1!=t.user.approver,expression:"approved && user.approver == 1 || user.approver != 1"}],key:i},[a.OfficeName?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px","background-color":"lightgrey !important"},attrs:{colspan:"9"}},[t._v(t._s(a.OfficeName))])]):t._e(),a.GroupBranch&&!a.OfficeName?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"},attrs:{colspan:"2"}},[t._v(t._s(a.GroupBranch))])]):t._e(),"office_unit"!=a.PositionName?e("tr",[e("td",{staticStyle:{"text-align":"left !important"}},[t._v(t._s(a.PositionName))]),e("td",{staticStyle:{"text-align":"left !important"}},[t._v(t._s(a.RankName)+" "+t._s(a.Name)+" "+t._s(a.ServiceCode))]),e("td",[t._v(t._s(a.requiredGradeName))]),e("td",[t._v(t._s(a.RankCode))]),e("td",[t._v(t._s(a.GradePoint))]),e("td",[t._v(t._s(a.requiredAfposName))]),e("td",[t._v(t._s(a.AfposName))]),e("td",[t._v(t._s(a.AfposPoint))]),e("td",[t._v(t._s(a.requiredMp))]),e("td",{directives:[{name:"show",rawName:"v-show",value:"0"==t.approved.Status&&1==t.user.approver,expression:"approved.Status == '0' && user.approver == 1"}]},[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(l.Z,t._g({attrs:{icon:""},on:{click:function(e){return t.updateItem(a)}}},{...i}),[e(h.Z,{attrs:{color:"warning"}},[t._v("mdi-table-edit")])],1)]}}],null,!0)},[e("span",[t._v("Click to open updating details")])])],1)]):t._e()])}))],2),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)],1)],1),e($t.Z,{attrs:{value:"psg"}},[e(Et.Z,[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("TOTAL")])])]),e("tbody",[e("tr",[e("td",[t._v("TO")]),e("td",{staticClass:"total"},[t._v(t._s(t.totalToe))])]),e("tr",[e("td",[t._v("ACTUAL")]),e("td",{staticClass:"total"},[t._v(t._s(t.totalActual))])]),e("tr",[e("td",{staticStyle:{"background-color":"#0275d8",color:"white"},attrs:{colspan:"2"}},[e("b",[t._v("PSG RATING")])])]),e("tr",[e("td",{staticClass:"total",attrs:{colspan:"2"}},[t._v(t._s(t.psgRating.toFixed(2))+"%")])])])])],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,{attrs:{"max-width":"100%"}},[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"70vh"}},[e("thead",[e("tr",[e("th",[t._v("GRADE")]),e("th",[t._v("TO")]),e("th",[t._v("ACTUAL")])])]),t._l(t.psgTable,(function(a,i){return e("tbody",{key:i},[a.GroupDivision?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.GroupDivision))])]):t._e(),"-"!=a.GradeName?e("tr",[e("td",[t._v(t._s(a.GradeName))]),e("td",[t._v(t._s(a.countRequired))]),e("td",[t._v(t._s(a.countActual?a.countActual:""))])]):t._e(),a.GroupDivision||t.psgTable[i+1]&&!t.psgTable[i+1].GroupDivision?t._e():["-"!=a.GradeName?e("tr",{staticStyle:{"background-color":"lightgray"}},[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("Sub-Total")]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.totalCountRequired))]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.totalCountActual))])]):t._e()]],2)}))],2)],1)],1)],1)],1)],1),e($t.Z,{attrs:{value:"prs"}},[e(Et.Z,[e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},[e("thead",[e("tr",[e("th",[t._v("RATING")]),e("th",[t._v("PERCENTAGE")]),e("th",[t._v("WEIGHT"),e("br"),t._v("PERCENTAGE")])])]),e("tbody",[e("tr",[e("td",[t._v("PSGR (50%)")]),e("td",[t._v(t._s(t.psgRating?t.psgRating.toFixed(2):0)+"%")]),e("td",[t._v(t._s(t.psgRating05?t.psgRating05.toFixed(2):0)+"%")])]),e("tr",[e("td",[t._v("Personnel Qualification Rating (50%)")]),e("td",[t._v(t._s(t.pqrRating05?t.pqrRating05.toFixed(2):0)+"%")]),e("td",[t._v(t._s(t.pqrRatingTotal?t.pqrRatingTotal.toFixed(2):0)+"%")])]),e("tr",[e("td",[t._v("PRR (40%)")]),e("td",[t._v(t._s(t.gradeRating?t.gradeRating.toFixed(2):0)+"%")]),e("td",[t._v(t._s(t.gradeRating04?t.gradeRating04.toFixed(2):0)+"%")])]),e("tr",[e("td",[t._v("PSR (60%)")]),e("td",[t._v(t._s(t.afposRating?t.afposRating.toFixed(2):0)+"%")]),e("td",[t._v(t._s(t.afposRating06?t.afposRating06.toFixed(2):0)+"%")])]),e("tr",[e("td",[t._v("TOTAL (PSGR + PQR)")]),e("td"),e("td",[e("b",[t._v(t._s(t.totalRating?t.totalRating.toFixed(2):0)+"%")])])]),e("tr",[e("td",{attrs:{colspan:"2"}}),e("td",{class:t.totalRating?t.redConStyle(t.redConResult(t.totalRating)):""},[t._v(t._s(t.totalRating?t.redConResult(t.totalRating):""))])])])])],1)],1),e(c.Z),e("br"),e(Et.Z,[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e(yt.Z,{attrs:{persistent:"",width:"500px"},model:{value:t.updateDialog,callback:function(e){t.updateDialog=e},expression:"updateDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v("UPDATE "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.updateDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e(d.ZB,[e(Dt.Z,{ref:"updatePersonnel",on:{submit:function(e){return e.preventDefault(),t.updatePersonnel.apply(null,arguments)}}},[e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(Rt.Z,{staticStyle:{"margin-top":"10px","margin-bottom":"-30px"},attrs:{label:"Branch",dense:"",outlined:"",readonly:"",rules:t.rules},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}})],1),e(z.Z,{attrs:{cols:"12"}},[e(Rt.Z,{staticStyle:{"margin-bottom":"-30px"},attrs:{label:"Position",outlined:"",dense:"",readonly:"",rules:t.rules},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}})],1),e(z.Z,{attrs:{cols:"12"}},[e(Rt.Z,{staticStyle:{"margin-bottom":"-30px"},attrs:{label:"Name",placeholder:"Firstname MI Lastname",outlined:"",dense:"",clearable:"",rules:t.rules},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),e(z.Z,{attrs:{cols:"6"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-30px"},attrs:{label:"Rank",outlined:"",dense:"",items:t.rankItems,"item-text":"Rank","item-value":"Rank",clearable:"",rules:t.rules},model:{value:t.rankName,callback:function(e){t.rankName=e},expression:"rankName"}})],1),e(z.Z,{attrs:{cols:"6"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-30px"},attrs:{label:"Branch of Service",outlined:"",dense:"",items:t.serviceItems,clearable:"",rules:t.rules},model:{value:t.service,callback:function(e){t.service=e},expression:"service"}})],1),e(z.Z,{attrs:{cols:"6"}},[e(Rt.Z,{staticStyle:{"margin-bottom":"-30px"},attrs:{label:"Serial Number",outlined:"",dense:"",rules:t.rules},on:{blur:function(e){return t.checkSerial()}},model:{value:t.serialNo,callback:function(e){t.serialNo=e},expression:"serialNo"}})],1),e(z.Z,{attrs:{cols:"6"}},[e(vt.Z,{attrs:{label:"FOS",outlined:"",dense:"",items:t.afposItems,"item-text":"AfposName","item-value":"AfposCode",clearable:"",rules:t.rules},model:{value:t.afpos,callback:function(e){t.afpos=e},expression:"afpos"}})],1),e(z.Z,{attrs:{cols:"12"}},[e(l.Z,{attrs:{color:"success",medium:"",block:"",type:"submit"}},[t._v("UPDATE")]),e(l.Z,{attrs:{medium:"",block:""},on:{click:function(e){return t.resetUpdate()}}},[t._v("CLEAR")])],1)],1)],1)],1)],1)],1),e(Ut.Z,{attrs:{color:t.snackbar.color,timeout:t.timeout,top:"",elevation:"5","min-width":"0"},model:{value:t.snackbar.show,callback:function(e){t.$set(t.snackbar,"show",e)},expression:"snackbar.show"}},[t._v(" "+t._s(t.snackbar.message)+" "),e(h.Z,[t._v(t._s(t.snackbar.icon))])],1),e(Zt.Z,{attrs:{value:t.loadingPage}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("LOADING")])],1),e("SubmitDialog",{ref:"SubmitDialog",attrs:{getPersonnel:t.generate}}),e("PersonnelPrint",{ref:"PersonnelPrint"}),e("Details",{ref:"Details"}),e("DeclinedDialog",{ref:"DeclinedDialog",attrs:{generatePersonnel:t.generate},on:{"data-to-parent":t.handleDeclinedData}}),e("PrintDialog",{ref:"PrintDialog",attrs:{printPdf:t.printPdf,printExcel:t.extractExcel}}),e("ExtractionExcel",{ref:"ExtractionExcel",attrs:{excelData:t.dataDownload}})],1)},Ft=[],Bt=function(){var t=this,e=t._self._c;return e("div")},Yt=[],Gt=a(6727),Qt=a.n(Gt),jt=a(7920);Qt().vfs=jt.I.vfs;var Ht={data(){return{imageDataUrl:""}},methods:{redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e},async printPersonnel(t){Promise.all([this.printPQR(t),this.printPSG(t),this.printPSR(t)]).then((function(){alert("Files are printed!")}))},async printPQR(t){let e=[];const a=["DESCRIPTION/POSITION","NAME","RANK REQUIRED","ACTUAL","POINTS","AFPOS","ACTUAL","POINTS","REQUIRED"];t.tableData.forEach((t=>{if(t.OfficeName){let a=[{text:t.OfficeName||"",bold:!0,fontSize:13,alignment:"center",colSpan:9}];e.push(a)}if(t.GroupBranch&&!t.OfficeName){let a=[{text:t.GroupBranch||"",bold:!0,fontSize:12,alignment:"left",colSpan:9}];e.push(a)}if("office_unit"!=t.PositionName){let a=[{text:t.PositionName||"",alignment:"left",fontSize:t.PositionName&&t.PositionName.length>20?8:10},{text:`${t.RankName||""} ${t.Name||""} ${t.ServiceCode||""}`,alignment:"left",fontSize:t.Name&&t.Name.length>15?8:10},{text:t.requiredGradeName||"",alignment:"center",fontSize:10},{text:t.RankCode||"",alignment:"center",fontSize:10},{text:t.actualGrade||"",alignment:"center",fontSize:10},{text:t.requiredAfposName||"",alignment:"center",fontSize:10},{text:t.AfposName||"",alignment:"center",fontSize:10},{text:t.actualAfpos||"",alignment:"center",fontSize:10},{text:t.requiredMp||"",alignment:"center",fontSize:10}];e.push(a)}}));const i={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},n={fontSize:8,noWrap:!0},r={width:"100%",content:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"PERSONNEL QUALIFICATION RATING",alignment:"center",fontSize:13,margin:[0,0,0,2]},{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]},{table:{headerRows:1,widths:["auto","auto","auto","*","*","*","*","*","*"],body:[a.map((t=>({text:t,style:"tableHeader"}))),...e],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}}],pageOrientation:"landscape",styles:{tableHeader:i,tableBody:n},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(r).download("Personnel Qualification Rating.pdf")},async printPSG(t){let e={content:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"PERSONNEL STRENGTH BY GRADE (PSG)",alignment:"center",fontSize:13,margin:[0,0,0,2]},{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]},{columns:[{width:"30%",table:{headerRows:1,widths:["70%","30%"],body:[[{text:"TOTAL TOE",style:"tableHeader"},{text:t.totalToe.toString()||"",alignment:"center",style:"total"}],[{text:"TOTAL ACTUAL",style:"tableHeader"},{text:t.totalActual.toString()||"",alignment:"center",style:"total"}],[{text:"PSG RATING",style:"tableHeader"},{text:t.psgRating.toString()||"",alignment:"center",style:"total"}]]}},{},{width:"65%",table:{headerRows:1,widths:["40%","30%","30%"],body:[[{text:"GRADE",style:"tableHeader"},{text:"TOE",style:"tableHeader"},{text:"ACTUAL",style:"tableHeader"}],...t.psgTable.flatMap(((e,a)=>{const i=[];return e.GroupDivision&&i.push([{text:e.GroupDivision,colSpan:3,style:"groupDivision"},{},{}]),"-"!==e.GradeName&&i.push([{text:e.GradeName,style:"body"},{text:e.countRequired?e.countRequired:"",style:"body"},{text:e.countActual?e.countActual:"",style:"body"}]),(!t.psgTable[a+2]||t.psgTable[a+1].GroupDivision)&&i.length>0&&i.push([{text:"Sub-Total",style:"subTotal"},{text:e.totalCountRequired,style:"subTotal"},{text:e.totalCountActual,style:"subTotal"}]),i}))]}}]}],styles:{tableHeader:{fontSize:10,bold:!0,fillColor:"lightgray",alignment:"center"},total:{fontSize:"12",bold:!0},psgRatingHeader:{fontSize:8,bold:!0,fillColor:"#0275d8",color:"white"},psgRating:{fontSize:8},groupDivision:{bold:!0,fontSize:10,alignment:"center"},body:{fontSize:8,alignment:"center"},subTotal:{bold:!0,fontSize:8,fillColor:"lightgray",alignment:"center"}}};Qt().createPdf(e).download("Personnel Strength by Grade.pdf")},async printPSR(t){let e=[];t.assesment&&t.remarksData.forEach((t=>{if(t.Question){let a=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];e.push(a)}if(t.Remarks){let a=[{text:t.Remarks||"",alignment:"left",fontSize:10}];e.push(a)}}));let a={content:[{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:50,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:"PERSONNEL READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["50%","25%","25%"],body:[[{text:"RATING",style:"tableHeader"},{text:"PERCENTAGE",style:"tableHeader"},{text:"WEIGHT PERCENTAGE",style:"tableHeader"}],[{text:"PSGR (50%)",style:"percentTitle"},{text:t.psgRating,style:"percent"},{text:t.psgRating05,style:"percent"}],[{text:"Personnel Qualification Rating (50%)",style:"percentTitle"},{text:t.pqrRating05,style:"percent"},{text:t.pqrRatingTotal,style:"percent"}],[{text:"PRR (40%)",style:"percentTitle"},{text:t.gradeRating,style:"percent"},{text:t.gradeRating04,style:"percent"}],[{text:"PSR (60%)",style:"percentTitle"},{text:t.afposRating,style:"percent"},{text:t.afposRating06,style:"percent"}],[{text:"TOTAL (PSGR + PQR)",style:"percentTitle"},{text:""},{text:t.totalRating,style:"percent"}],[{text:"REDCON",style:"tableHeader"},{text:this.redCon(t.totalRating),style:this.redConStyle(this.redCon(t.totalRating)),colSpan:2,alignment:"center"},{}]]}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:e}},{},{margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.PreparedBy,alignment:"center",fontSize:t.sign.PreparedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.NotedBy,alignment:"center",fontSize:t.sign.NotedBy&&t.sign.NotedBy.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.ApprovedBy,alignment:"center",fontSize:t.sign.ApprovedBy&&t.sign.ApprovedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]}],styles:{tableHeader:{fontSize:10,bold:!0,fillColor:"lightgray",alignment:"center"},percent:{alignment:"center",fontSize:10},percentTitle:{bold:!0,fontSize:10},redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}}};0===e.length&&a.content.splice(-1),Qt().createPdf(a).download("Personnel Readiness Rating.pdf")}},computed:{...(0,T.rn)(["departmentData"])},mounted(){let t=a(8719)(`./${this.$store.state.user.main}.png`);const e=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};e(t,(t=>{this.imageDataUrl=t}))}},Vt=Ht,Wt=(0,Z.Z)(Vt,Bt,Yt,!1,null,"88cc3654",null),Kt=Wt.exports,Jt=function(){var t=this,e=t._self._c;return e("div")},Xt=[],te={data(){return{personnel:null,training:null,equipment:null,maintenance:null}},methods:{redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e}},watch:{}},ee=te,ae=(0,Z.Z)(ee,Jt,Xt,!1,null,null,null),ie=ae.exports,ne=a(1418),re=a.n(ne),se=function(){var t=this,e=t._self._c;return e("div",[t.tableData.length>0?e(o.Z,{attrs:{rounded:"2",color:"red",outlined:"","darken-4":""},on:{click:function(e){t.dialog=!0}}},[e(d.ZB,{staticStyle:{"text-align":"center"}},[e("p",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[t._v("DECLINED HISTORY")]),e("p",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[t._v("("+t._s(t.tableData.length)+")")])])],1):t._e(),e(yt.Z,{attrs:{persistent:"",width:"700px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[t.tableData.length>0?e(o.Z,{attrs:{elevation:"5"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v("DECLINED HISTORY "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e(d.ZB,[e(Mt.Z,{attrs:{height:"60vh","fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("Reason For Declined")]),e("th",[t._v("Date Declined")]),e("th",[t._v("Declined By")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",[t._v(t._s(a.Reason))]),e("td",[t._v(t._s(a.Date))]),e("td",[t._v(t._s(a.Name))])])])}))],2)],1)],1):t._e()],1)],1)},le=[],oe={props:["details"],data(){return{tableData:[],dialog:!1}},methods:{getReason(){k()({method:"post",url:`${this.$baseUrl}api/declinedReasonCard`,data:{table:this.details.table,month:this.details.month,unit:this.details.unit}}).then((t=>{this.tableData=t.data,this.$emit("reasonEvent",t.data.length>0)}))}},mounted(){}},de=oe,ce=(0,Z.Z)(de,se,le,!1,null,"a25e0456",null),ue=ce.exports,he=a(2648),me=function(){var t=this,e=t._self._c;return e("div",[e(yt.Z,{attrs:{persistent:"",width:"70%",scrollable:""},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(t._s(t.dialogTitle)+" "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e("br"),e(d.ZB,[e("div",[e("br"),e(c.Z),e(he.Z,{staticStyle:{"white-space":"pre-wrap"},attrs:{outlined:"",dense:"","auto-grow":"",label:"Reason for Decline"},model:{value:t.declineReason,callback:function(e){t.declineReason=e},expression:"declineReason"}})],1)]),e(d.h7,[e(l.Z,{attrs:{block:"",color:"success"},on:{click:function(e){return t.reasonBtn()}}},[t._v("SAVE")])],1),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("SAVING")])],1)],1)],1)],1)},pe=[],ge=a(6925),fe=a.n(ge),be={props:["getEquipment","getTraining","getApprovedMet","getPersonnel","getMaintenance","getAll"],data(){return{dialog:!1,declineReason:null,dialogTitle:null,item:{},overlay:!1}},methods:{openDialog(t){this.item={...t},this.dialogTitle=t.title,console.log(this.item.month),this.dialog=!0},reasonBtn(){const t=window.confirm("Are you sure you want to decline this report?");t&&(this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/declinedReason`,data:{time:this.item.today,month:this.item.month,unit:this.item.team,table:this.item.table,name:this.item.name,reason:this.declineReason}}).then((t=>{200==t.status&&(alert("Report was declined"),this.overlay=!1,this.dialog=!1,this.declineReason=null,console.log(this.item.table,"personnel yesfor"),"training"==this.item.table?(this.getApprovedMet("declined"),this.getTraining(),fe()(this.item)):(this.$emit("data-to-parent",!0),fe()(this.item)))})))}}},ve=be,ye=(0,Z.Z)(ve,me,pe,!1,null,"49889b62",null),De=ye.exports,xe=function(){var t=this,e=t._self._c;return e("div")},Re=[],_e=(a(6229),a(7330),a(2062),a(4295)),Se=a.n(_e),Ce={props:["excelData"],data(){return{}},methods:{exportExcel(){Promise.all([this.exportTable(),this.exportReadinnes()])},async exportTable(){const t=new(Se().Workbook),e=t.addWorksheet("Sheet1"),a=["DESCRIPTION/POSITION","NAME","RANK REQUIRED","ACTUAL","POINTS","AFPOS","ACTUAL","POINTS","REQUIRED"],i=e.addRow(a);i.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const n=["Description","Name","RequiredGradeName","RankCode","GradePoint","RequiredAfposName","AfposName","AfposPoint","RequiredMp"];this.excelTableData.forEach((t=>{const a=n.map((e=>t[e]||""));let i=e.addRow(a);"1"==t.Title?i.eachCell((t=>{t.font={bold:!0},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"808080"}},t.alignment={horizontal:"center"}})):"2"==t.Title&&i.eachCell((t=>{t.font={bold:!0}})),n.forEach((e=>{const a=n.indexOf(e);if(t[e]&&-1!==a){const t=i.getCell(a+1);"Description"!==e&&"Name"!==e&&(t.alignment={horizontal:"center"})}}))})),e.columns.forEach(((t,e)=>{t.width=0==e||1==e?60:15})),e.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const r=await t.xlsx.writeBuffer(),s=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.href=l,o.download=`${this.excelData.teamName}-${this.excelData.month}-Personnel List.xlsx`,o.click(),window.URL.revokeObjectURL(l)},async exportReadinnes(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["RATING","PERCENTAGE","WEIGHT PERCENTAGE"],n=a.addRow(i);n.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const r=["PSGR (50%)",t.psgRating,t.psgRating05];a.addRow(r);const s=["Personnel Qualification Rating (50%)",t.pqrRating05,t.pqrRatingTotal];a.addRow(s);const l=["PRR (40%)",t.gradeRating,t.gradeRating04];a.addRow(l);const o=["PSR (60%)",t.afposRating,t.afposRating06];a.addRow(o);const d=["TOTAL (PSGR + PQR)","",t.totalRating];a.addRow(d),a.columns.forEach(((t,e)=>{t.width=0==e?60:20})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.alignment={horizontal:"center"}}))}));const c=await e.xlsx.writeBuffer(),u=new Blob([c],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),h=window.URL.createObjectURL(u),m=document.createElement("a");m.href=h,m.download=`${this.excelData.teamName}-${this.excelData.month}-Personnel Readiness Report.xlsx`,m.click(),window.URL.revokeObjectURL(h)}},computed:{excelTableData(){let t=[];return this.excelData.tableData.forEach((e=>{let a={Description:e.OfficeName?e.OfficeName:e.GroupBranch,Name:"",RequiredGradeName:"",RankCode:"",GradePoint:"",RequiredAfposName:"",AfposName:"",AfposPoint:"",RequiredMp:"",Title:e.OfficeName?1:2},i={Description:e.PositionName,Name:e.Name?`${e.RankName} ${e.Name} ${e.ServiceCode}`:"",RequiredGradeName:e.requiredGradeName,RankCode:e.RankCode,GradePoint:e.GradePoint,RequiredAfposName:e.requiredAfposName,AfposName:e.AfposName,AfposPoint:e.AfposPoint,RequiredMp:e.requiredMp,Title:0};e.OfficeName&&t.push(a),e.GroupBranch&&!e.OfficeName&&t.push(a),"office_unit"!=e.PositionName&&t.push(i)})),t}}},Te=Ce,we=(0,Z.Z)(Te,xe,Re,!1,null,"5ffad366",null),Ae=we.exports,Ne=a(3486),ke=function(){var t=this,e=t._self._c;return e("div",[e(yt.Z,{attrs:{persistent:"",width:"300px"},model:{value:t.printDialog,callback:function(e){t.printDialog=e},expression:"printDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v("Download File "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.printDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e("br"),e(d.ZB,[e(Ne.Z,{attrs:{label:"Print PDF",value:"pdf"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),e(Ne.Z,{attrs:{label:"Extract Excel",value:"excel"},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}})],1),e(d.h7,[e(l.Z,{attrs:{color:"success",disabled:!(t.selected.length>0),block:"",loading:t.loading},on:{click:function(e){return t.download()}}},[t._v(" DOWNLOAD ")])],1)],1)],1)],1)},Ee=[],Ie={props:["printPdf","printExcel"],data(){return{printDialog:!1,selected:[],loading:!1}},methods:{async openDialog(){this.printDialog=!0},download(){const t=window.confirm("Are you sure you want to download this report?");t&&(this.loading=!0,this.selected.includes("pdf")&&(this.printPdf(),this.printDialog=!1),this.selected.includes("excel")&&(this.printExcel(),this.printDialog=!1))}},watch:{printDialog(t){t||(this.selected=[],this.loading=!1)}}},Ze=Ie,Pe=(0,Z.Z)(Ze,ke,Ee,!1,null,"54870882",null),Me=Pe.exports,Ue=function(){var t=this,e=t._self._c;return e("div",[e(yt.Z,{attrs:{width:"40%",persistent:"",scrollable:""},model:{value:t.remarksDialog,callback:function(e){t.remarksDialog=e},expression:"remarksDialog"}},[e(o.Z,{attrs:{elevation:"2"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" SUBMIT "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.remarksDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e(d.ZB,[e("br"),t._l(t.questionData,(function(a,i){return e("div",{directives:[{name:"show",rawName:"v-show",value:0==t.remarksData.length,expression:"remarksData.length == 0"}],key:i},[e("label",[t._v(t._s(a.Question))]),e(he.Z,{attrs:{dense:"",outlined:"","auto-grow":""},model:{value:t.remarks[i],callback:function(e){t.$set(t.remarks,i,e)},expression:"remarks[i]"}})],1)})),e("div",{directives:[{name:"show",rawName:"v-show",value:t.remarksData.length>0,expression:"remarksData.length > 0"}]},[e("h3",{staticStyle:{"text-align":"center"}},[t._v("To edit assessment, please go to the '"+t._s(t.table?t.table.toUpperCase():null)+" READINESS RATING' tab")])])],2),e(d.h7,[e(l.Z,{attrs:{color:"success",block:"",medium:""},on:{click:function(e){return t.submit()}}},[t._v("SUBMIT")])],1),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)],1)},qe=[],$e={props:["getMaintenance","getEquipment","getTraining","getApprovedMet","getFacility","getPersonnel","getAll"],data:()=>({remarksDialog:!1,remarks:[],month:null,team:null,overlay:!1,table:null}),methods:{...(0,T.nv)(["getLastMonth"]),openDialog(t,e,a){this.remarksDialog=!0,this.overlay=!0,this.month=t,this.team=e,this.table=a},submit(){this.overlay=!0,this.remarksData.length>0?this.update():k()({method:"post",url:`${this.$baseUrl}api/insertRemarks`,data:{remarks:this.remarks,Month:this.month,Team:this.team,table:this.table,Name:this.$store.state.user.name,Time:A()().format("YYYY-MM-DD")}}).then((t=>{200==t.status&&this.update()}))},update(){let t=this.$store.state.user;k()({method:"post",url:`${this.$baseUrl}api/updateSubmit`,data:{Department:t.main,Section:t.unit,Team:"D01"==t.main?t.office:t.unit,Month:this.month,Table:this.table,Name:t.name,Time:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((async t=>{"error"!=t.data?(alert("Submitted"),this.overlay=!1,this.remarksDialog=!1,"personnel"==this.table&&this.getPersonnel(),"training"==this.table&&(this.getTraining(),this.getApprovedMet("approved")),"equipment"==this.table&&this.getEquipment(),"maintenance"==this.table&&this.getMaintenance(),"facility"==this.table&&this.getFacility(),"n3"==this.table&&this.getAll()):(alert("You are not allowed to submit this report"),this.overlay=!1,this.remarksDialog=!1)}))},sendMail(){k()({method:"post",url:`${this.$baseUrl}api/sendMail`,data:{Department:this.user.main,Section:this.user.unit,Team:"D01"==this.user.main?this.user.office:this.user.unit,TeamName:"D01"==this.user.main?this.user.officeName:this.user.unitName,Month:this.formattedDate,Table:this.table,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss"),Status:"OIC"}}).then((async t=>{200==t.status?(alert("Submitted"),await this.$store.dispatch("getLastMonth"),this.overlay=!1,this.remarksDialog=!1,"training"==this.table&&(this.getTraining(),this.getApprovedMet("approved")),"equipment"==this.table&&this.getEquipment(),"maintenance"==this.table&&this.getMaintenance(),"facility"==this.table&&this.getFacility()):alert("Report not sent")}))}},computed:{...(0,T.rn)(["questionData","remarksData","user"]),formattedDate(){if(this.month){const t=new Date(this.month),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null}},watch:{questionData(t){t&&(this.overlay=!1)}},created(){}},Oe=$e,Le=(0,Z.Z)(Oe,Ue,qe,!1,null,"10bedb67",null),ze=Le.exports,Fe=a(8893),Be=a(9355),Ye=function(){var t=this,e=t._self._c;return e("div",[e(o.Z,[e("h4",{directives:[{name:"show",rawName:"v-show",value:t.timeLine.length>0,expression:"timeLine.length > 0"}]},[t._v("TIMELINE STATUS")]),t._l(t.timeLine,(function(a,i){return e(Fe.Z,{key:i,attrs:{dense:"","align-top":""}},[e(Be.Z,{class:t.font(a.Status,1),attrs:{small:"",color:t.color(a.Status,1)}},[t._v(" "+t._s(a.PreparedBy)),a.PreparedDate?e("br"):t._e(),t._v(t._s(a.PreparedDate)),e("br"),t._v("ENCODER/DRAFTER ")]),["T01","T02","T03"].includes(t.team)?t._e():e(Be.Z,{class:t.font(a.Status,2),attrs:{small:"",color:t.color(a.Status,2)}},[t._v(" "+t._s(a.NotedBy)),a.NotedDate?e("br"):t._e(),t._v(t._s(a.NotedDate)),e("br"),t._v("OIC CONCURRING ")]),["T01","T02","T03"].includes(t.team)?t._e():e(Be.Z,{class:t.font(a.Status,3),attrs:{small:"",color:t.color(a.Status,3)}},[t._v(" "+t._s(a.NotedBy2)),a.NotedDate2?e("br"):t._e(),t._v(t._s(a.NotedDate2)),e("br"),t._v(t._s(t.statusLabel(3))+" ")]),["T01","T02","T03"].includes(t.team)?t._e():e(Be.Z,{class:t.font(a.Status,4),attrs:{small:"",color:t.color(a.Status,4)}},[t._v(" "+t._s(a.NotedBy3)),a.NotedDate3?e("br"):t._e(),t._v(t._s(a.NotedDate3)),e("br"),t._v("DEPUTY CONCURRING ")]),e(Be.Z,{class:t.font(a.Status,5),attrs:{small:"",color:t.color(a.Status,5)}},[t._v(" "+t._s(a.ApprovedBy)),a.ApprovedDate?e("br"):t._e(),t._v(t._s(a.ApprovedDate)),e("br"),t._v(t._s(t.statusLabel(5))+" ")])],1)}))],2)],1)},Ge=[],Qe={props:["month","team","department","table"],data(){return{timeLine:[],runFunction:!1}},methods:{async getTimeline(){await k()({method:"post",url:`${this.$baseUrl}api/getTimeline`,data:{team:this.team,month:this.month,table:this.table}}).then((t=>{this.timeLine=t.data,this.$emit("fromTimeline",this.timeLine)}))},color(t,e){return t>=e?"blue":"gray"},font(t,e){return t>=e?"approved":"notApproved"},statusLabel(t){return"D01"!=this.department?3==t?"CHIEF OF STAFF CONCURRING":"COMMANDER APPROVAL":["T01","T02","T03"].includes(this.team)?"OIC APPROVAL":3==t?"EX-O CONCURRING":this.user.officeName},signBy(t){let e;return this.signatories.filter((a=>{t==a.Approver&&(e=a.Name)})),e}},computed:{...(0,T.rn)(["user","signatories"])},beforeMount(){this.getTimeline(),this.runFunction=!0},async mounted(){this.runFunction||(await this.getTimeline(),this.runFunction=!0)}},je=Qe,He=(0,Z.Z)(je,Ye,Ge,!1,null,"11d02216",null),Ve=He.exports;Qt().vfs=jt.I.vfs;var We={name:"PersonnelComponent",components:{SubmitDialog:ze,PersonnelPrint:Kt,Details:ie,DeclinedDialog:De,DeclinedCard:ue,ExtractionExcel:Ae,PrintDialog:Me,StatusTimeline:Ve},data:()=>({tableData:[],personalRadio:"generate",personel_tab:"pqr",generateMonthDialog:!1,generateDate:null,id:null,team:null,department:null,branch:null,position:null,rank:null,rankName:null,service:null,serialNo:null,tempSerial:null,afpos:null,name:null,rules:[t=>!!t||"Required"],serialLoading:!1,serialExist:!1,updateDialog:!1,snackbar:{show:!1,message:null,color:null,icon:null},timeout:1500,monthnow:A()().format("YYYY-MM"),remarksTable:[],editing:!1,editIndex:null,tableContainer:[],declinedData:!1,timelineData:{}}),methods:{...(0,T.nv)(["diplayRemarks"]),decryptData(t){const e=atob(t);return e},pqr(t){this.personel_tab=t},psg(t){this.personel_tab=t,this.$store.dispatch("getPsgTable")},prs(t){this.personel_tab=t,this.diplayRemarks("personnel"),this.$store.dispatch("getPsgTable"),this.$store.dispatch("getPoints")},capitalizeAfterSpace(t){let e=t.split(" "),a=e.map((t=>t.length>0?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"")),i=a.join(" ");return i},checkSerial(){this.serialLoading=!0,k()({method:"post",url:`${this.$baseUrl}api/checkSerial`,data:{serialNo:this.serialNo,month:this.generateDate,unit:this.team}}).then((t=>{let e=t.data.find((t=>t==this.serialNo));void 0!=e?this.tempSerial==this.serialNo?this.serialExist=!1:this.serialExist=!0:this.serialExist=!1,this.serialLoading=!1}))},requiredRule(){return!!this.serialNo||"Field is required"},customRule(){return!0!==this.serialExist||"Serial number are existed"},async generate(){try{await this.$store.dispatch("getLastMonth"),await this.$store.dispatch("diplayRemarks","personnel"),this.tableContainer=this.lastMonthData,await this.$refs.DeclinedCard.getReason(),await this.$refs.StatusTimeline.getTimeline()}catch(t){console.error("Error in generate:",t)}},getTable(t){if("noData"==t)this.tableData=[{}];else try{const e=t,a=this.decryptData(e);let i=JSON.parse(a);this.tableData=i.reduce(((t,e)=>{let a=t.findIndex((t=>t.BranchCode==e.BranchCode));if(-1==a){let a={...e};a.OfficeName="office_unit"==e.PositionName?e.BranchName:null,a.GroupBranch=e.BranchName,a.TotalMP=Number(e.requiredMp),t.push(a)}else isNaN(e.requiredMp)||(t[a].TotalMP+=Number(e.requiredMp)),t[a].count+=1,e.total=t[a].TotalMP,t.push(e);return t}),[])}catch(e){console.error("Error fetching and decrypting grade data:",e)}},updateItem(t){this.updateDialog=!0,this.id=t.id,this.branch=t.BranchName,this.position=t.PositionName,this.rank=t.RankCode,this.rankName=t.RankName,this.service=t.ServiceCode,this.serialNo=t.SerialNo?t.SerialNo:null,this.tempSerial=t.SerialNo?t.SerialNo:null,this.afpos=t.AfposCode,this.name=t.Name},updatePersonnel(){this.$refs.updatePersonnel.validate()&&(this.$store.state.overlay=!0,this.serialExist?(this.snackbar={message:"Serial number already exists!!",color:"error",icon:"mdi-alert-circle-outline",show:!0},this.$store.state.overlay=!1):k()({method:"post",url:`${this.$baseUrl}api/updatePersonnel`,data:{id:this.id,RankCode:this.rank,RankName:this.rankName,ServiceCode:this.service,SerialNo:this.serialNo,AfposCode:this.afpos,Name:this.capitalName,Time:A()().format("YYYY-MM-DD HH:mm:ss"),User:this.user.name}}).then((async t=>{200===t.status&&(await this.$store.dispatch("getLastMonth"),this.snackbar={message:"Record was updated!",color:"success",icon:"mdi-check-circle-outline",show:!0},this.updateDialog=!1)})))},resetUpdate(){k()({method:"post",url:`${this.$baseUrl}api/updatePersonnel`,data:{id:this.id,RankCode:null,RankName:null,ServiceCode:null,SerialNo:null,AfposCode:null,Name:null}}).then((async t=>{200===t.status&&(await this.generate(),this.snackbar={message:"Record was updated!",color:"success",icon:"mdi-check-circle-outline",show:!0},this.updateDialog=!1)}))},submitData(t,e){const a=window.confirm("Are you sure you want to submit this report?");a&&(this.$store.dispatch("diplayRemarks","personnel"),this.$store.dispatch("getQuestion","Personnel"),this.$refs.SubmitDialog.openDialog(t,e,"personnel"),this.$refs.StatusTimeline.getTimeline())},approvedData(t,e,a){const i=window.confirm("Are you sure you want to approved this report?");if(i){let i={month:t,team:e,table:"personnel",name:this.$store.state.user.name,url:this.$baseUrl,status:a};return Promise.all([re()(i),this.generate()])}},async declined(t,e){this.declinedData=!1;let a={month:t,title:`Reason for the Decline in the Reporting Month of ${this.formattedDate}`,team:e,table:"personnel",name:this.$store.state.user.name,url:this.$baseUrl,today:A()().format("YYYY-MM-DD HH:mm:ss")};this.$refs.DeclinedDialog.openDialog(a)},handleDeclinedData(t){this.declinedData=t},handledTimelineData(t){this.timelineData={...t[0]}},print(){this.remarksData.length>0?(this.$store.dispatch("diplayRemarks","personnel"),this.$refs.PrintDialog.openDialog()):alert("Kindly ensure that you submit the report before proceeding to print.")},printPdf(){this.$refs.PersonnelPrint.printPersonnel(this.dataDownload)},extractExcel(){this.$refs.ExtractionExcel.exportExcel()},redConResult(t){if(this.tableData.length>0)return this.$refs.Details.redCon(Number(t))},redConStyle(t){if(t)return this.$refs.Details.redConStyle(t)},updateRemarks(t){this.editing=!1,this.editIndex=null;const e=event.target.innerText;let a={id:t.id,remarks:e};this.$store.dispatch("updateRemarks",a)}},computed:{...(0,T.rn)(["departmentItems","teamItems","lastMonthData","branchItems","positionItems","rankItems","serviceItems","afposItems","psgTable","gradePoints","afposPoints","overlay","loadingPage","remarksData","user"]),capitalName(){let t="";return this.name&&(t=this.rank.includes("O")?this.name.toUpperCase():this.capitalizeAfterSpace(this.name)),t},formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},teamName(){if(this.team){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t}return""},disableSubmit(){if(this.team){let t="D01"==this.user.main?this.user.office:this.user.unit;return t==this.team&&0==this.approved.Status}return!1},disableApproved(){return!["T01","T02","T03"].includes(this.user.office)||1!=this.approved.Status},totalToe(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalRequired?t+e.TotalRequired:t),0):0},totalActual(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalActual?t+e.TotalActual:t),0):0},psgRating(){if(this.psgTable.length>0){let t;return t=this.totalActual/this.totalToe*100,t}return 0},gradeRating(){let t;return t=this.gradePoints/this.totalActual*100,t},gradeRating04(){let t;return t=.4*this.gradeRating,t},afposRating(){let t;return t=this.afposPoints/this.totalActual*100,t},afposRating06(){let t;return t=.6*this.afposRating,t},psgRating05(){let t;return t=this.psgRating?.5*this.psgRating:0,t},pqrRating05(){let t;return t=.5*this.pqrRatingTotal,t},pqrRatingTotal(){let t;return t=.4*this.gradeRating+.6*this.afposRating,t},totalRating(){let t;return t=Number(this.psgRating05)+Number(this.pqrRating05),t},submitted(){return this.tableData.length>0?this.tableData.find((t=>"1"==t.Submit)):0},approved(){return this.tableData.length>0?this.tableData.find((t=>t.Status)):0},reasonDetails(){let t={table:"personnel",month:this.generateDate,unit:this.team};return t},dataDownload(){let t={tableData:this.tableData,teamName:"D01"==this.department?this.user.officeName:this.user.unitName,month:this.formattedDate,psgTable:this.psgTable,totalToe:this.totalToe,totalActual:this.totalActual,psgRating:this.psgRating.toFixed(2)+"%",psgRating05:this.psgRating05.toFixed(2)+"%",pqrRating05:this.pqrRating05.toFixed(2)+"%",pqrRatingTotal:this.pqrRatingTotal.toFixed(2)+"%",gradeRating:this.gradeRating.toFixed(2)+"%",gradeRating04:this.gradeRating04.toFixed(2)+"%",afposRating:this.afposRating.toFixed(2)+"%",afposRating06:this.afposRating06.toFixed(2)+"%",totalRating:this.totalRating.toFixed(2)+"%",remarksData:this.remarksData,logo:this.department,assesment:!!(this.$store.state.remarksData&&this.$store.state.remarksData.length>0),status:this.approved.Status,sign:this.timelineData};return t}},watch:{lastMonthData(t){t&&this.getTable(t)},generateDate(t){t&&(this.$store.state.monthData=t)},department(t){t&&(this.$store.state.departmentData=t,this.$store.dispatch("getTeam"))},team(t){t&&(this.$store.state.teamData=t,this.$store.dispatch("getBranch",t))},tableContainer(t){t&&this.getTable(t)},branch(t){t&&this.$store.dispatch("getPosition",t)},position(t){t&&this.$store.dispatch("getRank")},rankName(t){t&&(this.$store.dispatch("getAfpos"),this.rankItems.filter((t=>{t.Rank==this.rankName&&(this.rank=t.Grade)})))},declinedData(t){t&&this.generate()}},mounted(){this.$store.dispatch("getDepartment"),this.department=this.user.main,this.$store.state.departmentData=this.department,this.user.rights?this.team=null:"D01"==this.user.main?this.team=this.user.office:this.team=this.user.unit},created(){}},Ke=We,Je=(0,Z.Z)(Ke,zt,Ft,!1,null,null,null),Xe=Je.exports,ta=a(4568),ea=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Training Readiness")])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.training_tab,callback:function(e){t.training_tab=e},expression:"training_tab"}},[e(qt.Z,{attrs:{href:"#orac"},on:{click:function(e){return t.orac("orac")}}},[t._v(" OPERATIONALLY READY & AVAILABLE CREW")]),t.tableData.length>0?e(qt.Z,{attrs:{href:"#mett"},on:{click:function(e){return t.mett("mett")}}},[t._v("MISSION ESSENNTIAL TASK TRAINING")]):t._e(),t.tableData.length>0?e(qt.Z,{attrs:{href:"#trr"},on:{click:function(e){return t.trr("trr")}}},[t._v("TRAINING READINESS RAITING")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.training_tab,callback:function(e){t.training_tab=e},expression:"training_tab"}},[e($t.Z,{attrs:{value:"orac"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e(Et.Z,[e("br"),e(F.Z,[!("1"==t.user.rights||["8","3"].includes(t.user.res)&&"D01"==t.user.main)?t._e():e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-top":"-30px"},attrs:{label:"Unit",dense:"",outlined:"",items:t.departmentItems,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),"1"!=t.user.rights&&!["8","3"].includes(t.user.res)?t._e():e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"Sub-Unit",dense:"",outlined:"",items:t.teamItems,"item-text":"UnitTeamName","item-value":"UnitTeamCode"},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate||t.generateDate>t.monthnow},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")]),e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:!(0!=t.tableData.length&&t.approved.Status&&(t.approved.Status||!["1","2"].includes(t.user.approver)))},on:{click:function(e){return t.print()}}},[t._v("PRINT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status&&2==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status&&3==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status&&4==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&5==t.user.approver&&t.disableApproved)},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:1==this.user.approver,expression:"this.user.approver == 1"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||!t.disableSubmit},on:{click:function(e){return t.submitData(t.generateDate,t.team)}}},[t._v("SUBMIT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"2")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"3")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"4")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],attrs:{color:"success",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&t.disableApproved)},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"5")}}},[t._v("APPROVED")])],1)],1),t.tableData.length>0?e("div",[e("br"),e("hr"),e("center",[e("StatusTimeline",{ref:"StatusTimeline",attrs:{month:t.generateDate,department:t.department,team:t.team,table:"training"},on:{fromTimeline:t.handledTimelineData}})],1)],1):t._e()],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("NR OF PERSONNEL"),e("br"),t._v("PER UMD")]),e("th",[t._v("NR ACTUAL"),e("br"),t._v("ASSIGNED")]),e("th",[t._v("ORAC")]),e("th",[t._v("PERCENTAGE")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.unitName?t.unitName:"-"))]),e("td",[t._v(t._s(t.totalToe))]),e("td",[t._v(t._s(t.totalAssigned))]),this.tableData.length>0?e("td",{style:0==t.approved.Status&&this.tableData.length>0?"cursor:pointer;background-color:lightyellow;":"",on:{dblclick:function(e){t.editingAct=!0}}},[t.editingAct&&0==t.approved.Status?[e(Rt.Z,{attrs:{type:"number",dense:"",outlined:""},on:{blur:function(e){return t.checkMp(t.actualMp)}},model:{value:t.actualMp,callback:function(e){t.actualMp=e},expression:"actualMp"}})]:[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e("div",t._g({staticStyle:{"white-space":"pre-wrap"}},{...a}),[t._v(t._s(t.totalActualMp))])]}}],null,!1,3204736979)},[e("span",[t._v("Double click to edit")])])]],2):t._e(),e("td",[t._v(t._s(t.oracPercentage?t.oracPercentage.toFixed(2)+"%":0))])])])])],1),e(c.Z),e("br"),t.reasonTable?e("div",[e("h3",[t._v("NOTE :")]),e("h4",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.reasonTable))])]):t._e()],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"12",xl:"3",md:"3",lg:"3"}},[e("DeclinedCard",{ref:"DeclinedCard",attrs:{details:t.reasonDetails}})],1)],1)],1),e($t.Z,{attrs:{value:"mett"}},[e(Et.Z,[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{height:"70vh","fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("MISSION ESSENTIAL TASK")]),e("th",[t._v("1st Qtr")]),e("th",[t._v("2nd Qtr")]),e("th",[t._v("3rd Qtr")]),e("th",[t._v("4th Qtr")]),e("th",[t._v("Required")]),e("th",[t._v("Actual")]),e("th",[t._v("Percentage")])])]),e("tbody",[t._l(t.tableData,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Met))]),e("td",{class:a.Quarter1?"background":"",on:{click:function(e){return t.updateMet(a,"Quarter1")}}},[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[a.Quarter1?e("span",t._g({},{...i}),[t._v(t._s(a.Quarter1))]):t._e()]}}],null,!0)},[e("span",[t._v("Click to open details")])])],1),e("td",{class:a.Quarter2?"background":"",on:{click:function(e){return t.updateMet(a,"Quarter2")}}},[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[a.Quarter2?e("span",t._g({},{...i}),[t._v(t._s(a.Quarter2))]):t._e()]}}],null,!0)},[e("span",[t._v("Click to open details")])])],1),e("td",{class:a.Quarter3?"background":"",on:{click:function(e){return t.updateMet(a,"Quarter3")}}},[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[a.Quarter3?e("span",t._g({},{...i}),[t._v(t._s(a.Quarter3))]):t._e()]}}],null,!0)},[e("span",[t._v("Click to open details")])])],1),e("td",{class:a.Quarter4?"background":"",attrs:{height:"60px"},on:{click:function(e){return t.updateMet(a,"Quarter4")}}},[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[a.Quarter4?e("span",t._g({},{...i}),[t._v(t._s(a.Quarter4))]):t._e()]}}],null,!0)},[e("span",[t._v("Click to open details")])])],1),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))]),e("td",[t._v(t._s(a.colPercentage?a.colPercentage.toFixed(2)+"%":""))])])})),t.tableData.length>0?e("tr",[e("td",{attrs:{colspan:"5"}}),e("td",{staticClass:"total"},[t._v(t._s(t.totalRequired))]),e("td",{staticClass:"total"},[t._v(t._s(t.totalOrac))]),e("td",{staticClass:"total"},[t._v(t._s(t.metPercentage.toFixed(2))+"%")])]):t._e()],2)])],1)],1)],1),e($t.Z,{attrs:{value:"trr"}},[e(Et.Z,[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("PERCENTAGE"),e("br"),t._v("ORAC")]),e("th",[t._v("PERCENTAGE"),e("br"),t._v("METT")]),e("th",[t._v("TRR")])])]),e("tbody",[e("tr",[e("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.unitName))]),e("td",[t._v(t._s(t.oracPercentage?t.oracPercentage.toFixed(2)+"%":0))]),e("td",[t._v(t._s(t.metPercentage?t.metPercentage.toFixed(2)+"%":0))]),e("td",{attrs:{rowspan:"2"}},[t._v(t._s(t.trRating?t.trRating.toFixed(2)+"%":0))])]),e("tr",[e("td",[t._v(t._s(t.oracValue?t.oracValue.toFixed(2)+"%":0))]),e("td",[t._v(t._s(t.metValue?t.metValue.toFixed(2)+"%":0))])]),e("tr",[e("td",{attrs:{colspan:"3"}}),e("td",{class:t.redConStyle(t.redConResult(t.trRating))},[t._v(t._s(t.redConResult(t.trRating)))])])])])],1)],1),e(c.Z),e("br"),e(Et.Z,[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e(yt.Z,{attrs:{persistent:"",width:"60%",scrollable:""},model:{value:t.metDialog,callback:function(e){t.metDialog=e},expression:"metDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(t._s(t.metDialogTitle)+" "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.metDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e(d.ZB,[e(Mt.Z,{staticClass:"custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("ACTUAL MET")]),e("th",[t._v("DATE")])])]),t._l(t.dialogTable,(function(a,i){return e("tbody",{key:i},[e("tr",{directives:[{name:"show",rawName:"v-show",value:a.quarter==t.quarterNumber,expression:"val.quarter == quarterNumber"}]},[1==a.approved?e("td",[t._v(" "+t._s(a.ActualMet)+" ")]):e("td",[a.quarter==t.quarterNumber?e(vt.Z,{staticStyle:{"margin-top":"5%"},attrs:{dense:"",outlined:"",items:t.metItems,"item-text":"Met","item-value":"Met",clearable:""},model:{value:a.ActualMet,callback:function(e){t.$set(a,"ActualMet",e)},expression:"val.ActualMet"}}):e(vt.Z,{staticStyle:{"margin-top":"5%"},attrs:{dense:"",outlined:"",items:t.metItems,"item-text":"Met","item-value":"Met",clearable:""},model:{value:t.metDetail,callback:function(e){t.metDetail=e},expression:"metDetail"}})],1),1==a.approved?e("td",[t._v(" "+t._s(a.date)+" ")]):e("td",[e(ta.Z,{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:n}){return[a.quarter==t.quarterNumber?e(Rt.Z,t._g(t._b({staticStyle:{"margin-top":"5%"},attrs:{label:"Inclusive Date","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",clearable:""},model:{value:a.date,callback:function(e){t.$set(a,"date",e)},expression:"val.date"}},"v-text-field",n,!1),i)):e(Rt.Z,t._g(t._b({staticStyle:{"margin-top":"5%"},attrs:{label:"Inclusive Date","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:"",clearable:""},model:{value:t.metDate,callback:function(e){t.metDate=e},expression:"metDate"}},"v-text-field",n,!1),i))]}}],null,!0),model:{value:a.menu,callback:function(e){t.$set(a,"menu",e)},expression:"val.menu"}},[a.quarter==t.quarterNumber?e(It.Z,{attrs:{"allowed-dates":t.disableMonth(t.quarterNumber)},on:{change:function(e){return t.checkMonth(a.date)},input:function(t){a.menu=!1}},model:{value:a.date,callback:function(e){t.$set(a,"date",e)},expression:"val.date"}}):e(It.Z,{attrs:{"allowed-dates":t.disableMonth(t.quarterNumber)},on:{change:function(e){return t.checkMonth(t.metDate)},input:function(t){a.menu=!1}},model:{value:t.metDate,callback:function(e){t.metDate=e},expression:"metDate"}})],1)],1)])])}))],2),e("br")],1),e(d.h7,[e(l.Z,{attrs:{block:"",color:"success",medium:"",disabled:!t.quarterDisable.includes(t.generateDate)||0!=this.approved.Status},on:{click:function(e){return t.updateTraining()}}},[t._v("UPDATE")])],1)],1)],1),e(yt.Z,{attrs:{persistent:"",width:"30%",scrollable:""},model:{value:t.reasonDialog,callback:function(e){t.reasonDialog=e},expression:"reasonDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v("ORAC "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.reasonDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e("br"),e(d.ZB,[e("div",[e("h4",[e("b",{staticStyle:{"font-size":"20px"}},[t._v(t._s(this.lackingMp))]),t._v(" member/s of the workforce did not conduct this activity.Please specify the reason")]),e(c.Z),e(he.Z,{staticStyle:{"white-space":"pre-wrap"},attrs:{outlined:"",dense:"","auto-grow":"",label:"Reason"},model:{value:t.reasonMet,callback:function(e){t.reasonMet=e},expression:"reasonMet"}})],1)]),e(d.h7,[e(l.Z,{attrs:{block:"",color:"success",disabled:0!=t.approved.Status},on:{click:function(e){return t.updateReason()}}},[t._v("UPDATE")])],1)],1)],1),e(Zt.Z,{attrs:{value:t.loadingPage}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("LOADING")])],1),e("TrainingPrint",{ref:"TrainingPrint"}),e("Details",{ref:"Details"}),e("SubmitDialog",{ref:"SubmitDialog",attrs:{getTraining:t.generate,getApprovedMet:t.getApprovedMet}}),e("DeclinedDialog",{ref:"DeclinedDialog",attrs:{getTraining:t.getTrainingData,getApprovedMet:t.getApprovedMet}}),e("PrintDialog",{ref:"PrintDialog",attrs:{printPdf:t.printPdf,printExcel:t.extractExcel}}),e("ExtractionExcel",{ref:"ExtractionExcel",attrs:{excelData:t.dataDownload}})],1)},aa=[],ia=function(){var t=this,e=t._self._c;return e("div")},na=[];Qt().vfs=jt.I.vfs;var ra={data(){return{imageDataUrl:""}},methods:{redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e},async printTraining(t){Promise.all([this.printMETT(t),this.printORAC(t),this.printTRR(t)]).then((function(){alert("Files are printed!")}))},async printMETT(t){let e=[];const a=["MISSION ESSENTIAL TASK","1st Qtr","2nd Qtr","3rd Qtr","4th Qtr","Required","Actual","Percentage"];t.tableData.forEach((t=>{let a=[{text:t.Met||"",alignment:"left",fontSize:t.Met&&t.Met.length>20?8:10},{text:t.Quarter1||"",alignment:"left",fontSize:t.Quarter1&&t.Quarter1.length>15?8:10},{text:t.Quarter2||"",alignment:"left",fontSize:t.Quarter2&&t.Quarter2.length>15?8:10},{text:t.Quarter3||"",alignment:"left",fontSize:t.Quarter3&&t.Quarter3.length>15?8:10},{text:t.Quarter4||"",alignment:"left",fontSize:t.Quarter4&&t.Quarter4.length>15?8:10},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.ActualNumber||"",alignment:"center",fontSize:10},{text:t.colPercentage?t.colPercentage.toFixed(2)+"%":"",alignment:"center",fontSize:10}];e.push(a)}));const i={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},n={fontSize:8,noWrap:!0};let r=[{text:"",colSpan:5},{},{},{},{},{text:t.totalRequired||"",alignment:"center",fontSize:10,bold:!0},{text:t.totalOrac||"",alignment:"center",fontSize:10,bold:!0},{text:t.metPercentage||"",alignment:"center",fontSize:10,bold:!0}];e.push(r);const s={width:"100%",content:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"MISSION ESSENNTIAL TASK TRAINING",alignment:"center",fontSize:13,margin:[0,0,0,2]},{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]},{table:{headerRows:1,widths:["auto","auto","auto","auto","auto","*","*","*"],body:[a.map((t=>({text:t,style:"tableHeader"}))),...e],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}}],pageOrientation:"landscape",styles:{tableHeader:i,tableBody:n},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(s).download("METT.pdf")},async printORAC(t){let e=[];const a=["NR OF PERSONNEL PER UMD","NR ACTUAL ASSIGNED","ORAC","PERCENTAGE"];let i=[{text:t.totalToe||"",alignment:"center",fontSize:10},{text:t.totalAssigned||"",alignment:"center",fontSize:10},{text:t.totalActualMp||"",alignment:"center",fontSize:10},{text:t.oracPercentage||"",alignment:"center",fontSize:10}];e.push(i);const n={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},r={fontSize:8,noWrap:!0},s={width:"100%",content:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"CONSOLIDATED OPERATIONALLY & AVAILABLE CREW",alignment:"center",fontSize:13,margin:[0,0,0,2]},{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]},{table:{headerRows:1,widths:["25%","25%","25%","25%"],body:[a.map((t=>({text:t,style:"tableHeader"}))),...e],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:t.reason?"NOTE:":"",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{text:t.reason||"",alignment:"left",fontSize:12}],pageOrientation:"landscape",styles:{tableHeader:n,tableBody:r},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(s).download("ORAC.pdf")},async printTRR(t){let e=[];t.remarksData&&t.remarksData.length>0&&t.remarksData.forEach((t=>{if(t.Question){let a=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];e.push(a)}if(t.Remarks){let a=[{text:t.Remarks||"",alignment:"left",fontSize:10}];e.push(a)}}));let a=[];const i=["PERCENTAGE ORAC","PERCENTAGE METT","TAINING READINNESS RATING"];let n=[{text:t.oracValue||"",alignment:"center",fontSize:10},{text:t.metValue||"",alignment:"center",fontSize:10},{text:t.trRating||"",alignment:"center",fontSize:10}];a.push(n);let r=[{text:"REDCON",alignment:"center",fontSize:10,style:"tableHeader",colSpan:2},{},{text:this.redCon(t.trRating)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.trRating))}];a.push(r);const s={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},l={fontSize:8,noWrap:!0};let o={content:[{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:50,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:"TRAINING READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["30%","30%","40%"],body:[i.map((t=>({text:t,style:"tableHeader"}))),...a],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:e}},{},{margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.PreparedBy,alignment:"center",fontSize:t.sign.PreparedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.NotedBy,alignment:"center",fontSize:t.sign.NotedBy&&t.sign.NotedBy.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.ApprovedBy,alignment:"center",fontSize:t.sign.ApprovedBy&&t.sign.ApprovedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]}],styles:{tableHeader:s,tableBody:l,redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}}};0===e.length&&o.content.splice(-1),Qt().createPdf(o).download("TRR.pdf")}},computed:{},mounted(){let t=a(8719)(`./${this.$store.state.user.main}.png`);const e=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};e(t,(t=>{this.imageDataUrl=t}))}},sa=ra,la=(0,Z.Z)(sa,ia,na,!1,null,"73c4b682",null),oa=la.exports,da=function(){var t=this,e=t._self._c;return e("div")},ca=[],ua={props:["excelData"],data(){return{}},methods:{exportExcel(){Promise.all([this.exportTable(),this.exportReadinnes()])},async exportTable(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["MISSION ESSENTIAL TASK","1st Qtr","2nd Qtr","3rd Qtr","4th Qtr","REQUIRED","ACTUAL","PERCENTAGE"],n=a.addRow(i);n.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const r=["Met","Quarter1","Quarter2","Quarter3","Quarter4","Required","Actual","colPercentage"];t.tableData.forEach((t=>{const e=r.map((e=>"colPercentage"===e&&t[e]?parseFloat(t[e]).toFixed(2)+"%":t[e]||""));a.addRow(e)}));const s=["","","","","",t.totalRequired,t.totalOrac,t.metPercentage];let l=a.addRow(s);l.eachCell((t=>{t.font={bold:!0}})),a.columns.forEach(((t,e)=>{t.width=0==e||1==e?30:20})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.alignment={horizontal:"center"},t.alignment={vertical:"middle"}}))}));const o=await e.xlsx.writeBuffer(),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(d),u=document.createElement("a");u.href=c,u.download=`${this.excelData.teamName}-${this.excelData.month}-Training List.xlsx`,u.click(),window.URL.revokeObjectURL(c)},async exportReadinnes(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["PERCENTAGE \n ORAC","PERCENTAGE \n METT","TRR"],n=a.addRow(i);n.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const r=[t.oracPercentage,t.metPercentage,t.trRating];a.addRow(r);const s=[t.oracValue,t.metValue];a.addRow(s),a.mergeCells(2,3,3,3),a.columns.forEach(((t,e)=>{t.width=0==e?60:20})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}},t.alignment={horizontal:"center"}}))}));const l=await e.xlsx.writeBuffer(),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(o),c=document.createElement("a");c.href=d,c.download=`${this.excelData.teamName}-${this.excelData.month}-Training Readiness Report.xlsx`,c.click(),window.URL.revokeObjectURL(d)}},computed:{excelTableData(){let t=[];return this.excelData.tableData.forEach((e=>{let a={Description:e.OfficeName?e.OfficeName:e.GroupBranch,Name:"",RequiredGradeName:"",RankCode:"",GradePoint:"",RequiredAfposName:"",AfposName:"",AfposPoint:"",RequiredMp:"",Title:e.OfficeName?1:2},i={Description:e.PositionName,Name:e.Name?`${e.RankName} ${e.Name} ${e.ServiceCode}`:"",RequiredGradeName:e.requiredGradeName,RankCode:e.RankCode,GradePoint:e.GradePoint,RequiredAfposName:e.requiredAfposName,AfposName:e.AfposName,AfposPoint:e.AfposPoint,RequiredMp:e.requiredMp,Title:0};e.OfficeName&&t.push(a),e.GroupBranch&&!e.OfficeName&&t.push(a),"office_unit"!=e.PositionName&&t.push(i)})),t}}},ha=ua,ma=(0,Z.Z)(ha,da,ca,!1,null,"243c065f",null),pa=ma.exports,ga={name:"TrainingComponent",components:{SubmitDialog:ze,TrainingPrint:oa,Details:ie,DeclinedDialog:De,DeclinedCard:ue,ExtractionExcel:pa,PrintDialog:Me,StatusTimeline:Ve},data:()=>({tableData:[],training_tab:"orac",generateMonthDialog:!1,generateDate:null,id:null,team:null,section:null,quarter:null,quarterItems:[{text:"1st",value:"1"},{text:"2nd",value:"2"},{text:"3rd",value:"3"},{text:"4th",value:"4"}],year:A()().year(),met:null,trainingTask:null,required:null,actual:null,rules:{required:[t=>!!t||"Field is required"],existing:[t=>"1"!==t||"Value '1' is not accepted"]},snackbar:{show:!1,message:null,color:null,icon:null},timeout:1500,monthnow:A()().format("YYYY-MM"),remarksTable:[],editingAct:!1,editing:!1,editIndex:null,colPercentage:0,department:null,metDialog:!1,metDialogTitle:null,dialogObj:{},dialogTable:[],metItems:[],metDetail:null,actualMp:0,reasonMet:null,metDate:null,menu:!1,tableMp:[],lackingMp:null,reasonDialog:!1,reasonData:null,sumActualMp:0,sumActualMet:0,quarterNumber:null,updateTrainingStatus:!1,timelineData:{}}),methods:{mett(t){this.training_tab=t},orac(t){this.updateTrainingStatus=!1,this.training_tab=t},trr(t){this.training_tab=t,this.$store.dispatch("diplayRemarks","training")},capitalizeAfterSpace(t){let e=t.split(" "),a=e.map((t=>t.length>0?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"")),i=a.join(" ");return i},test(){k()({method:"post",url:`${this.$baseUrl}api/insertTraining`,data:{Team:this.team,Met:this.capitalizeAfterSpace(this.met),Month:this.generateDate,Required:this.required,Actual:this.actual}}).then((t=>{200==t.status&&(this.trainingTask=null,this.required=null,this.actual=null,this.getTrainingData())}))},async callGetTimeline(){this.$refs.StatusTimeline?await this.$refs.StatusTimeline.getTimeline():console.error("StatusTimeline ref not available yet.")},generate(){k()({method:"post",url:`${this.$baseUrl}api/insertTraining`,data:{Team:this.team,Month:this.generateDate,Quarter:this.quarterJson}}).then((async t=>{"noData"!=t.data?(await this.getTrainingData(),await this.callGetTimeline(),await this.$refs.DeclinedCard.getReason()):alert("No set activities")}))},async getTrainingData(){this.$store.state.teamData=this.team,this.$store.state.monthData=this.generateDate,this.$store.state.loadingPage=!0,k()({method:"post",url:`${this.$baseUrl}api/getTrainingData`,data:{Section:null,Team:this.team,Month:this.generateDate}}).then((t=>{this.tableData=t.data.reduce(((t,e)=>{let a=t.findIndex((t=>t.id==e.id));return-1==a&&(1==this.quarterDate?(e.Required=e.Required1,e.Actual=e.Actual1):2==this.quarterDate?(e.Required=e.Required1+e.Required2,e.Actual=e.Actual1+e.Actual2):3==this.quarterDate?(e.Required=e.Required1+e.Required2+e.Required3,e.Actual=e.Actual1+e.Actual2+e.Actual3):4==this.quarterDate&&(e.Required=e.Required1+e.Required2+e.Required3+e.Required4,e.Actual=e.Actual1+e.Actual2+e.Actual3+e.Actual4),e.colPercentage=e.Actual/e.Required*100,t.push(e)),t}),[]),this.$store.state.loadingPage=!1,0==this.updateTrainingStatus&&(this.getActualMp(),this.getReason()),this.updateTrainingStatus=!1}))},updateMet(t,e){t[e].includes("No training")?alert("No Training Scheduled"):(this.quarterNumber=e,this.getMet(),this.metDialog=!0,this.metDialogTitle=t[e],this.dialogTable=JSON.parse(t.ActualMet),JSON.parse(t.ActualMet).length>0&&this.dialogTable.forEach(((a,i)=>{this.dialogTable[i].id=t.id,a.quarter==e&&(this.dialogTable[i].ActualMet=a.ActualMet,this.dialogTable[i].date=a.date,this.dialogTable[i].updatedBy=this.user.name,this.dialogTable[i].updatedDate=A()().format("YYYY-MM-DD HH:mm:ss"))})))},disableMonth(t){const e={Quarter1:[0,1,2],Quarter2:[3,4,5],Quarter3:[6,7,8],Quarter4:[9,10,11]};return a=>{const i=A()(a,"YYYY-MM-DD"),n=i.month();return e[t].includes(n)}},getMet(){k()({method:"post",url:`${this.$baseUrl}api/getMetItems`,data:{year:this.generateDate.substr(0,4),team:this.team}}).then((t=>{this.metItems=t.data.filter((t=>t.Met))}))},checkMp(t){if(t>this.totalAssigned)return alert(`Error: Actual is bigger than Required, the Required Mp for the ${this.formattedDate} are ${this.totalAssigned}`),this.editingAct=!1,!1;this.editingAct=!1,t<this.totalAssigned?(this.lackingMp=this.totalAssigned-t,this.reasonDialog=!0):this.updateReason()},checkMonth(t){this.$store.state.monthData=t.substr(0,7)},openActualMp(){this.reasonDialog=!0},getReason(){k()({method:"post",url:`${this.$baseUrl}api/getTrainingReason`,data:{Team:this.team,Month:this.generateDate}}).then((t=>{200==t.status&&(this.reasonMet=t.data)}))},updateReason(){k()({method:"post",url:`${this.$baseUrl}api/updateTrainingReason`,data:{actualMp:this.actualMp,reason:this.reasonMet,Team:this.team,Month:this.generateDate}}).then((t=>{200==t.status&&(this.getTrainingData(),this.reasonDialog=!1)}))},async updateTraining(){this.restrictMonth?(this.updateTrainingStatus=!0,k()({method:"post",url:`${this.$baseUrl}api/updateTraining`,data:{id:this.dialogTable[0].id,actualMet:this.dialogTable,reason:this.reasonMet,Actual:`Actual${this.quarterDate}`,ActualNumber:this.restrictMonth?1:0,totalActualMet:0,Month:this.generateDate,Department:this.department,Team:this.team,quarter:this.quarterNumber}}).then((t=>{200==t.status&&(this.getTrainingData(),this.metDialog=!1,this.metDate=null,this.metDetail=null)}))):alert("Error: Inclusive date is not same with your request Month ")},getActualMp(){k()({method:"post",url:`${this.$baseUrl}api/getActualMPTraining`,data:{Team:this.team,Month:this.generateDate}}).then((t=>{this.tableMp=t.data}))},async submitData(t,e){const a=window.confirm("Are you sure you want to submit this report?");a&&(await this.$store.dispatch("diplayRemarks","training"),await this.$store.dispatch("getQuestion","Training"),await this.$refs.SubmitDialog.openDialog(t,e,"training"))},approvedData(t,e,a){const i=window.confirm("Are you sure you want to approved this report?");if(i){let i={month:t,team:e,table:"training",name:this.$store.state.user.name,url:this.$baseUrl,status:a};return Promise.all([re()(i),this.generate()])}},declined(t,e){let a={month:t,title:`Reason for the Decline in the Reporting Month of ${this.formattedDate}`,team:e,table:"training",name:this.$store.state.user.name,url:this.$baseUrl,today:A()().format("YYYY-MM-DD HH:mm:ss")};this.$refs.DeclinedDialog.openDialog(a)},updateRemarks(t){this.editing=!1,this.editIndex=null;const e=event.target.innerText;let a={id:t.id,remarks:e};this.$store.dispatch("updateRemarks",a)},print(){this.remarksData.length>0?(this.$store.dispatch("diplayRemarks","training"),this.$refs.PrintDialog.openDialog()):alert("Kindly ensure that you submit the report before proceeding to print.")},printPdf(){this.$refs.TrainingPrint.printTraining(this.dataDownload)},extractExcel(){this.$refs.ExtractionExcel.exportExcel()},handledTimelineData(t){this.timelineData={...t[0]}},redConResult(t){if(t)return this.$refs.Details.redCon(Number(t))},redConStyle(t){if(t)return this.$refs.Details.redConStyle(t)},editable(t){return t.Month==this.generateDate},getApprovedMet(t){k()({method:"post",url:`${this.$baseUrl}api/getApprovedMet`,data:{data:this.dialogTable,Team:this.team,Month:this.generateDate,status:t}}).then((t=>{200==t.status&&console.log("ok")}))}},computed:{...(0,T.rn)(["departmentItems","teamItems","psgTable","remarksData","trainingTableUpdate","user","loadingPage"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},disableSubmit(){if(this.team){let t="D01"==this.user.main?this.user.office:this.user.unit;return t==this.team&&0==this.approved.Status}return!1},disableApproved(){return!["T01","T02","T03"].includes(this.user.office)||1!=this.approved.Status},quarterDisable(){let t=[],e=this.generateDate?this.generateDate.substr(0,4):"";return"Quarter1"==this.quarterNumber?t=[`${e}-01`,`${e}-02`,`${e}-03`]:"Quarter2"==this.quarterNumber?t=[`${e}-04`,`${e}-05`,`${e}-06`]:"Quarter3"==this.quarterNumber?t=[`${e}-07`,`${e}-08`,`${e}-09`]:"Quarter4"==this.quarterNumber&&(t=[`${e}-10`,`${e}-11`,`${e}-12`]),t},restrictMonth(){let t;return this.dialogTable.filter((e=>{e.quarter==this.quarterNumber&&(t=!(!e.date||!e.date.includes(this.generateDate)))})),t},quarterDate(){if(this.generateDate){let t=parseInt(this.generateDate.substr(5,2),10),e=null;return t>=1&&t<=3?e="1":t>=4&&t<=6?e="2":t>=7&&t<=9?e="3":t>=10&&t<=12&&(e="4"),e}return!1},quarterJson(){let t=[],e=["Quarter1","Quarter2","Quarter3","Quarter4"];for(let a=0;a<e.length;a++){let i={id:null,ActualMet:null,date:null,quarter:null,approved:0,updatedBy:null,updatedDate:null};const n=e[a];i.quarter=n,t.push(i)}return t},submitted(){return this.tableMp.length>0?this.tableMp.find((t=>"1"==t.Submit&&t.Month==this.generateDate)):0},approved(){return this.tableMp.length>0?this.tableMp.find((t=>t.Status&&t.Month==this.generateDate)):0},reasonTable(){return this.tableMp.length>0?this.tableMp[0].Reason:null},trainingId(){return this.tableMp.find((t=>t.Month==this.generateDate&&t.TrainingID))},totalActualMp(){let t;return this.tableMp.filter((e=>{e.Month==this.generateDate?(t=e.ActualMp,this.actualMp=t):(t=0,this.actualMp=t)})),t},totalRequired(){return this.tableData.length>0?this.tableData.reduce(((t,e)=>e.Required?t+Number(e.Required):t),0):0},totalOrac(){return this.tableData.length>0?this.tableData.reduce(((t,e)=>e.Actual?t+Number(e.Actual):t),0):0},metPercentage(){if(this.tableData.length>0){let t;return t=this.totalOrac/this.totalRequired*100,isNaN(t)||t!==1/0?t:0}return 0},totalAssigned(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalActual?t+e.TotalActual:t),0):0},oracPercentage(){if(this.tableData.length>0){let t;return t=this.totalActualMp/this.totalAssigned*100,t}return 0},oracValue(){if(this.tableData.length>0){let t;return t=this.totalActualMp/this.totalAssigned*100*.4,t}return 0},metValue(){if(this.tableData.length>0){let t;return t=this.totalOrac/this.totalRequired*100*.6,t}return 0},trRating(){if(this.tableData.length>0){let t,e=this.totalOrac/this.totalRequired*100*.6,a=this.totalActualMp/this.totalAssigned*100*.4;return t=Number(a)+Number(e),isNaN(t)||t!==1/0?t:0}return 0},unitName(){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t},yearItems(){const t=[],e=A()().year(),a=e+5;for(let i=2020;i<=a;i++)t.push(i);return t},totalToe(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalRequired?t+e.TotalRequired:t),0):0},reasonDetails(){let t={table:"training",month:this.generateDate,unit:this.team};return t},dataDownload(){let t={tableData:this.tableData,teamName:this.unitName,month:this.formattedDate,psgTable:this.psgTable,totalToe:this.totalToe,totalAssigned:this.totalAssigned,totalOrac:this.totalOrac,totalActualMp:this.totalActualMp,totalRequired:this.totalRequired,metPercentage:this.metPercentage.toFixed(2)+"%",oracPercentage:this.oracPercentage.toFixed(2)+"%",oracValue:this.oracValue.toFixed(2)+"%",metValue:this.metValue.toFixed(2)+"%",trRating:this.trRating.toFixed(2)+"%",remarksData:this.remarksData,reason:this.reasonMet,status:this.approved.Status,sign:this.timelineData};return t}},created(){this.$store.state.user.rights||(this.$store.state.departmentData=this.$store.state.user.main,this.$store.dispatch("getTeam"))},mounted(){this.$store.dispatch("getDepartment"),this.department=this.user.main,this.$store.state.departmentData=this.department,this.user.rights?this.team=null:"D01"==this.user.main?this.team=this.user.office:this.team=this.user.unit},watch:{tableData(t){t&&this.$store.dispatch("getPsgTable")},trainingTableUpdate(t){t&&this.getTrainingData()},department(t){t&&(this.$store.state.departmentData=t,this.$store.dispatch("getTeam"))}}},fa=ga,ba=(0,Z.Z)(fa,ea,aa,!1,null,"4645e737",null),va=ba.exports,ya=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Equipment Readiness")])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.equipment_tab,callback:function(e){t.equipment_tab=e},expression:"equipment_tab"}},[e(qt.Z,{attrs:{href:"#equip"},on:{click:function(e){return t.equip("equip")}}},[t._v("EQUIPMENT")]),t.tableData.length>0?e(qt.Z,{attrs:{href:"#read"},on:{click:function(e){return t.read("read")}}},[t._v("REPORT READINESS")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.equipment_tab,callback:function(e){t.equipment_tab=e},expression:"equipment_tab"}},[e($t.Z,{attrs:{value:"equip"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e(Et.Z,[e("br"),e(F.Z,[!("1"==t.user.rights||["4","3"].includes(t.user.res)&&"D01"==t.user.main)?t._e():e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-top":"-30px"},attrs:{label:"Unit",dense:"",outlined:"",items:t.departmentItems,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),"1"!=t.user.rights&&!["4","3"].includes(t.user.res)?t._e():e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"Sub-Unit",dense:"",outlined:"",items:t.teamItems,"item-text":"UnitTeamName","item-value":"UnitTeamCode"},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate||t.generateDate>t.monthnow},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")]),e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:!(0!=t.tableData.length&&t.approved.Status&&(t.approved.Status||!["1","2"].includes(t.user.approver)))},on:{click:function(e){return t.print()}}},[t._v("PRINT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status&&2==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status&&3==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status&&4==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&5==t.user.approver&&t.disableApproved)},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:1==this.user.approver,expression:"this.user.approver == 1"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||!t.disableSubmit},on:{click:function(e){return t.submitData(t.generateDate,t.team)}}},[t._v("SUBMIT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"2")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"3")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"4")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],attrs:{color:"success",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&t.disableApproved)},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"5")}}},[t._v("APPROVED")]),t._v(" "),t.tableData.length>0?e("div",[e("br"),e("hr"),e("center",[e("StatusTimeline",{ref:"StatusTimeline",attrs:{month:t.generateDate,department:t.department,team:t.team,table:"equipment"},on:{fromTimeline:t.handledTimelineData}})],1)],1):t._e()],1)],1)],1)],1)],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"12",xl:"12",md:"12",lg:"12"}},[e("DeclinedCard",{ref:"DeclinedCard",attrs:{details:t.reasonDetails}})],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"90vh"}},[e("thead",[e("tr",[e("th",[t._v("Description")]),e("th",{attrs:{width:"20%"}},[t._v("Required")]),e("th",{attrs:{width:"20%"}},[t._v("Actual")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{directives:[{name:"show",rawName:"v-show",value:t.approved&&1==t.user.approver||1!=t.user.approver,expression:"approved && user.approver == 1 || user.approver != 1"}],key:i},[e("tr",[e("td",{style:a.Title?"font-weight:bold;text-align:left !important;":"text-align:left !important;",attrs:{colspan:a.Required?"1":"3"}},[t._v(" "+t._s(a.Detail)+" ")]),a.Required?e("td",[t._v(t._s(a.Required))]):t._e(),e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:n}){return[a.Required?e("td",t._g({class:"0"==a.Status&&a.Required?"background":"",on:{dblclick:function(e){t.editActual=!0,t.editIndex=i}}},{...n}),[t.editActual&&t.editIndex===i&&"0"==a.Status?[e("input",{directives:[{name:"model",rawName:"v-model",value:a.Actual,expression:"item.Actual"}],staticClass:"editable",attrs:{type:"number"},domProps:{value:a.Actual},on:{blur:function(e){return t.updateDetail(a)},input:function(e){e.target.composing||t.$set(a,"Actual",e.target.value)}}})]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Actual?a.Actual:""))])]],2):t._e()]}}],null,!0)},[e("span",[t._v("Double click to edit")])])],1)])}))],2)],1)],1)],1)],1),e($t.Z,{attrs:{value:"read"}},[e(Et.Z,[e(F.Z,[e("h2",[t._v("EQUIPMENT READINESS RATING")]),e(z.Z,{attrs:{cols:"12"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th"),e("th"),e("th",[t._v("TE")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("%")])])]),t._l(t.totalTable,(function(a,i){return e("tbody",{key:i},[a.Category==a.Sub?e("tr",[e("td",[t._v(t._s(a.Category))])]):t._e(),a.title?t._e():e("tr",[e("td"),e("td",[t._v(t._s("primary"==a.info?a.Sub:""))]),e("td",[t._v(t._s(a.totalRequired))]),e("td",[t._v(t._s(a.totalActual))]),e("td",[t._v(t._s(a.percent.toFixed(2)+"%"))])]),a.break?[e("tr",[e("td",{staticClass:"content"}),e("td",{staticClass:"content"},[t._v("Total")]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.totalPrimaryRequired:t.totalSecondaryRequired))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.totalPrimaryActual:t.totalSecondaryActual))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.averagePrimary:t.averageSecondary)+"%")])]),e("tr",[e("td",{staticClass:"content"}),e("td",{staticClass:"content",attrs:{colspan:"3"}},[t._v(t._s(t.remarks(a)))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.mee.toFixed(2)+"%":t.see.toFixed(2)+"%"))])])]:t._e(),t.totalTable[i+1]?t._e():[e("tr",[e("td",{staticClass:"content",attrs:{colspan:"4"}},[t._v("MEE + SEE")]),e("td",{staticClass:"readiness"},[t._v(t._s(t.readinessRating.toFixed(2)+"%"))])]),e("tr",[e("td",{class:t.redConStyle(t.redConResult(t.readinessRating)),attrs:{colspan:"5"}},[t._v(t._s(t.redConResult(t.readinessRating)))])])]],2)}))],2)],1)],1)],1),e(c.Z),e("br"),e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e(Zt.Z,{attrs:{value:t.loadingPage}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("LOADING")])],1),e("EquipmentPrint",{ref:"EquipmentPrint"}),e("SubmitDialog",{ref:"SubmitDialog",attrs:{getEquipment:t.generate}}),e("PrintDialog",{ref:"PrintDialog",attrs:{printPdf:t.printPdf,printExcel:t.extractExcel}}),e("ExtractionExcel",{ref:"ExtractionExcel",attrs:{excelData:t.dataDownload}}),e("Details",{ref:"Details"}),e("DeclinedDialog",{ref:"DeclinedDialog",on:{"data-to-parent":t.handleDeclinedData}})],1)},Da=[],xa=function(){var t=this,e=t._self._c;return e("div")},Ra=[];Qt().vfs=jt.I.vfs;var _a={data(){return{imageDataUrl:""}},methods:{redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e},async printEquipment(t){Promise.all([this.table(t),this.readiness(t)]).then((function(){alert("Files are printed!")}))},async table(t){let e=[];const a=["Description","Required","Actual"];t.tableData.forEach((t=>{let a=[{text:t.Detail||"",alignment:"left",fontSize:t.Detail&&t.Detail.length>20?8:10},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];e.push(a)}));const i={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},n={fontSize:8,noWrap:!0},r={width:"100%",content:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"EQUIPMENT",alignment:"center",fontSize:13,margin:[0,0,0,2]},{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]},{table:{headerRows:1,widths:["60%","20%","20%"],body:[a.map((t=>({text:t,style:"tableHeader"}))),...e]}}],pageOrientation:"portait",styles:{tableHeader:i,tableBody:n},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(r).download("EQUIPMENT.pdf")},async readiness(t){const e=t=>{const e=Math.round(100*t)/100;return e.toFixed(2)},a=(t,a)=>{let i=a/t*100;return i?e(i):0};let i=[];t.assesment&&t.remarksData.forEach((t=>{if(t.Question){let e=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];i.push(e)}if(t.Remarks){let e=[{text:t.Remarks||"",alignment:"left",fontSize:10}];i.push(e)}}));let n={content:[{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:50,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:"EQUIPMENT READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{text:"\n"},{text:"\n"},{table:{headerRows:1,widths:["*","*","10%","10%","10%"],body:[[{text:"",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"TE",style:"tableHeader"},{text:"ACTUAL",style:"tableHeader"},{text:"%",style:"tableHeader"}],...t.totalTable.flatMap(((e,a)=>{const i=[];return e.Category==e.Sub&&i.push([{text:e.Category,colSpan:3,style:"groupDivision"},{},{},{},{}]),e.title||i.push([{},{text:"primary"==e.info?e.Sub:"",style:"body"},{text:e.totalRequired,style:"body"},{text:e.totalActual,style:"body"},{text:e.percent.toFixed(2)+"%",style:"body"}]),e.break&&(i.push([{text:"",style:"total"},{text:"TOTAL",style:"total"},{text:"primary"==e.info?t.totalPrimaryRequired:t.totalSecondaryRequired,style:"total"},{text:"primary"==e.info?t.totalPrimaryActual:t.totalSecondaryActual,style:"total"},{text:"primary"==e.info?t.averagePrimary+"%":t.averageSecondary+"%",style:"total"}]),i.push([{text:"",style:"subTotal"},{text:"primary"==e.info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",style:"subTotal",colSpan:3},{},{},{text:"primary"==e.info?t.mee.toFixed(2)+"%":t.see.toFixed(2)+"%",style:"subTotal"}])),t.totalTable[a+1]||i.push([{text:"MEssE + SEE",style:"total",colSpan:4},{},{},{},{text:t.readinessRating.toFixed(2)+"%",style:"total"}],[{text:this.redCon(t.readinessRating),style:this.redConStyle(this.redCon(t.readinessRating)),colSpan:5,alignment:"center"},{},{},{},{}]),i}))]}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:i}},{},{margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.PreparedBy,alignment:"center",fontSize:t.sign.PreparedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.NotedBy,alignment:"center",fontSize:t.sign.NotedBy&&t.sign.NotedBy.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.ApprovedBy,alignment:"center",fontSize:t.sign.ApprovedBy&&t.sign.ApprovedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]}],functions:{roundUpValue:e,itemPercentage:a},styles:{tableHeader:{fontSize:10,bold:!0,fillColor:"lightgray",alignment:"center"},total:{fontSize:10,bold:!0,alignment:"center"},groupDivision:{bold:!0,fontSize:10,alignment:"left"},body:{fontSize:8,alignment:"center"},subTotal:{bold:!0,fontSize:10,fillColor:"lightgray",alignment:"center"},redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}}};Qt().createPdf(n).download("ERR.pdf")}},computed:{},mounted(){let t=a(8719)(`./${this.$store.state.user.main}.png`);const e=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};e(t,(t=>{this.imageDataUrl=t}))}},Sa=_a,Ca=(0,Z.Z)(Sa,xa,Ra,!1,null,"3e853d5d",null),Ta=Ca.exports,wa=function(){var t=this,e=t._self._c;return e("div")},Aa=[],Na={props:["excelData"],data(){return{}},methods:{exportExcel(){Promise.all([this.exportTable(),this.exportReadinnes()])},async exportTable(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["Description","Required","Actual"],n=a.addRow(i);n.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const r=["Detail","Required","Actual"];t.tableData.forEach((t=>{const e=r.map((e=>t[e]||""));let i=a.addRow(e);"1"===t.Title&&i.eachCell((t=>{t.font={bold:!0}}));const n=r.indexOf("Required"),s=r.indexOf("Actual");t.Required&&-1!==n&&(i.getCell(n+1).alignment={horizontal:"center"}),t.Actual&&-1!==s&&(i.getCell(s+1).alignment={horizontal:"center"})})),a.columns.forEach(((t,e)=>{0==e&&(t.width=70)})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const s=await e.xlsx.writeBuffer(),l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(l),d=document.createElement("a");d.href=o,d.download=`${this.excelData.teamName}-${this.excelData.month}-Equipment List.xlsx`,d.click(),window.URL.revokeObjectURL(o)},async exportReadinnes(){const t=new(Se().Workbook),e=t.addWorksheet("Sheet1"),a=["","","TE","ACTUAL","%"],i=e.addRow(a);i.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const n=["Category","Sub","Required","Actual","Percent"];this.readinessData.forEach((t=>{const a=n.map((e=>t[e]||""));let i=e.addRow(a);const r=n.indexOf("Required"),s=n.indexOf("Actual"),l=n.indexOf("Percent");t.Required&&-1!==r&&(i.getCell(r+1).alignment={horizontal:"center"}),t.Actual&&-1!==s&&(i.getCell(s+1).alignment={horizontal:"center"}),t.Percent&&-1!==l&&(i.getCell(l+1).alignment={horizontal:"center"})})),e.columns.forEach(((t,e)=>{0!=e&&1!=e||(t.width=40)})),e.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const r=await t.xlsx.writeBuffer(),s=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.href=l,o.download=`${this.excelData.teamName}-${this.excelData.month}-Equipment Readiness Report.xlsx`,o.click(),window.URL.revokeObjectURL(l)}},computed:{readinessData(){let t=[];return this.excelData.totalTable.forEach(((e,a)=>{let i={Title:null,Category:null,Sub:null,Required:null,Actual:null,Percent:null,Total:null,Primary:null,Secondary:null};if(e.Category==e.Sub&&(i.Title=1,i.Category=e.Category,i.Required="MOBILITY"!=e.Category&&"FIREPOWER"!=e.Category?e.totalRequired:"",i.Actual="MOBILITY"!=e.Category&&"FIREPOWER"!=e.Category?e.totalActual:"",i.Percent=e.percent&&"MOBILITY"!=e.Category&&"FIREPOWER"!=e.Category?e.percent.toFixed(2)+"%":""),e.Category!=e.Sub&&(i.Sub=e.Sub,i.Required=e.totalRequired,i.Actual=e.totalActual,i.Percent=e.percent?e.percent.toFixed(2)+"%":""),t.push(i),e.break){let a={Title:2,Category:"",Sub:"TOTAL",Required:"primary"==e.info?this.excelData.totalPrimaryRequired:this.excelData.totalSecondaryRequired,Actual:"primary"==e.info?this.excelData.totalPrimaryActual:this.excelData.totalSecondaryActual,Percent:"primary"==e.info?this.excelData.averagePrimary+"%":this.excelData.averageSecondary+"%"};t.push(a)}if(e.break&&a+1){let a={Title:3,Category:"",Sub:"primary"==e.info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",Required:"",Actual:"",Percent:"primary"==e.info?this.excelData.mee.toFixed(2)+"%":this.excelData.see.toFixed(2)+"%"};t.push(a)}if(!this.excelData.totalTable[a+1]){let e={Title:3,Category:"",Sub:"MEE +SE",Required:"",Actual:"",Percent:Number(this.excelData.mee.toFixed(2))+Number(this.excelData.see.toFixed(2))+"%"};t.push(e)}})),t}}},ka=Na,Ea=(0,Z.Z)(ka,wa,Aa,!1,null,"ed0432ae",null),Ia=Ea.exports,Za={name:"EquipmentComponent",components:{EquipmentPrint:Ta,ExtractionExcel:Ia,SubmitDialog:ze,Details:ie,DeclinedDialog:De,DeclinedCard:ue,PrintDialog:Me,StatusTimeline:Ve},data:()=>({equipment_tab:"equip",tableData:[],department:null,editing:!1,editActual:!1,editIndex:null,generateMonthDialog:!1,generateDate:null,id:null,team:null,year:A()().year(),rules:{required:[t=>!!t||"Field is required"],existing:[t=>"1"!==t||"Value '1' is not accepted"]},snackbar:{show:!1,message:null,color:null,icon:null},timeout:1500,monthnow:A()().format("YYYY-MM"),declinedData:!1,updateDetailStatus:!1,timelineData:{}}),methods:{async callGetTimeline(){this.$refs.StatusTimeline?await this.$refs.StatusTimeline.getTimeline():console.error("StatusTimeline ref not available yet.")},generate(){this.$store.state.loadingPage=!0,k()({method:"post",url:`${this.$baseUrl}api/getEquipment`,data:{Team:this.team,Month:this.generateDate}}).then((async t=>{200==t.status&&(this.tableData=t.data,this.$store.state.teamData=this.team,this.$store.state.monthData=this.generateDate,0==this.updateDetailStatus&&(await this.$store.dispatch("diplayRemarks","equipment"),await this.$refs.DeclinedCard.getReason(),await this.callGetTimeline()),this.$store.state.loadingPage=!1,this.updateDetailStatus=!1)}))},equip(t){this.equipment_tab=t},read(t){this.equipment_tab=t,this.$store.dispatch("diplayRemarks","equipment")},checkRequired(t){return Number(t.Required)<Number(t.Actual)&&(alert("Error: The total value of Actual is greater than the Required Value"),this.generate(),!0)},itemPercentage(t,e){let a;return a=e/t*100,this.percentage=a?this.roundUpValue(a):0},updateDetail(t){this.updateDetailStatus=!0,k()({method:"post",url:`${this.$baseUrl}api/updateDetail_equipment`,data:{id:t.id,actual:t.Actual,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((t=>{200==t.status?this.generate():alert("Error:Please reinput actual")}))},submitData(t,e){const a=window.confirm("Are you sure you want to submit this report?");a&&(this.$store.dispatch("diplayRemarks","equipment"),this.$store.dispatch("getQuestion","Equipment"),this.$refs.SubmitDialog.openDialog(t,e,"equipment"))},approvedData(t,e,a){const i=window.confirm("Are you sure you want to approved this report?");if(i){let i={month:t,team:e,table:"equipment",name:this.$store.state.user.name,url:this.$baseUrl,status:a};return Promise.all([re()(i),this.generate()])}},declined(t,e){let a={month:t,title:`Reason for the Decline in the Reporting Month of ${this.formattedDate}`,team:e,table:"equipment",name:this.$store.state.user.name,url:this.$baseUrl,today:A()().format("YYYY-MM-DD HH:mm:ss")};this.$refs.DeclinedDialog.openDialog(a)},handleDeclinedData(t){this.declinedData=t},handledTimelineData(t){this.timelineData={...t[0]}},print(){this.remarksData.length>0?(this.$store.dispatch("diplayRemarks","equipment"),this.$refs.PrintDialog.openDialog()):alert("Kindly ensure that you submit the report before proceeding to print.")},printPdf(){this.$refs.EquipmentPrint.printEquipment(this.dataDownload)},extractExcel(){this.$refs.ExtractionExcel.exportExcel()},remarks(t){let e;return e="primary"==t.info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",e},updateRemarks(t){this.editing=!1,this.editIndex=null;const e=event.target.innerText;let a={id:t.id,remarks:e};this.$store.dispatch("updateRemarks",a)},redConResult(t){if(t)return this.$refs.Details.redCon(Number(t))},redConStyle(t){if(t)return this.$refs.Details.redConStyle(t)},roundUpValue(t){const e=Math.round(100*t)/100;return e.toFixed(2)}},computed:{...(0,T.rn)(["departmentItems","teamItems","psgTable","remarksData","user","loadingPage"]),totalTable(){const t=["MOBILITY","Ground","Sea","Air","FIREPOWER","Individual","Crew Served Weapon","COMMUNICATIONS","MEDICAL","DENTAL","QUARTERMASTER"];return t.map((t=>{const e=this.tableData.find((e=>e.Sub===t||e.Category===t));if(e){const a=e.Category||t,i=e.Sub||t,n=this.tableData.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.Required):0)),0),r=this.tableData.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.Actual):0)),0),s=r>n?100:0!==n?r/n*100:0;return{Category:a,Sub:i,totalRequired:n,totalActual:r,percent:s,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"MOBILITY"==a||"FIREPOWER"==a||"COMMUNICATIONS"==a?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}return{Category:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t?"MOBILITY":"Crew Served Weapon"===t?"FIREPOWER":t,Sub:t,totalRequired:0,totalActual:0,percent:0,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t||"Crew Served Weapon"===t||"COMMUNICATIONS"==t?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}))},totalPrimaryRequired(){return this.tableData.reduce(((t,e)=>t+("primary"===e.Info?Number(e.Required):0)),0)},totalSecondaryRequired(){return this.tableData.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.Required):0)),0)},totalPrimaryActual(){return this.tableData.reduce(((t,e)=>t+("primary"===e.Info?Number(e.Actual):0)),0)},totalSecondaryActual(){return this.tableData.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.Actual):0)),0)},averagePrimary(){let t=0,e=0;for(const a of this.totalTable)if(a.percent&&"primary"==a.info&&"MOBILITY"!=a.Sub&&"FIREPOWER"!=a.Sub){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averageSecondary(){let t=0,e=0;for(const a of this.totalTable)if(a.percent&&"secondary"==a.info){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},mee(){return.8*this.averagePrimary},see(){return.2*this.averageSecondary},readinessRating(){return this.mee+this.see},formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},submitted(){return this.tableData.length>0?this.tableData.find((t=>"1"==t.Submit)):0},approved(){return this.tableData.length>0?this.tableData.find((t=>t.Status)):0},disableSubmit(){if(this.team){let t="D01"==this.user.main?this.user.office:this.user.unit;return t==this.team&&0==this.approved.Status}return!1},disableApproved(){return!["T01","T02","T03"].includes(this.user.office)||1!=this.approved.Status},unitName(){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t},yearItems(){const t=[],e=A()().year(),a=e+5;for(let i=2020;i<=a;i++)t.push(i);return t},reasonDetails(){let t={table:"equipment",month:this.generateDate,unit:this.team};return t},dataDownload(){let t={tableData:this.tableData,totalTable:this.totalTable,teamName:this.unitName,month:this.formattedDate,totalPrimaryRequired:this.totalPrimaryRequired,totalSecondaryRequired:this.totalSecondaryRequired,totalPrimaryActual:this.totalPrimaryActual,totalSecondaryActual:this.totalSecondaryActual,averagePrimary:this.averagePrimary,averageSecondary:this.averageSecondary,mee:this.mee,see:this.see,readinessRating:this.readinessRating,remarksData:this.remarksData,assesment:!!(this.$store.state.remarksData&&this.$store.state.remarksData.length>0),status:this.approved.Status,sign:this.timelineData};return t}},created(){this.$store.state.user.rights||(this.$store.state.departmentData=this.$store.state.user.main,this.$store.dispatch("getTeam"))},mounted(){this.$store.dispatch("getDepartment"),this.department=this.user.main,this.$store.state.departmentData=this.department,this.user.rights?this.team=null:"D01"==this.user.main?this.team=this.user.office:this.team=this.user.unit},watch:{department(t){t&&(this.$store.state.departmentData=t,this.$store.dispatch("getTeam"))},declinedData(t){t&&this.generate()}}},Pa=Za,Ma=(0,Z.Z)(Pa,ya,Da,!1,null,null,null),Ua=Ma.exports,qa=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Maintenance Readiness")])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.equipment_tab,callback:function(e){t.equipment_tab=e},expression:"equipment_tab"}},[e(qt.Z,{attrs:{href:"#equip"},on:{click:function(e){return t.equip("equip")}}},[t._v("MAINTENANCE")]),t.tableData.length>0?e(qt.Z,{attrs:{href:"#read"},on:{click:function(e){return t.read("read")}}},[t._v("REPORT READINESS")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.equipment_tab,callback:function(e){t.equipment_tab=e},expression:"equipment_tab"}},[e($t.Z,{attrs:{value:"equip"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e(Et.Z,[e("br"),e(F.Z,[!("1"==t.user.rights||["4","3"].includes(t.user.res)&&"D01"==t.user.main)?t._e():e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-top":"-30px"},attrs:{label:"Unit",dense:"",outlined:"",items:t.departmentItems,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),"1"!=t.user.rights&&!["4","3"].includes(t.user.res)?t._e():e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"Sub-Unit",dense:"",outlined:"",items:t.teamItems,"item-text":"UnitTeamName","item-value":"UnitTeamCode"},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate||t.generateDate>t.monthnow},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")]),e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:!(0!=t.tableData.length&&t.approved.StatusM&&(t.approved.StatusM||!["1","2"].includes(t.user.approver)))},on:{click:function(e){return t.print()}}},[t._v("PRINT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.StatusM&&2==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.StatusM&&3==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.StatusM&&4==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.StatusM&&5==t.user.approver&&t.disableApproved)},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:1==this.user.approver,expression:"this.user.approver == 1"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||!t.disableSubmit},on:{click:function(e){return t.submitData(t.generateDate,t.team)}}},[t._v("SUBMIT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.StatusM},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"2")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.StatusM},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"3")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.StatusM},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"4")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],attrs:{color:"success",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.StatusM&&t.disableApproved)},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"5")}}},[t._v("APPROVED")]),t._v(" "),t.tableData.length>0?e("div",[e("br"),e("hr"),e("center",[e("StatusTimeline",{ref:"StatusTimeline",attrs:{month:t.generateDate,department:t.department,team:t.team,table:"maintenance"},on:{fromTimeline:t.handledTimelineData}})],1)],1):t._e()],1)],1)],1)],1)],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"12",xl:"12",md:"12",lg:"12"}},[e("DeclinedCard",{ref:"DeclinedCard",attrs:{details:t.reasonDetails}})],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"90vh"}},[e("thead",[e("tr",[e("th",{attrs:{rowspan:"2"}},[t._v("Description")]),e("th",{attrs:{rowspan:"2"}},[t._v("Required")]),e("th",{attrs:{rowspan:"2"}},[t._v("Onhand")]),e("th",{attrs:{colspan:"3"}},[t._v("Serviceable")])]),e("tr",[e("th",{staticStyle:{"background-color":"green !important"},attrs:{width:"10%"}},[t._v("OPL")]),e("th",{staticStyle:{"background-color":"lightyellow !important",color:"black !important"},attrs:{width:"10%"}},[t._v("For RPR")]),e("th",{staticStyle:{"background-color":"red !important"},attrs:{width:"10%"}},[t._v("For TI/BER")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{directives:[{name:"show",rawName:"v-show",value:0!=t.equipmentStatus.Status,expression:"equipmentStatus.Status != 0"}],key:i},[e("tr",[e("td",{style:a.Title?"font-weight:bold;text-align:left !important;":"text-align:left !important;",attrs:{colspan:a.Required?"1":"6"}},[t._v(" "+t._s(a.Detail)+" ")]),a.Required?e("td",[t._v(t._s(a.Required))]):t._e(),a.Required?e("td",[t._v(t._s(a.Actual))]):t._e(),a.Required?e("td",[t._v(t._s(a.ActualM))]):t._e(),e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:n}){return[a.Required?e("td",t._g({class:"1"!=a.ApprovedM&&a.Required?"background":"",on:{dblclick:function(e){t.editRepair=!0,t.editIndex=i}}},{...n}),[t.editRepair&&t.editIndex===i&&"0"==a.StatusM?[e("input",{directives:[{name:"model",rawName:"v-model",value:a.Repair,expression:"item.Repair"}],staticClass:"editable",attrs:{type:"number"},domProps:{value:a.Repair},on:{blur:function(e){return t.updateDetail(a,"Repair")},input:function(e){e.target.composing||t.$set(a,"Repair",e.target.value)}}})]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Repair?a.Repair:""))])]],2):t._e()]}}],null,!0)},[e("span",[t._v("Double click to edit")])]),e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:n}){return[a.Required?e("td",t._g({class:"0"==a.StatusM&&a.Required?"background":"",on:{dblclick:function(e){t.editDispose=!0,t.editIndex=i}}},{...n}),[t.editDispose&&t.editIndex===i&&"0"==a.StatusM?[e("input",{directives:[{name:"model",rawName:"v-model",value:a.Dispose,expression:"item.Dispose"}],staticClass:"editable",attrs:{type:"number"},domProps:{value:a.Dispose},on:{blur:function(e){return t.updateDetail(a,"Dispose")},input:function(e){e.target.composing||t.$set(a,"Dispose",e.target.value)}}})]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Dispose?a.Dispose:""))])]],2):t._e()]}}],null,!0)},[e("span",[t._v("Double click to edit")])])],1)])}))],2)],1)],1)],1)],1),e($t.Z,{attrs:{value:"read"}},[e(Et.Z,[e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e("center",[e("h2",[t._v("MAINTENANCE READINESS RATING")])]),e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th"),e("th"),e("th",[t._v("ONHAND")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("%")])])]),t._l(t.totalTable,(function(a,i){return e("tbody",{key:i},[a.Category==a.Sub?e("tr",[e("td",[t._v(t._s(a.Category))])]):t._e(),a.title?t._e():e("tr",[e("td"),e("td",[t._v(t._s("primary"==a.info?a.Sub:""))]),e("td",[t._v(t._s(a.totalRequired))]),e("td",[t._v(t._s(a.totalActual))]),e("td",[t._v(t._s(a.percent.toFixed(2)+"%"))])]),a.break?[e("tr",[e("td",{staticClass:"content"}),e("td",{staticClass:"content"},[t._v("Total")]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.totalPrimaryRequired:t.totalSecondaryRequired))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.totalPrimaryActual:t.totalSecondaryActual))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.averagePrimary:t.averageSecondary)+"%")])]),e("tr",[e("td",{staticClass:"content"}),e("td",{staticClass:"content",attrs:{colspan:"3"}},[t._v(t._s(t.remarks(a)))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.info?t.mee.toFixed(2)+"%":t.see.toFixed(2)+"%"))])])]:t._e(),t.totalTable[i+1]?t._e():[e("tr",[e("td",{staticClass:"content",attrs:{colspan:"4"}},[t._v("MEE + SEE")]),e("td",{staticClass:"readiness"},[t._v(t._s(t.readinessRating.toFixed(2)+"%"))])]),e("tr",[e("td",{class:t.redConStyle(t.redConResult(t.readinessRating)),attrs:{colspan:"5"}},[t._v(t._s(t.redConResult(t.readinessRating)))])])]],2)}))],2)],1)],1)],1),e(c.Z),e("br"),e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e(Zt.Z,{attrs:{value:t.loadingPage}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("LOADING")])],1),e("MaintenancePrint",{ref:"MaintenancePrint"}),e("SubmitDialog",{ref:"SubmitDialog",attrs:{getMaintenance:t.generate}}),e("PrintDialog",{ref:"PrintDialog",attrs:{printPdf:t.printPdf,printExcel:t.extractExcel}}),e("ExtractionExcel",{ref:"ExtractionExcel",attrs:{excelData:t.dataDownload}}),e("Details",{ref:"Details"}),e("DeclinedDialog",{ref:"DeclinedDialog",on:{"data-to-parent":t.handleDeclinedData}})],1)},$a=[],Oa=function(){var t=this,e=t._self._c;return e("div")},La=[];Qt().vfs=jt.I.vfs;var za={data(){return{imageDataUrl:""}},methods:{async printEquipment(t){Promise.all([this.table(t),this.readiness(t)]).then((function(){alert("Files are printed!")}))},redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e},async table(t){let e=[];const a=["Description","Required","Onhand","OPL","For RPR","TI/BER"];t.tableData.forEach((t=>{let a=[{text:t.Detail||"",alignment:"left",fontSize:t.Detail&&t.Detail.length>20?8:10},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10},{text:t.ActualM||"",alignment:"center",fontSize:10},{text:t.Repair||"",alignment:"center",fontSize:10},{text:t.Dispose||"",alignment:"center",fontSize:10}];e.push(a)}));const i={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},n={fontSize:8,noWrap:!0},r={width:"100%",content:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"MAINTENANCE",alignment:"center",fontSize:13,margin:[0,0,0,2]},{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]},{table:{headerRows:1,widths:["50%","10%","10%","10%","10%","10%"],body:[a.map((t=>({text:t,style:"tableHeader"}))),...e]}}],pageOrientation:"portait",styles:{tableHeader:i,tableBody:n},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(r).download("MAINTENANCE.pdf")},async readiness(t){const e=t=>{const e=Math.round(100*t)/100;return e.toFixed(2)},a=(t,a)=>{let i=a/t*100;return i?e(i):0};let i=[];t.assesment&&t.remarksData.forEach((t=>{if(t.Question){let e=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];i.push(e)}if(t.Remarks){let e=[{text:t.Remarks||"",alignment:"left",fontSize:10}];i.push(e)}}));let n={content:[{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:50,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:"MAINTENANCE READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{text:"\n"},{table:{headerRows:1,widths:["*","*","10%","10%","10%"],body:[[{text:"",style:"tableHeader"},{text:"",style:"tableHeader"},{text:"ONHAND",style:"tableHeader"},{text:"ACTUAL",style:"tableHeader"},{text:"%",style:"tableHeader"}],...t.totalTable.flatMap(((e,a)=>{const i=[];return e.Category==e.Sub&&i.push([{text:e.Category,colSpan:3,style:"groupDivision"},{},{},{},{}]),e.title||i.push([{},{text:"primary"==e.info?e.Sub:"",style:"body"},{text:e.totalRequired,style:"body"},{text:e.totalActual,style:"body"},{text:e.percent.toFixed(2)+"%",style:"body"}]),e.break&&(i.push([{text:"",style:"total"},{text:"TOTAL",style:"total"},{text:"primary"==e.info?t.totalPrimaryRequired:t.totalSecondaryRequired,style:"total"},{text:"primary"==e.info?t.totalPrimaryActual:t.totalSecondaryActual,style:"total"},{text:"primary"==e.info?t.averagePrimary+"%":t.averageSecondary+"%",style:"total"}]),i.push([{text:"",style:"subTotal"},{text:"primary"==e.info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",style:"subTotal",colSpan:3},{},{},{text:"primary"==e.info?t.mee.toFixed(2)+"%":t.see.toFixed(2)+"%",style:"subTotal"}])),t.totalTable[a+1]||i.push([{text:"MEE + SEE",style:"total",colSpan:4},{},{},{},{text:t.readinessRating.toFixed(2)+"%",style:"total"}],[{text:this.redCon(t.readinessRating),style:this.redConStyle(this.redCon(t.readinessRating)),colSpan:5,alignment:"center"},{},{},{},{}]),i}))]}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:i}},{},{margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.PreparedBy,alignment:"center",fontSize:t.sign.PreparedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.NotedBy,alignment:"center",fontSize:t.sign.NotedBy&&t.sign.NotedBy.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.ApprovedBy,alignment:"center",fontSize:t.sign.ApprovedBy&&t.sign.ApprovedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]}],functions:{roundUpValue:e,itemPercentage:a},styles:{tableHeader:{fontSize:10,bold:!0,fillColor:"lightgray",alignment:"center"},total:{fontSize:10,bold:!0,alignment:"center"},groupDivision:{bold:!0,fontSize:10,alignment:"left"},body:{fontSize:8,alignment:"center"},subTotal:{bold:!0,fontSize:10,fillColor:"lightgray",alignment:"center"},redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}}};Qt().createPdf(n).download("MRR.pdf")}},computed:{},mounted(){let t=a(8719)(`./${this.$store.state.user.main}.png`);const e=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};e(t,(t=>{this.imageDataUrl=t}))}},Fa=za,Ba=(0,Z.Z)(Fa,Oa,La,!1,null,"09a137d4",null),Ya=Ba.exports,Ga=function(){var t=this,e=t._self._c;return e("div")},Qa=[],ja={props:["excelData"],data(){return{}},methods:{exportExcel(){Promise.all([this.exportTable(),this.exportReadinnes()])},async exportTable(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["Description","Required","Onhand","OPL","For RPR","For TI/BER"],n=a.addRow(i);n.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const r=["Detail","Required","Actual","ActualM","Repair","Dispose"];t.tableData.forEach((t=>{const e=r.map((e=>t[e]||""));let i=a.addRow(e);"1"===t.Title&&i.eachCell((t=>{t.font={bold:!0}}));const n=r.indexOf("Required"),s=r.indexOf("Actual");t.Required&&-1!==n&&(i.getCell(n+1).alignment={horizontal:"center"}),t.Actual&&-1!==s&&(i.getCell(s+1).alignment={horizontal:"center"})})),a.columns.forEach(((t,e)=>{0==e&&(t.width=70)})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const s=await e.xlsx.writeBuffer(),l=new Blob([s],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),o=window.URL.createObjectURL(l),d=document.createElement("a");d.href=o,d.download=`${this.excelData.teamName}-${this.excelData.month}-Maintenance List.xlsx`,d.click(),window.URL.revokeObjectURL(o)},async exportReadinnes(){const t=new(Se().Workbook),e=t.addWorksheet("Sheet1"),a=["","","TE","ACTUAL","%"],i=e.addRow(a);i.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const n=["Category","Sub","Required","Actual","Percent"];this.readinessData.forEach((t=>{const a=n.map((e=>t[e]||""));let i=e.addRow(a);const r=n.indexOf("Required"),s=n.indexOf("Actual"),l=n.indexOf("Percent");t.Required&&-1!==r&&(i.getCell(r+1).alignment={horizontal:"center"}),t.Actual&&-1!==s&&(i.getCell(s+1).alignment={horizontal:"center"}),t.Percent&&-1!==l&&(i.getCell(l+1).alignment={horizontal:"center"})})),e.columns.forEach(((t,e)=>{0!=e&&1!=e||(t.width=40)})),e.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const r=await t.xlsx.writeBuffer(),s=new Blob([r],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),l=window.URL.createObjectURL(s),o=document.createElement("a");o.href=l,o.download=`${this.excelData.teamName}-${this.excelData.month}-Maintenance Readiness Report.xlsx`,o.click(),window.URL.revokeObjectURL(l)}},computed:{readinessData(){let t=[];return this.excelData.totalTable.forEach(((e,a)=>{let i={Title:null,Category:null,Sub:null,Required:null,Actual:null,Percent:null,Total:null,Primary:null,Secondary:null};if(e.Category==e.Sub&&(i.Title=1,i.Category=e.Category,i.Required="MOBILITY"!=e.Category&&"FIREPOWER"!=e.Category?e.totalRequired:"",i.Actual="MOBILITY"!=e.Category&&"FIREPOWER"!=e.Category?e.totalActual:"",i.Percent=e.percent&&"MOBILITY"!=e.Category&&"FIREPOWER"!=e.Category?e.percent.toFixed(2)+"%":""),e.Category!=e.Sub&&(i.Sub=e.Sub,i.Required=e.totalRequired,i.Actual=e.totalActual,i.Percent=e.percent?e.percent.toFixed(2)+"%":""),t.push(i),e.break){let a={Title:2,Category:"",Sub:"TOTAL",Required:"primary"==e.info?this.excelData.totalPrimaryRequired:this.excelData.totalSecondaryRequired,Actual:"primary"==e.info?this.excelData.totalPrimaryActual:this.excelData.totalSecondaryActual,Percent:"primary"==e.info?this.excelData.averagePrimary+"%":this.excelData.averageSecondary+"%"};t.push(a)}if(e.break&&a+1){let a={Title:3,Category:"",Sub:"primary"==e.info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",Required:"",Actual:"",Percent:"primary"==e.info?this.excelData.mee.toFixed(2)+"%":this.excelData.see.toFixed(2)+"%"};t.push(a)}if(!this.excelData.totalTable[a+1]){let e={Title:3,Category:"",Sub:"MEE +SE",Required:"",Actual:"",Percent:Number(this.excelData.mee.toFixed(2))+Number(this.excelData.see.toFixed(2))+"%"};t.push(e)}})),t}}},Ha=ja,Va=(0,Z.Z)(Ha,Ga,Qa,!1,null,"070bdbb8",null),Wa=Va.exports,Ka={name:"MaintenanceComponent",components:{MaintenancePrint:Ya,SubmitDialog:ze,Details:ie,DeclinedDialog:De,DeclinedCard:ue,ExtractionExcel:Wa,PrintDialog:Me,StatusTimeline:Ve},data:()=>({equipment_tab:"equip",tableData:[],department:null,editing:!1,editRepair:!1,editDispose:!1,editIndex:null,generateMonthDialog:!1,generateDate:null,id:null,team:null,year:A()().year(),rules:{required:[t=>!!t||"Field is required"],existing:[t=>"1"!==t||"Value '1' is not accepted"]},snackbar:{show:!1,message:null,color:null,icon:null},timeout:1500,monthnow:A()().format("YYYY-MM"),declinedData:!1,updateDetailStatus:!1,timelineData:{}}),methods:{async callGetTimeline(){this.$refs.StatusTimeline?await this.$refs.StatusTimeline.getTimeline():console.error("StatusTimeline ref not available yet.")},generate(){this.$store.state.loadingPage=!0,k()({method:"post",url:`${this.$baseUrl}api/getMaintenance`,data:{Team:this.team,Month:this.generateDate}}).then((async t=>{t.data.length>0?(this.tableData=t.data,this.$store.state.teamData=this.team,this.$store.state.monthData=this.generateDate,0==this.updateDetailStatus&&(this.$store.dispatch("diplayRemarks","maintenance"),this.$refs.DeclinedCard.getReason(),await this.callGetTimeline()),0==this.equipmentStatus.Status&&alert("Table display when Equipment Report was submit!"),this.$store.state.loadingPage=!1):(alert("No Equipment Readiness Report for this month!"),this.$store.state.loadingPage=!1)}))},equip(t){this.equipment_tab=t},read(t){this.equipment_tab=t,this.$store.dispatch("diplayRemarks","maintenance")},updateDetail(t,e){let a=Number(t.Repair)+Number(t.Dispose),i=t.Actual-a;i>=0?(this.updateDetailStatus=!0,k()({method:"post",url:`${this.$baseUrl}api/updateDetailMaintenance`,data:{id:t.id,val:"Repair"==e?t.Repair:t.Dispose,col:e,actual:i,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((t=>{200==t.status?this.generate():alert("Error:Please reinput actual")}))):(alert("Error: Cannot input a negative value for Operational"),this.editRepair=!1,this.editDispose=!1,this.generate())},submitData(t,e){const a=window.confirm("Are you sure you want to submit this report?");a&&(this.$store.dispatch("diplayRemarks","maintenance"),this.$store.dispatch("getQuestion","Equipment"),this.$refs.SubmitDialog.openDialog(t,e,"maintenance"))},approvedData(t,e,a){const i=window.confirm("Are you sure you want to approved this report?");if(i){let i={month:t,team:e,table:"maintenance",name:this.$store.state.user.name,url:this.$baseUrl,status:a};return Promise.all([re()(i),this.generate()])}},declined(t,e){let a={month:t,title:`Reason for the Decline in the Reporting Month of ${this.formattedDate}`,team:e,table:"maintenance",name:this.$store.state.user.name,url:this.$baseUrl,today:A()().format("YYYY-MM-DD HH:mm:ss")};this.$refs.DeclinedDialog.openDialog(a)},handleDeclinedData(t){this.declinedData=t},async print(){this.remarksData.length>0?(this.$store.dispatch("diplayRemarks","maintenance"),this.$refs.PrintDialog.openDialog()):alert("Kindly ensure that you submit the report before proceeding to print.")},printPdf(){this.$refs.MaintenancePrint.printEquipment(this.dataDownload)},extractExcel(){this.$refs.ExtractionExcel.exportExcel()},remarks(t){let e;return e="primary"==t.info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",e},handledTimelineData(t){this.timelineData={...t[0]}},updateRemarks(t){this.editing=!1,this.editIndex=null;const e=event.target.innerText;let a={id:t.id,remarks:e};this.$store.dispatch("updateRemarks",a)},redConResult(t){if(t)return this.$refs.Details.redCon(Number(t))},redConStyle(t){if(t)return this.$refs.Details.redConStyle(t)},roundUpValue(t){const e=Math.round(100*t)/100;return e.toFixed(2)}},computed:{...(0,T.rn)(["departmentItems","teamItems","psgTable","remarksData","user","loadingPage"]),totalTable(){const t=["MOBILITY","Ground","Sea","Air","FIREPOWER","Individual","Crew Served Weapon","COMMUNICATIONS","MEDICAL","DENTAL","QUARTERMASTER"];return t.map((t=>{const e=this.tableData.find((e=>e.Sub===t||e.Category===t));if(e){const a=e.Category||t,i=e.Sub||t,n=this.tableData.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.Actual):0)),0),r=this.tableData.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.ActualM):0)),0),s=0!==n?r/n*100:0;return{Category:a,Sub:i,totalRequired:n,totalActual:r,percent:s,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"MOBILITY"==a||"FIREPOWER"==a||"COMMUNICATIONS"==a?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}return{Category:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t?"MOBILITY":"Crew Served Weapon"===t?"FIREPOWER":t,Sub:t,totalRequired:0,totalActual:0,percent:0,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t||"Crew Served Weapon"===t||"COMMUNICATIONS"==t?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}))},totalPrimaryRequired(){return this.tableData.reduce(((t,e)=>t+("primary"===e.Info?Number(e.Actual):0)),0)},totalSecondaryRequired(){return this.tableData.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.Actual):0)),0)},totalPrimaryActual(){return this.tableData.reduce(((t,e)=>t+("primary"===e.Info?Number(e.ActualM):0)),0)},totalSecondaryActual(){return this.tableData.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.ActualM):0)),0)},averagePrimary(){let t=0,e=0;for(const a of this.totalTable)if(a.percent&&"primary"==a.info&&"MOBILITY"!=a.Sub&&"FIREPOWER"!=a.Sub){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averageSecondary(){let t=0,e=0;for(const a of this.totalTable)if(a.percent&&"secondary"==a.info){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},mee(){return.8*this.averagePrimary},see(){return.2*this.averageSecondary},readinessRating(){return this.mee+this.see},formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},submitted(){return this.tableData.length>0?this.tableData.find((t=>"1"==t.SubmitM)):0},approved(){return this.tableData.length>0?this.tableData.find((t=>t.StatusM)):0},disableSubmit(){if(this.team){let t="D01"==this.user.main?this.user.office:this.user.unit;return t==this.team&&0==this.approved.StatusM&&0!=this.equipmentStatus.Status}return!1},disableApproved(){return!["T01","T02","T03"].includes(this.user.office)||1!=this.approved.StatusM},equipmentStatus(){return this.tableData.length>0?this.tableData.find((t=>t.Status)):0},unitName(){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t},yearItems(){const t=[],e=A()().year(),a=e+5;for(let i=2020;i<=a;i++)t.push(i);return t},reasonDetails(){let t={table:"maintenance",month:this.generateDate,unit:this.team};return t},dataDownload(){let t={tableData:this.tableData,totalTable:this.totalTable,teamName:this.unitName,month:this.formattedDate,totalPrimaryRequired:this.totalPrimaryRequired,totalSecondaryRequired:this.totalSecondaryRequired,totalPrimaryActual:this.totalPrimaryActual,totalSecondaryActual:this.totalSecondaryActual,averagePrimary:this.averagePrimary,averageSecondary:this.averageSecondary,mee:this.mee,see:this.see,readinessRating:this.readinessRating,remarksData:this.remarksData,assesment:this.$store.state.remarksData.length>0,status:this.approved.StatusM,sign:this.timelineData};return t}},created(){this.$store.state.user.rights||(this.$store.state.departmentData=this.$store.state.user.main,this.$store.dispatch("getTeam"))},mounted(){this.$store.dispatch("getDepartment"),this.department=this.user.main,this.$store.state.departmentData=this.department,this.user.rights?this.team=null:"D01"==this.user.main?this.team=this.user.office:this.team=this.user.unit},watch:{department(t){t&&(this.$store.state.departmentData=t,this.$store.dispatch("getTeam"))},declinedData(t){t&&this.generate()}}},Ja=Ka,Xa=(0,Z.Z)(Ja,qa,$a,!1,null,null,null),ti=Xa.exports,ei=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Facility Readiness")])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.facility_tab,callback:function(e){t.facility_tab=e},expression:"facility_tab"}},[e(qt.Z,{attrs:{href:"#fillup"},on:{click:function(e){return t.fillup("fillup")}}},[t._v("FACILITY FILL-UP")]),e(qt.Z,{attrs:{href:"#raiting"},on:{click:function(e){return t.raiting("raiting")}}},[t._v("FACILITY RATING")]),t.tableData.length>0?e(qt.Z,{attrs:{href:"#read"},on:{click:function(e){return t.read("read")}}},[t._v("REPORT READINESS")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.facility_tab,callback:function(e){t.facility_tab=e},expression:"facility_tab"}},[e($t.Z,{attrs:{value:"fillup"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e(Et.Z,[e("br"),e(F.Z,[!("1"==t.user.rights||["4","3"].includes(t.user.res)&&"D01"==t.user.main)?t._e():e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-top":"-30px"},attrs:{label:"Unit",dense:"",outlined:"",items:t.departmentItems,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),"1"!=t.user.rights&&!["4","3"].includes(t.user.res)?t._e():e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"Sub-Unit",dense:"",outlined:"",items:t.teamItems,"item-text":"UnitTeamName","item-value":"UnitTeamCode"},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}})],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate||t.generateDate>t.monthnow},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")]),e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:!(0!=t.tableData.length&&(t.approved.Status||!["1","2"].includes(t.user.approver)))},on:{click:function(e){return t.print()}}},[t._v("PRINT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status&&2==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status&&3==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status&&4==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&5==t.user.approver&&t.disableApproved)},on:{click:function(e){return t.declined(t.generateDate,t.team,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:1==this.user.approver,expression:"this.user.approver == 1"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||!t.disableSubmit},on:{click:function(e){return t.submitData(t.generateDate,t.team)}}},[t._v("SUBMIT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||1!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"2")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||2!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"3")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.tableData.length||3!=t.approved.Status},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"4")}}},[t._v("CONCURRENCE")]),t._v(" "),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],attrs:{color:"success",medium:"",block:"",disabled:!!(0==t.tableData.length||4!=t.approved.Status&&t.disableApproved)},on:{click:function(e){return t.approvedData(t.generateDate,t.team,"5")}}},[t._v("APPROVED")]),t._v(" "),t.tableData.length>0?e("div",[e("br"),e("hr"),e("center",[e("StatusTimeline",{ref:"StatusTimeline",attrs:{month:t.generateDate,department:t.department,team:t.team,table:"facility"},on:{fromTimeline:t.handledTimelineData}})],1)],1):t._e()],1)],1)],1)],1)],1)],1),e(F.Z,[e(z.Z,{attrs:{cols:"12",xl:"12",md:"12",lg:"12"}},[e("DeclinedCard",{ref:"DeclinedCard",attrs:{details:t.reasonDetails}})],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"90vh"}},[e("thead",[e("tr",[e("th",{attrs:{width:"20%"}},[t._v("Description")]),e("th",[t._v("Required")]),e("th",[t._v("Actual")]),e("th",[t._v("Physical"),e("br"),t._v("Apperance")]),e("th",[t._v("Safety")]),e("th",[t._v("Functionality"),e("br"),t._v("Sanitation")]),e("th",[t._v("Building Plans"),e("br"),t._v("Documents")]),e("th",[t._v("Update")])])]),t._l(t.facilityTable,(function(a,i){return e("tbody",{directives:[{name:"show",rawName:"v-show",value:0!=t.approved.Status&&1!=t.user.approver||1==t.user.approver,expression:"approved.Status != 0 && user.approver != 1 || user.approver == 1"}],key:i},[e("tr",[e("td",{style:a.Title?"font-weight:bold;text-align:left !important;":"text-align:left !important;",attrs:{colspan:a.Title?"10":"1"}},[t._v(" "+t._s(1==a.Title?a.Detail.toUpperCase():a.Detail)+" ")]),a.Title?t._e():e("td",[t._v(t._s(a.Required))]),e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:n}){return[a.Title?t._e():e("td",t._g({style:0==t.approved.Status&&a.Required?"background-color:lightyellow;":"",on:{dblclick:function(e){t.editActual=!0,t.editIndex=i}}},{...n}),[t.editActual&&t.editIndex===i&&"0"==a.Status&&a.Required?[e("input",{directives:[{name:"model",rawName:"v-model",value:a.Actual,expression:"item.Actual"}],staticStyle:{"text-align":"center !important"},attrs:{type:"number"},domProps:{value:a.Actual},on:{blur:function(e){return t.updateRating(a)},input:function(e){e.target.composing||t.$set(a,"Actual",e.target.value)}}})]:[e("div",{staticStyle:{"white-space":"pre-wrap","text-align":"center !important"}},[t._v(t._s(a.Actual?a.Actual:""))])]],2)]}}],null,!0)},[e("span",[t._v("Double click to edit")])]),a.Title?t._e():e("td",[t._v(t._s(a.PA?a.PA+"%":""))]),a.Title?t._e():e("td",[t._v(t._s(a.SA?a.SA+"%":""))]),a.Title?t._e():e("td",[t._v(t._s(a.HS?a.HS+"%":""))]),a.Title?t._e():e("td",[t._v(t._s(a.BP?a.BP+"%":""))]),!a.Title&&a.Required?e("td",[e(_.Z,{attrs:{bottom:"",transition:"slide-x-reverse-transition"},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(l.Z,t._g({attrs:{icon:""},on:{click:function(e){return t.openDialog(a)}}},{...i}),[t.approved?e(h.Z,{attrs:{color:"success"}},[t._v("mdi-eye")]):e(h.Z,{attrs:{color:"warning"}},[t._v("mdi-table-edit")])],1)]}}],null,!0)},[e("span",[t._v("Click to open updating details")])])],1):t._e()],1)])}))],2)],1)],1)],1)],1),e($t.Z,{attrs:{value:"raiting"}},[e(Et.Z,[e("center",[e("h2",[t._v("FACILITY RATING")])]),e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"90vh"}},[e("thead",[e("tr",[e("th",{attrs:{width:"20%",rowspan:"2"}},[t._v("Facility")]),e("th",{attrs:{colspan:"3"}},[t._v("Quantitative")]),e("th",[t._v("Qualitative")]),e("th",{attrs:{rowspan:"2"}},[t._v("Rating")]),e("th",{attrs:{rowspan:"2"}},[t._v("REDCON")])]),e("tr",[e("th",[t._v("Required")]),e("th",[t._v("Actual")]),e("th",[t._v("Rating")]),e("th",[t._v("Rating")])])]),e("tbody",[t._l(t.facilityTable,(function(a,i){return[e("tr",{key:"main"+i},[e("td",{style:a.Detail==a.Info?"font-weight:bold;text-align:left !important;":"text-align:left !important;",attrs:{colspan:"1"==a.Title?"5":"1"}},[t._v(" "+t._s(a.Detail)+" ")]),"1"!=a.Title?[e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))]),e("td",[t._v(t._s(a.Rating?a.Rating.toFixed(2)+"%":""))]),e("td",[t._v(t._s(a.overall?a.overall.toFixed(2)+"%":""))])]:t._e(),a.count>0?e("td",{attrs:{rowspan:a.count>0?a.count:1}},[t._v(" "+t._s(a.facilityRating?a.facilityRating.toFixed(2)+"%":"")+" ")]):t._e(),a.count>0?e("td",{class:t.redConStyle(t.redConResult(a.facilityRating)),staticStyle:{"font-size":"25px !important"},attrs:{rowspan:a.count>0?a.count:1}},[t._v(" "+t._s(a.facilityRating?t.redConResult(a.facilityRating).substr(0,2):"")+" ")]):t._e()],2),[a.count||t.facilityTable[i+1]&&!t.facilityTable[i+1].count?t._e():e("tr",{key:"sub"+i,staticStyle:{"background-color":"lightgray"}},[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"},attrs:{colspan:"3"}},[t._v("Average Rating")]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.ratingQuanPercent?a.ratingQuanPercent.toFixed(2)+"%":""))]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.ratingQualPercent?a.ratingQualPercent.toFixed(2)+"%":""))]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}}),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"},attrs:{colspan:"2"}})])]]}))],2)])],1)],1)],1),e(c.Z),e("br")],1)],1),e($t.Z,{attrs:{value:"read"}},[e(Et.Z,[e("center",[e("h2",[t._v("FACILITY OVERALL READINESS RATING")])]),e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("Category"),e("br"),t._v("(a)")]),e("th",[t._v("Required"),e("br"),t._v("Area"),e("br"),t._v("(b)")]),e("th",[t._v("Actual"),e("br"),t._v("Area"),e("br"),t._v("(c)")]),e("th",[t._v("Quantitative"),e("br"),t._v("(c/d x 100)"),e("br"),t._v("(d)")]),e("th",[t._v("Qualitative"),e("br"),t._v("(e)")]),e("th",[t._v("Total"),e("br"),t._v("(d + e)"),e("br"),t._v("/2")]),e("th",[t._v("Percentage"),e("br"),t._v("(Weighted"),e("br"),t._v("distribution)")])])]),e("tbody",[t._l(t.facilityReport,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))]),e("td",[t._v(t._s(a.Quantitative?a.Quantitative.toFixed(2)+"%":0))]),e("td",[t._v(t._s(a.Qualitative?a.Qualitative.toFixed(2)+"%":0))]),e("td",[t._v(t._s(a.total?a.total.toFixed(2)+"%":0))]),e("td",[t._v(t._s(a.weight?a.weight.toFixed(2)+"%":0))])])})),e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"right !important"},attrs:{colspan:"6"}},[t._v("TOTAL")]),e("td",{staticStyle:{"font-weight":"bold"},attrs:{colspan:"2"}},[t._v(t._s(t.readiness.toFixed(2)+"%"))])]),e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"right !important"},attrs:{colspan:"6"}},[t._v("REDCON STATUS")]),e("td",{class:t.redConStyle(t.redConResult(t.readiness))},[t._v(t._s(t.redConResult(t.readiness)))])])],2)])],1)],1)],1),e(c.Z),e("br"),e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e(yt.Z,{attrs:{persistent:"",width:"70%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(t._s(t.dialogTitle)+" "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.dialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e(d.ZB,[e("br"),e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"70vh"}},[e("thead",[e("tr",[e("th",{attrs:{width:"40%"}},[t._v("Facility")]),e("th",{attrs:{width:"10%"}},[t._v("Percentage")]),e("th",{attrs:{width:"30%"}},[t._v("Parameter")]),e("th",{attrs:{width:"20%"}},[t._v("Rating")])])]),e("tbody",t._l(t.dialogTable,(function(a,i){return e("tr",{key:i},[e("td",{style:a.Code&&!a.percent?"font-weight:bold;text-align:left !important;":"text-align:left !important;white-space: pre-wrap;",attrs:{colspan:a.percent||a.Code?!a.percent&&a.Code?"3":"1":"4"}},[t._v(t._s(a.Detail)+" ")]),a.percent?e("td",[t._v(t._s(a.percent?a.percent+"%":""))]):t._e(),a.percent?e("td",[e(vt.Z,{staticClass:"custom-autocomplete",attrs:{readonly:0!=t.approved.Status,clearable:0==t.approved.Status,dense:"",outlined:"",items:t.parameter,"item-text":"text","item-value":"value"},on:{change:function(e){return t.parameterChange(a)}},model:{value:a.parameter,callback:function(e){t.$set(a,"parameter",e)},expression:"item.parameter"}})],1):t._e(),a.percent?e("td",[t._v(t._s(a.rating?a.rating+"%":""))]):t._e()])})),0)])],1),e(d.h7,[e(l.Z,{attrs:{color:"success",block:"",large:"",disabled:0!=t.approved.Status},on:{click:function(e){return t.updateDialog()}}},[t._v("UPDATE")])],1)],1)],1),e(Zt.Z,{attrs:{value:t.loadingPage}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("LOADING")])],1),e("FacilityPrint",{ref:"FacilityPrint"}),e("SubmitDialog",{ref:"SubmitDialog",attrs:{getFacility:t.generate}}),e("Details",{ref:"Details"}),e("DeclinedDialog",{ref:"DeclinedDialog",on:{"data-to-parent":t.handleDeclinedData}}),e("PrintDialog",{ref:"PrintDialog",attrs:{printPdf:t.printPdf,printExcel:t.extractExcel}}),e("ExtractionExcel",{ref:"ExtractionExcel",attrs:{excelData:t.dataDownload}})],1)},ai=[],ii=function(){var t=this,e=t._self._c;return e("div")},ni=[];Qt().vfs=jt.I.vfs;var ri={data(){return{imageDataUrl:""}},methods:{redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e},async print(t){Promise.all([this.rating(t),this.read(t)]).then((function(){alert("Files are printed!")}))},async rating(t){let e=[];t.tableData.forEach(((a,i)=>{const n=[{text:a.Detail,colSpan:a.Title?5:1,fontSize:"1"==a.Title?10:"2"==a.Title?9:8,bold:"1"==a.Title},a.Title?"":{text:a.Required||"",style:"body"},a.Title?"":{text:a.Actual||"",style:"body"},a.Title?"":{text:a.Rating?a.Rating.toFixed(2)+"%":"",style:"body"},a.Title?"":{text:a.overall?a.overall.toFixed(2)+"%":"",style:"body"},a.count>0?{text:a.facilityRating?a.facilityRating.toFixed(2)+"%":"",alignment:"center",margin:[0,a.count>1?5*(a.count-1):0],lineHeight:a.count>1?1.5:1,rowSpan:a.count}:"",a.count>0?{text:a.facilityRating?this.redCon(a.facilityRating):"",rowSpan:a.count,alignment:"center",margin:[0,a.count>1?5*(a.count-1):0],lineHeight:a.count>1?1.5:1,style:this.redConStyle(this.redCon(a.facilityRating))}:""];if(e.push(n),!a.count&&(!t.tableData[i+1]||t.tableData[i+1].count)){const t=[{text:"Average Rating",bold:!0,fontSize:10,colSpan:3},{},{},{text:a.ratingQuanPercent?a.ratingQuanPercent.toFixed(2)+"%":"",bold:!0,fontSize:10},{text:a.ratingQualPercent?a.ratingQualPercent.toFixed(2)+"%":"",bold:!0,fontSize:10},{},{}];e.push(t)}}));const a={content:[{margin:[140,0,0,0],columns:[{image:this.imageDataUrl,width:50,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:"PERSONNEL READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:2,widths:["auto","auto","auto","auto","auto","auto","auto"],body:[[{text:"Facility",style:"tableHeader"},{text:"Quantitative",style:"tableHeader",colSpan:3},{},{},{text:"Qualitative",style:"tableHeader"},{text:"Rating",style:"tableHeader"},{text:"REDCON",style:"tableHeader"}],[{},{text:"Required",style:"tableHeader"},{text:"Actual",style:"tableHeader"},{text:"Rating",style:"tableHeader"},{text:"Rating",style:"tableHeader"},{},{}],...e],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"},margin:[0,0,0,10]}}}],pageOrientation:"portrait",styles:{tableHeader:{bold:!0,alignment:"center",fontSize:10},body:{alignment:"center",fontSize:8,margin:[0,5]},redCon1:{color:"green"},redCon2:{color:"blue"},redCon3:{color:"orange"},redCon4:{color:"red"}},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(a).download("Facility Rating.pdf")},async read(t){let e=[];t.assesment&&t.remarksData.forEach((t=>{if(t.Question){let a=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];e.push(a)}if(t.Remarks){let a=[{text:t.Remarks||"",alignment:"left",fontSize:10}];e.push(a)}}));let a=[];t.report.forEach((t=>{let e=[{text:t.Detail||"",alignment:"center",fontSize:10},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10},{text:t.Quantitative?t.Quantitative.toFixed(2)+"%":"",alignment:"center",fontSize:10},{text:t.Qualitative?t.Qualitative.toFixed(2)+"%":"",alignment:"center",fontSize:10},{text:t.total?t.total.toFixed(2)+"%":"",alignment:"center",fontSize:10},{text:t.weight?t.weight.toFixed(2)+"%":"",alignment:"center",fontSize:10}];a.push(e)}));let i={content:[{margin:[80,0,0,0],columns:[{image:this.imageDataUrl,width:50,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:t.teamName,alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:"FACILITY READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["20%","10%","10%","10%","10%","10%","30%"],body:[[{text:"Category \n (a)",style:"tableHeader"},{text:"Required \n Area \n (b)",style:"tableHeader"},{text:"Actual \n Area \n (c)",style:"tableHeader"},{text:"Quantitative \n (c/d x 100) \n (d)",style:"tableHeader"},{text:"Qualitative \n (e)",style:"tableHeader"},{text:"Total \n (d + e) \n /2",style:"tableHeader"},{text:"Percentage \n (Weighted \n distribution)",style:"tableHeader"}],...a,[{text:"TOTAL",alignment:"right",bold:!0,colSpan:6},{},{},{},{},{},{text:t.readiness.toFixed(2)+"%",bold:!0,alignment:"center"}],[{text:"REDCON STATUS",alignment:"right",bold:!0,colSpan:6},{},{},{},{},{},{text:this.redCon(t.readiness),style:this.redConStyle(this.redCon(t.readiness)),fontSize:10,alignment:"center"}]]}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:e}},{},{margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.PreparedBy,alignment:"center",fontSize:t.sign.PreparedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.NotedBy,alignment:"center",fontSize:t.sign.NotedBy&&t.sign.NotedBy.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.ApprovedBy,alignment:"center",fontSize:t.sign.ApprovedBy&&t.sign.ApprovedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]}],styles:{tableHeader:{fontSize:10,bold:!0,fillColor:"lightgray",alignment:"center"},percent:{alignment:"center",fontSize:10,bold:!0},percentTitle:{alignment:"center",bold:!0,fontSize:10,fillColor:"lightgrey"},redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}}};0===e.length&&i.content.splice(-1),Qt().createPdf(i).download("FRR.pdf")}},computed:{},mounted(){let t=a(8719)(`./${this.$store.state.user.main}.png`);const e=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};e(t,(t=>{this.imageDataUrl=t}))}},si=ri,li=(0,Z.Z)(si,ii,ni,!1,null,"c994c5c0",null),oi=li.exports,di=function(){var t=this,e=t._self._c;return e("div")},ci=[],ui={props:["excelData"],data(){return{}},methods:{exportExcel(){Promise.all([this.exportTable(),this.exportReadinnes()])},async exportTable(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["Facility","Qualitative","","","Quantitative","Rating"],n=["","Required","Actual","Rating","Rating",""],r=[a.addRow(i),a.addRow(n)];a.mergeCells(1,2,1,4),r.forEach((t=>{t.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0},t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const s=["Detail","Required","Actual","Rating","overall","facilityRating"];t.tableData.forEach((t=>{const e=s.map((e=>"facilityRating"!==e&&"Rating"!==e&&"overall"!==e||!t[e]?t[e]||"":parseFloat(t[e]).toFixed(2)+"%"));let i=a.addRow(e);"1"===t.Title&&i.eachCell((t=>{t.font={bold:!0},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"808080"}}})),s.forEach((e=>{const a=s.indexOf(e);if(t[e]&&-1!==a){const t=i.getCell(a+1);"Detail"!==e&&(t.alignment={horizontal:"center"}),"facilityRating"===e&&(t.font={color:{argb:"0000FF"},bold:!0})}}))})),a.columns.forEach(((t,e)=>{0==e&&(t.width=70)})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const l=await e.xlsx.writeBuffer(),o=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),d=window.URL.createObjectURL(o),c=document.createElement("a");c.href=d,c.download=`${this.excelData.teamName}-${this.excelData.month}-Facility List.xlsx`,c.click(),window.URL.revokeObjectURL(d)},async exportReadinnes(){let t=this.excelData;const e=new(Se().Workbook),a=e.addWorksheet("Sheet1"),i=["Category","Required","Actual","Quantitative","Qualitative","Total","Percentage"],n=a.addRow(i);n.eachCell((t=>{t.alignment={horizontal:"center"},t.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FFFF00"}},t.font={bold:!0}}));const r=["Detail","Required","Actual","Quantitative","Qualitative","total","weight"];t.report.forEach((t=>{const e=["Quantitative","Qualitative","total","weight"],i=r.map((a=>e.includes(a)&&t[a]?parseFloat(t[a]).toFixed(2)+"%":t[a]||""));let n=a.addRow(i);n.eachCell((t=>{t.font={bold:!0}})),r.forEach((e=>{const a=r.indexOf(e);if(t[e]&&-1!==a){const t=n.getCell(a+1);"Detail"!==e&&(t.alignment={horizontal:"center"}),"weight"===e&&(t.font={color:{argb:"0000FF"},bold:!0})}}))}));const s=["","","","","","TOTAL",t.readiness.toFixed(2)+"%"],l=a.addRow(s);l.eachCell((t=>{t.alignment={horizontal:"center"},t.font={bold:!0}})),a.columns.forEach(((t,e)=>{t.width=0==e?40:15})),a.eachRow((t=>{t.eachCell((t=>{t.border={top:{style:"thin"},left:{style:"thin"},bottom:{style:"thin"},right:{style:"thin"}}}))}));const o=await e.xlsx.writeBuffer(),d=new Blob([o],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),c=window.URL.createObjectURL(d),u=document.createElement("a");u.href=c,u.download=`${this.excelData.teamName}-${this.excelData.month}-Equipment Readiness Report.xlsx`,u.click(),window.URL.revokeObjectURL(c)}},computed:{}},hi=ui,mi=(0,Z.Z)(hi,di,ci,!1,null,"1d018ad2",null),pi=mi.exports,gi={name:"FacilityComponent",components:{FacilityPrint:oi,SubmitDialog:ze,Details:ie,DeclinedDialog:De,DeclinedCard:ue,ExtractionExcel:pi,PrintDialog:Me,StatusTimeline:Ve},data:()=>({facility_tab:"fillup",tableData:[],department:null,editing:!1,editActual:!1,editRequired:!1,editIndex:null,generateMonthDialog:!1,generateDate:null,id:null,team:null,year:A()().year(),rules:{required:[t=>!!t||"Field is required"],existing:[t=>"1"!==t||"Value '1' is not accepted"]},snackbar:{show:!1,message:null,color:null,icon:null},timeout:1500,monthnow:A()().format("YYYY-MM"),dialogTitle:"",dialogTable:[],dialog:!1,parameter:[{text:"Beyond economical repair/Document are incomplete and not updated",value:1},{text:"Needs major repair/Documents are complete but not updated",value:2},{text:"Needs minor repair/Documents are lacking but the lacking documents are under process",value:3},{text:"Need no repair/Documents are complete",value:4},{text:"Not Applicable",value:"4"}],declinedData:!1,timelineData:{},updateDetailStatus:!1}),methods:{async callGetTimeline(){this.$refs.StatusTimeline?await this.$refs.StatusTimeline.getTimeline():console.error("StatusTimeline ref not available yet.")},generate(){this.$store.state.loadingPage=!0,k()({method:"post",url:`${this.$baseUrl}api/getFacility`,data:{Team:this.team,Month:this.generateDate,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((async t=>{200==t.status&&(this.tableData=t.data,this.$store.state.teamData=this.team,this.$store.state.monthData=this.generateDate,0==this.updateDetailStatus&&(this.$store.dispatch("diplayRemarks","facility"),this.$refs.DeclinedCard.getReason(),await this.callGetTimeline()),this.$store.state.loadingPage=!1,this.updateDetailStatus=!1)}))},fillup(t){this.facility_tab=t},raiting(t){this.facility_tab=t},read(t){this.facility_tab=t,this.$store.dispatch("diplayRemarks","facility")},updateRating(t){t.Actual>t.Required||t.ActualArea>t.RequiredArea?(alert("Error"),this.generate()):(this.updateDetailStatus=!0,k()({method:"post",url:`${this.$baseUrl}api/updateRating`,data:{data:t,rating:t.Actual/t.Required*100}}).then((t=>{200==t.status?this.generate():alert("Error:Reinput value")})))},openDialog(t){this.id=t.id,this.dialogTitle=t.Detail,this.dialogTable=JSON.parse(t.Item),this.dialog=!0},updateDialog(){this.updateDetailStatus=!0;let t={apperance:0,safety:0,sanitation:0,building:0,all:0};for(const e of this.dialogTable)e.Code&&e.Code.includes("PA")&&e.rating&&(t.apperance+=e.rating),e.Code&&e.Code.includes("SA")&&e.rating&&(t.safety+=e.rating),e.Code&&e.Code.includes("HS")&&e.rating&&(t.sanitation+=e.rating),e.Code&&e.Code.includes("BP")&&e.rating&&(t.building+=e.rating),e.Code&&e.rating&&(t.all+=e.rating);k()({method:"post",url:`${this.$baseUrl}api/updateDetail`,data:{id:this.id,data:this.dialogTable,apperance:t.apperance,safety:t.safety,sanitation:t.sanitation,building:t.building,all:t.all,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((t=>{200==t.status?(this.dialog=!1,this.dialogTable=[],this.id=null,this.generate()):alert("Error:Reinput value")}))},parameterChange(t){let e=t.parameter/4*t.percent;t.rating=e},submitData(t,e){const a=window.confirm("Are you sure you want to submit this report?");a&&(this.$store.dispatch("diplayRemarks","facility"),this.$store.dispatch("getQuestion","facility"),this.$refs.SubmitDialog.openDialog(t,e,"facility"))},approvedData(t,e,a){const i=window.confirm("Are you sure you want to approved this report?");if(i){let i={month:t,team:e,table:"facility",name:this.$store.state.user.name,url:this.$baseUrl,status:a};return Promise.all([re()(i),this.generate()])}},declined(t,e){let a={month:t,title:`Reason for the Decline in the Reporting Month of ${this.formattedDate}`,team:e,table:"facility",name:this.$store.state.user.name,url:this.$baseUrl,today:A()().format("YYYY-MM-DD HH:mm:ss")};this.$refs.DeclinedDialog.openDialog(a)},handleDeclinedData(t){this.declinedData=t},handledTimelineData(t){this.timelineData={...t[0]}},print(){this.remarksData.length>0?(this.$store.dispatch("diplayRemarks","facility"),this.$refs.PrintDialog.openDialog()):alert("Kindly ensure that you submit the report before proceeding to print.")},printPdf(){this.$refs.FacilityPrint.print(this.dataDownload)},extractExcel(){this.$refs.ExtractionExcel.exportExcel()},redConResult(t){if(t)return this.$refs.Details.redCon(Number(t))},redConStyle(t){if(t)return this.$refs.Details.redConStyle(t)}},computed:{...(0,T.rn)(["departmentItems","teamItems","psgTable","remarksData","user","loadingPage"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},facilityTable(){return this.tableData.reduce(((t,e)=>{let a=t.findIndex((t=>t.Info==e.Info));if(-1==a){let a={...e};a.count=1,a.countQuanRating=0,a.countQualRating=0,a.quanRating=e.Rating,a.qualRating=e.overall,a.quanPercent=0,a.qualPercent=0,a.facilityRating=0,t.push(a)}else t[a].count+=1,t[a].quanRating+=e.Rating,t[a].qualRating+=e.overall,e.Rating&&(t[a].countQuanRating+=1),e.overall&&(t[a].countQualRating+=1),t[a].quanPercent=t[a].quanRating/t[a].countQuanRating*.5,t[a].qualPercent=t[a].qualRating/t[a].countQuanRating*.5,e.ratingQuanPercent=t[a].quanRating/t[a].countQuanRating*.5,e.ratingQualPercent=t[a].qualRating/t[a].countQualRating*.5,t[a].facilityRating=e.ratingQuanPercent+e.ratingQualPercent,t.push(e);return t}),[])},facilityReport(){return this.facilityTable.reduce(((t,e)=>{let a=t.findIndex((t=>t.Info==e.Info));if(-1==a){let a={...e};a.Required=e.Required,a.Actual=e.Actual,a.Quantitative=0,a.Qualitative=0,a.total=0,a.weight=0,t.push(a)}else t[a].Required+=e.Required,t[a].Actual+=e.Actual,t[a].Quantitative=2*e.ratingQuanPercent,t[a].Qualitative=2*e.ratingQualPercent,t[a].total=(t[a].Quantitative+t[a].Qualitative)/2,t[a].weight=t[a].total?t[a].total/2:0;return t}),[])},readiness(){let t=0;for(const e of this.facilityReport)e.weight&&(t+=e.weight);return t},submitted(){return this.tableData.length>0?this.tableData.find((t=>"1"==t.Submit)):0},approved(){return this.tableData.length>0?this.tableData.find((t=>t.Status)):0},disableSubmit(){if(this.team){let t="D01"==this.user.main?this.user.office:this.user.unit;return t==this.team&&0==this.approved.Status}return!1},disableApproved(){return!["T01","T02","T03"].includes(this.user.office)||1!=this.approved.Status},unitName(){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t},yearItems(){const t=[],e=A()().year(),a=e+5;for(let i=2020;i<=a;i++)t.push(i);return t},reasonDetails(){let t={table:"facility",month:this.generateDate,unit:this.team};return t},dataDownload(){let t={tableData:this.facilityTable,report:this.facilityReport,readiness:this.readiness,teamName:this.unitName,month:this.formattedDate,remarksData:this.remarksData,assesment:this.remarksData.length>0,status:this.approved.Status,sign:this.timelineData};return t}},created(){this.$store.state.user.rights||(this.$store.state.departmentData=this.$store.state.user.main,this.$store.dispatch("getTeam"))},mounted(){this.$store.dispatch("getDepartment"),this.department=this.user.main,this.$store.state.departmentData=this.department,this.user.rights?this.team=null:"D01"==this.user.main?this.team=this.user.office:this.team=this.user.unit},watch:{dialog(t){t||(this.id=null)},department(t){t&&(this.$store.state.departmentData=t,this.$store.dispatch("getTeam"))},declinedData(t){t&&this.generate()}}},fi=gi,bi=(0,Z.Z)(fi,ei,ai,!1,null,"c08c7e5e",null),vi=bi.exports,yi=a(7394),Di=a(8419),xi=a(6379),Ri=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Branch/Rank")])],1),e("br"),e(c.Z),e("br"),e(F.Z,[e(z.Z,{staticClass:"shrink",attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(l.Z,{attrs:{color:"success",block:"",disabled:t.disableView},on:{click:function(e){return t.toggleExpand()}}},[t._v(" ADD DATA TABLE ")]),e(yi.Fx,[e(l.Z,{directives:[{name:"show",rawName:"v-show",value:t.expand&&!t.expandBranch,expression:"expand && !expandBranch"}],attrs:{color:"primary",block:""},on:{click:function(e){return t.toggleBranch()}}},[t._v(" VIEW BRANCH/POSITION ")])],1),e(yi.Fx,[e(l.Z,{directives:[{name:"show",rawName:"v-show",value:t.expand&&!t.expandRank,expression:"expand && !expandRank"}],attrs:{color:"primary",block:""},on:{click:function(e){return t.toggleRank()}}},[t._v(" VIEW RANK ")])],1),e(yi.Fx,[e(l.Z,{directives:[{name:"show",rawName:"v-show",value:t.expand&&!t.expandUnit,expression:"expand && !expandUnit"}],attrs:{color:"primary",block:""},on:{click:function(e){return t.toggleUnit()}}},[t._v(" ADD UNIT ")])],1),e(yi.Fx,[e(o.Z,{directives:[{name:"show",rawName:"v-show",value:t.expandBranch,expression:"expandBranch"}],attrs:{elevation:"5"}},[e(d.EB,{staticClass:"justify-center"},[t._v("VIEW BRANCH/POSITION")]),e(Et.Z,[e("div",{staticClass:"d-flex justify-center"},[e(xi.Z,{attrs:{row:""},model:{value:t.branchRadio,callback:function(e){t.branchRadio=e},expression:"branchRadio"}},[e(Di.Z,{attrs:{label:"UPDATE",value:"update"}}),e(Di.Z,{attrs:{label:"ADD",value:"add"}})],1)],1),e(vt.Z,{attrs:{clearable:"",outlined:"",dense:"",label:"Division",items:t.divisionItems,"item-text":"DivisionName","item-value":"DivisionCode"},on:{change:function(e){return t.changeDivision()}},model:{value:t.divisionData,callback:function(e){t.divisionData=e},expression:"divisionData"}}),e(vt.Z,{attrs:{clearable:"",outlined:"",dense:"",label:"Branch",items:t.filterDivisionItems,"item-text":"BranchName","item-value":"BranchCode"},on:{change:function(e){return t.changeBranch()}},model:{value:t.branchData,callback:function(e){t.branchData=e},expression:"branchData"}}),e(vt.Z,{directives:[{name:"show",rawName:"v-show",value:"update"==t.branchRadio,expression:"branchRadio == 'update'"}],attrs:{clearable:"",outlined:"",dense:"",label:"Position",items:t.positionItems,"item-text":"PositionName","item-value":"PositionCode"},model:{value:t.positionData,callback:function(e){t.positionData=e},expression:"positionData"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"update"!=t.branchRadio&&!t.branchData&&t.divisionData,expression:"branchRadio != 'update' && !branchData && divisionData"}],attrs:{label:"Add New Branch",dense:"",outlined:""},model:{value:t.addBranch,callback:function(e){t.addBranch=e},expression:"addBranch"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"update"!=t.branchRadio&&t.branchData||t.addBranch,expression:"branchRadio != 'update' && branchData || addBranch"}],attrs:{label:"Position",dense:"",outlined:""},model:{value:t.addPosition,callback:function(e){t.addPosition=e},expression:"addPosition"}}),e(l.Z,{attrs:{color:"primary",block:"",disabled:"add"==t.branchRadio&&!t.addPosition||"update"==t.branchRadio&&!t.branchData},on:{click:function(e){return t.branchBtn(t.branchRadio)}}},[t._v(" "+t._s("update"==t.branchRadio?"VIEW":"ADD")+" ")]),e(l.Z,{attrs:{block:""},on:{click:function(e){return t.toggleCloseView()}}},[t._v("CLOSE")])],1)],1)],1),e(yi.Fx,[e(o.Z,{directives:[{name:"show",rawName:"v-show",value:t.expandRank,expression:"expandRank"}],attrs:{elevation:"5"}},[e(d.EB,{staticClass:"justify-center"},[t._v("VIEW RANK")]),e(Et.Z,[e("div",{staticClass:"d-flex justify-center"},[e(xi.Z,{attrs:{row:""},model:{value:t.rankRadio,callback:function(e){t.rankRadio=e},expression:"rankRadio"}},[e(Di.Z,{attrs:{label:"UPDATE",value:"update"}}),e(Di.Z,{attrs:{label:"ADD",value:"add"}})],1)],1),e(F.Z,[e(z.Z,{attrs:{cosl:"12",md:"12",lg:"12",xl:"12"}},[e(vt.Z,{attrs:{clearable:"",outlined:"",dense:"",label:"Division",items:t.divisionItems,"item-text":"DivisionName","item-value":"DivisionCode"},on:{change:function(e){return t.changeDivision()}},model:{value:t.divisionData,callback:function(e){t.divisionData=e},expression:"divisionData"}})],1),e(z.Z,{directives:[{name:"show",rawName:"v-show",value:!t.addGrade,expression:"!addGrade"}],attrs:{cosl:"12",md:"6",lg:"6",xl:"6"}},[e(vt.Z,{attrs:{clearable:"",outlined:"",dense:"",label:"Grade",items:t.filterRankItemsMerge,"item-text":"Grade","item-value":"Grade"},on:{change:function(e){return t.changeGrade()}},model:{value:t.gradeData,callback:function(e){t.gradeData=e},expression:"gradeData"}})],1),e(z.Z,{directives:[{name:"show",rawName:"v-show",value:"update"==t.rankRadio,expression:"rankRadio == 'update'"}],attrs:{cosl:"12",md:"6",lg:"6",xl:"6"}},[e(vt.Z,{attrs:{clearable:"",outlined:"",dense:"",label:"Rank",items:t.rankItems,"item-text":"Rank","item-value":"Rank"},model:{value:t.rankData,callback:function(e){t.rankData=e},expression:"rankData"}})],1),e(z.Z,{directives:[{name:"show",rawName:"v-show",value:"update"!=t.rankRadio&&!t.gradeData,expression:"rankRadio != 'update' && !gradeData"}],attrs:{cosl:"12",md:"6",lg:"6",xl:"6"}},[e(Rt.Z,{attrs:{label:"Add new Grade",dense:"",outlined:""},model:{value:t.addGrade,callback:function(e){t.addGrade=e},expression:"addGrade"}})],1),e(z.Z,{directives:[{name:"show",rawName:"v-show",value:"update"!=t.rankRadio&&t.addGrade||"update"!=t.rankRadio&&t.gradeData,expression:"rankRadio != 'update' && addGrade || rankRadio != 'update' && gradeData"}],attrs:{cosl:"12",md:"6",lg:"6",xl:"6"}},[e(Rt.Z,{attrs:{label:"Add new Rank",dense:"",outlined:""},model:{value:t.addRank,callback:function(e){t.addRank=e},expression:"addRank"}})],1)],1),e(l.Z,{attrs:{color:"primary",block:"",disabled:"add"==t.rankRadio&&!t.addRank||"update"==t.rankRadio&&!t.divisionData},on:{click:function(e){return t.rankBtn(t.rankRadio)}}},[t._v(" "+t._s("update"==t.rankRadio?"VIEW":"ADD")+" ")]),e(l.Z,{attrs:{block:""},on:{click:function(e){return t.toggleCloseView()}}},[t._v("CLOSE")])],1)],1)],1),e(yi.Fx,[e(o.Z,{directives:[{name:"show",rawName:"v-show",value:t.expandUnit,expression:"expandUnit"}],attrs:{elevation:"5"}},[e(d.EB,{staticClass:"justify-center"},[t._v("VIEW UNIT")]),e(Et.Z,[e(xi.Z,{attrs:{row:""},model:{value:t.categoryRadio,callback:function(e){t.categoryRadio=e},expression:"categoryRadio"}},[e("h3",[t._v("Category : ")]),e(Di.Z,{attrs:{label:"Existing",value:"exist"}}),e(Di.Z,{attrs:{label:"New",value:"new"}})],1),e(Dt.Z,{ref:"unithBtn",on:{submit:function(e){return e.preventDefault(),t.unithBtn.apply(null,arguments)}}},["exist"==t.categoryRadio?e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required},on:{change:function(e){return t.getDepartment()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}):t._e(),e(vt.Z,{attrs:{label:"Department","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required},on:{change:function(e){return t.getSection()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),e(vt.Z,{attrs:{label:"Section","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required},on:{change:function(e){return t.getTeam()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}),e(vt.Z,{attrs:{label:"Team","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required},on:{change:function(e){return t.getEmpty()}},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}),e(l.Z,{attrs:{color:"primary",block:"",type:"submit"}},[t._v(" "+t._s("update"==t.unitRadio?"VIEW":"ADD")+" ")]),e(l.Z,{attrs:{block:""},on:{click:function(e){return t.toggleCloseView()}}},[t._v("CLOSE")])],1)],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(Mt.Z,{directives:[{name:"show",rawName:"v-show",value:t.dpbTableView,expression:"dpbTableView"}],staticClass:"elevation-1",attrs:{dense:"","fixed-header":"",height:"80vh"}},[e("thead",[t.expandBranch?e("tr",[e("th",[t._v("Division")]),e("th",[t._v("Branch Name")]),e("th",[t._v("Position Name")]),e("th",[t._v("Delete")])]):t.expandRank?e("tr",[e("th",[t._v("Division")]),e("th",[t._v("Grade")]),e("th",[t._v("Rank")]),e("th",[t._v("Delete")])]):t._e()]),t.expandBranch?e("tbody",t._l(t.dpbTableMerge,(function(a,i){return e("tr",{key:i},[a.count>0?e("td",{staticClass:"tableBorder",attrs:{rowspan:a.count>0?a.count:1}},[t._v(t._s(a.DivisionName))]):t._e(),a.count>0?e("td",{staticClass:"editColor tableBorder",attrs:{rowspan:a.count>0?a.count:1},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateValue(a,"branch")}}},[t._v(t._s(a.BranchName))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.BranchName))])]],2):t._e(),e("td",{staticClass:"editColor tableBorder",on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateValue(a,"position")}}},[t._v(t._s(a.PositionName))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.PositionName))])]],2),e("td",{staticClass:"tableBorder"},[e(l.Z,{attrs:{color:"error",icon:""},on:{click:function(e){return t.deleteValue(a)}}},[e(h.Z,[t._v("mdi-trash-can-outline")])],1)],1)])})),0):t.expandRank?e("tbody",t._l(t.rankTableMerge,(function(a,i){return e("tr",{key:i},[a.count>0?e("td",{staticClass:"tableBorder",attrs:{rowspan:a.count>0?a.count:1}},[t._v(t._s(a.DivisionName))]):t._e(),e("td",{staticClass:"editColor tableBorder",on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateValue(a,"grade")}}},[t._v(t._s(a.Grade))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Grade))])]],2),e("td",{staticClass:"editColor tableBorder",on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateValue(a,"rank")}}},[t._v(t._s(a.Rank))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Rank))])]],2),e("td",{staticClass:"tableBorder"},[e(l.Z,{attrs:{color:"error",icon:""},on:{click:function(e){return t.deleteValue(a)}}},[e(h.Z,[t._v("mdi-trash-can-outline")])],1)],1)])})),0):t._e()])],1)],1)],1)},_i=[],Si={name:"AdminComponent",data:()=>({disableView:!1,expand:!1,expandBranch:!1,expandRank:!1,expandUnit:!1,expandRequired:!1,divisionData:null,editing:!1,editIndex:null,branchRadio:"update",addBranch:null,addPosition:null,branchData:null,positionData:null,positionItems:[],dpbTable:[],dpbTableView:!1,rankRadio:"update",addGrade:null,addRank:null,rankItems:[],rankData:null,gradeData:null,rankTable:[],categoryRadio:"exist",departmentRadio:"exist",sectionRadio:"exist",category:null,categoryItems:[],division:null,department:null,departmentItems:[],section:null,sectionItems:[],team:null,teamItems:[],rules:{required:[t=>!!t||"Field is required"]}}),methods:{toggleExpand(){this.expand=!this.expand},toggleBranch(){this.expandBranch=!this.expandBranch,this.expand=!this.expand,this.disableView=!0},toggleUnit(){this.expandUnit=!this.expandUnit,this.expand=!this.expand,this.disableView=!0},toggleRank(){this.expandRank=!this.expandRank,this.expand=!this.expand,this.disableView=!0},toggleRequired(){this.expandRequired=!this.expandRequired,this.expand=!this.expand,this.disableView=!0},toggleCloseView(){this.expand=!0,this.expandUnit=!1,this.expandBranch=!1,this.expandRank=!1,this.expandRequired=!1,this.disableView=!1,this.dpbTableView=!1},changeDivision(){this.expandBranch&&(this.positionItems=[],this.branchData=null,this.addBranch=null,this.addPosition=null,this.$store.dispatch("getFilterDivision",this.divisionData)),this.expandRank&&(this.rankItems=[],this.gradeData=null,this.addGrade=null,this.addRank=null,this.$store.dispatch("getFilterRank",this.divisionData)),this.expandUnit&&(this.$store.state.unitItems=[],this.$store.state.filterUnitItems=[],this.unitData=null,this.subUnitData=null)},changeBranch(){this.positionItems=[],this.addBranch=null,this.$store.dispatch("getFilterDivision",this.divisionData),this.filterDivisionItems.filter((t=>{t.BranchCode==this.branchData&&this.positionItems.push(t)}))},changeGrade(){this.rankItems=[],this.addBranch=null,this.$store.dispatch("getFilterDivision",this.divisionData),this.filterRankItems.filter((t=>{t.Grade==this.gradeData&&this.rankItems.push(t)}))},changeUnit(){this.subUnitItems=[],this.addUnit=null,this.addSubUnit=null,this.$store.dispatch("getFilterUnit",this.unitData)},async branchBtn(t){if("update"!=t){let t=this.filterDivisionItems.pop(),e=t.BranchCode.match(/\d+/),a=parseInt(e[0],10)+1,i=t.BranchCode.replace(/\d+/,a.toString().padStart(e[0].length,"0")),n=t.PositionCode.match(/\d+/),r=parseInt(n[0],10)+1,s=t.PositionCode.replace(/\d+/,r.toString().padStart(n[0].length,"0"));k()({method:"post",url:`${this.$baseUrl}api/addBranchPosition`,data:{divisionCode:this.divisionData,branchCode:this.branchData?this.branchData:i,branchName:this.branchData?null:this.addBranch,positionCode:s,positionName:this.addPosition}}).then((function(){this.$store.dispatch("getFilterDivision",this.divisionData),this.addBranch=null,this.addPosition=null,alert("add")}))}else this.dpbTable=[],this.filterDivisionItems.filter((t=>{this.positionData?t.PositionCode==this.positionData&&this.dpbTable.push(t):t.BranchCode==this.branchData&&this.dpbTable.push(t)})),this.dpbTableView=!0},rankBtn(t){"update"!=t?k()({method:"post",url:`${this.$baseUrl}api/addRank`,data:{divisionCode:this.divisionData,gradeCode:this.gradeData?this.gradeData:this.addGrade.toUpperCase(),rankCode:this.addRank.toUpperCase()}}).then((function(){this.$store.dispatch("getFilterRank",this.divisionData),this.addGrade=null,this.addRank=null,alert("add")})):(this.rankTable=[],this.filterRankItems.filter((t=>{this.rankData?t.Rank==this.rankData&&this.rankTable.push(t):this.gradeData?t.Grade==this.gradeData&&this.rankTable.push(t):this.rankTable.push(t)})),this.dpbTableView=!0)},getCategory(){this.department=null,this.section=null,this.team=null,k()({method:"get",url:`${this.$baseUrl}api/getCategory`}).then((t=>{this.categoryItems=t.data}))},getDepartment(){this.tableData=[],this.section=null,this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getDepartment`,data:{data:this.category}}).then((t=>{this.departmentItems=t.data}))},getSection(){this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getSection`,data:{data:this.department}}).then((t=>{this.sectionItems=t.data}))},getTeam(){k()({method:"post",url:`${this.$baseUrl}api/getTeam`,data:{data:this.section}}).then((t=>{this.teamItems=t.data}))},unithBtn(){this.$refs.unithBtn.validate()},updateValue(t,e){this.editing=!1,this.editIndex=null;const a=event.target.innerText;"position"==e||"branch"==e?k()({method:"post",url:`${this.$baseUrl}api/updateBranchPosition`,data:{updatedValue:a,code:"branch"==e?t.BranchCode:t.PositionCode,table:e}}).then((function(){alert("Updated")})):"grade"!=e&&"rank"!=e||k()({method:"post",url:`${this.$baseUrl}api/updateGradeRank`,data:{updatedValue:a,code:"rank"==e?t.Rank:t.Grade,table:e}}).then((function(){alert("Updated"),this.$store.dispatch("getFilterRank",this.divisionData)}))},async deleteValue(t){let e;this.expandBranch?e="deleteBranchPosition":this.expandRank?e="deleteRank":this.expandUnit&&(e="deleteUnit"),await k()({method:"post",url:`${this.$baseUrl}api/${e}`,data:{data:t}}).then((async function(){this.expandBranch?await this.$store.dispatch("getFilterDivision",t.DivisionCode):this.expandRank&&await this.$store.dispatch("getFilterRank",t.DivisionCode),alert("Deleted"),setTimeout((()=>{this.expandBranch?this.branchBtn("update"):this.expandRank&&this.rankBtn("update")}),1e3)}))}},computed:{...(0,T.rn)(["divisionItems","unitItems","filterDivisionItems","filterRankItems","filterUnitItems","lastMonthData"]),dpbTableMerge(){return this.dpbTable.reduce(((t,e)=>{let a=t.findIndex((t=>t.DivisionCode==e.DivisionCode));if(-1==a){let a={...e};a.count=1,t.push(a)}else t[a].count+=1,t.push(e);return t}),[])},rankTableMerge(){return this.rankTable.reduce(((t,e)=>{let a=t.findIndex((t=>t.DivisionCode==e.DivisionCode));if(-1==a){let a={...e};a.count=1,t.push(a)}else t[a].count+=1,t.push(e);return t}),[])},filterRankItemsMerge(){return this.filterRankItems.reduce(((t,e)=>{let a=t.findIndex((t=>t.Grade==e.Grade));return-1==a&&t.push(e),t}),[])},formattedDate(){if(this.selectedDate){const t=new Date(this.selectedDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null}},watch:{expand(t){t&&this.$store.dispatch("getDivision")},branchRadio(t){"update"==t&&(this.branchData=null,this.addBranch=null,this.addPosition=null)},expandBranch(t){t&&this.$store.dispatch("getFilterDivision",this.divisionData)},expandRank(t){t&&this.$store.dispatch("getFilterRank",this.divisionData)},expandUnit(t){t&&this.$store.dispatch("getUnit")}},mounted(){this.getCategory()}},Ci=Si,Ti=(0,Z.Z)(Ci,Ri,_i,!1,null,"606d78c4",null),wi=Ti.exports,Ai=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("REPORT")])],1),e("h2",[e("center",[t._v(t._s(t.report))])],1),e("h3",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e("br"),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[e("center",[t._v("CONTROL PANEL")])],1),e(Et.Z,[e(F.Z,[e(z.Z,{attrs:{cols:"12"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","append-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tempSubmit=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"Submitted/Not Submitted",dense:"",outlined:"",items:t.itemsSubmit,clearable:""},model:{value:t.submit,callback:function(e){t.submit=e},expression:"submit"}})],1),e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px"},attrs:{label:"Report Table",outlined:"",dense:"",items:t.itemsReport,"item-text":"text","item-value":"value",clearable:""},model:{value:t.report,callback:function(e){t.report=e},expression:"report"}})],1),e(z.Z,{attrs:{cols:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px"},attrs:{label:"Unit",outlined:"",dense:"",items:t.departmentItems,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",clearable:""},model:{value:t.unit,callback:function(e){t.unit=e},expression:"unit"}})],1),e(z.Z,{attrs:{cols:"12"}},[e(l.Z,{attrs:{color:"success",medium:"",block:"",disabled:!(t.generateDate&&t.submit&&t.report&&t.unit)},on:{click:function(e){return t.view()}}},[t._v("VIEW")])],1)],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[t.submitTable?e("tr",[e("th",{attrs:{width:"10%"}},[t._v("No.")]),1==t.submit?e("th",[t._v("Name of Unit Submitted")]):e("th",[t._v("Name of Unit Not Yet Submitted")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Prepared Date")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Prepared By")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Noted Date")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Noted By")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Approved Date")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Approved By")]),e("th",{directives:[{name:"show",rawName:"v-show",value:1==t.submit,expression:"submit == 1"}]},[t._v("Unlocked")])]):t._e()]),e("tbody",t._l(t.submitTable,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),e("td",{staticStyle:{"text-align":"left !important","font-weight":"bold"}},[t._v(t._s(a.UnitTeamName))]),1==t.submit?e("td",[t._v(t._s(a.PreparedDate))]):t._e(),1==t.submit?e("td",[t._v(t._s(a.PreparedBy))]):t._e(),1==t.submit?e("td",[t._v(t._s(a.NotedDate))]):t._e(),1==t.submit?e("td",[t._v(t._s(a.NotedBy))]):t._e(),1==t.submit?e("td",[t._v(t._s(a.ApprovedDate))]):t._e(),1==t.submit?e("td",[t._v(t._s(a.ApprovedBy))]):t._e(),1==t.submit?e("td",[e(l.Z,{attrs:{icon:""},on:{click:function(e){return t.unlocked(a)}}},[e(h.Z,{attrs:{color:"primary"}},[t._v("mdi-lock-open")])],1)],1):t._e()])})),0)]),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)],1),e("ReportPersonnelDialog",{ref:"ReportPersonnelDialog"}),e("ReportTrainingDialog",{ref:"ReportTrainingDialog"}),e("ReportEquipmentDialog",{ref:"ReportEquipmentDialog"})],1)},Ni=[],ki=function(){var t=this,e=t._self._c;return e("div",[e(yt.Z,{attrs:{persistent:"",scrollable:""},model:{value:t.reportDialog,callback:function(e){t.reportDialog=e},expression:"reportDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" PERSONNEL READINESS "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.reportDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e(d.ZB,[e("h1",[e("center",[t._v(t._s(t.team))])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.personel_tab,callback:function(e){t.personel_tab=e},expression:"personel_tab"}},[t.tableData?e(qt.Z,{attrs:{href:"#pqr"},on:{click:function(e){return t.pqr("pqr")}}},[t._v("PERSONNEL QUALIFICATION RATING")]):t._e(),t.tableData.length>0?e(qt.Z,{attrs:{href:"#psg"},on:{click:function(e){return t.psg("psg")}}},[t._v("PERSONNEL STRENGTH BY GRADE")]):t._e(),t.tableData.length>0?e(qt.Z,{attrs:{href:"#prs"},on:{click:function(e){return t.prs("prs")}}},[t._v("PERSONNEL READINESS RATING")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.personel_tab,callback:function(e){t.personel_tab=e},expression:"personel_tab"}},[e($t.Z,{attrs:{value:"pqr"}},[e(Et.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("DESCRIPTION/POSITION")]),e("th",{attrs:{width:"25%"}},[t._v("NAME")]),e("th",[t._v("RANK REQUIRED")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("POINTS")]),e("th",[t._v("AFPOS")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("POINTS")]),e("th",[t._v("REQUIRED")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{key:i},[a.GroupBranch?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.GroupBranch))])]):t._e(),e("tr",[e("td",{staticStyle:{"text-align":"left !important"}},[t._v(t._s(a.PositionName))]),e("td",{staticStyle:{"text-align":"left !important"}},[t._v(t._s(a.RankName)+" "+t._s(a.Name)+" "+t._s(a.ServiceCode))]),e("td",[t._v(t._s(a.requiredGradeName))]),e("td",[t._v(t._s(a.RankCode))]),e("td",[t._v(t._s(a.actualGrade))]),e("td",[t._v(t._s(a.requiredAfposName))]),e("td",[t._v(t._s(a.AfposName))]),e("td",[t._v(t._s(a.actualAfpos))]),e("td",[t._v(t._s(a.requiredMp))])])])}))],2),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)],1),e($t.Z,{attrs:{value:"psg"}},[e(Et.Z,[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",{attrs:{colspan:"2"}},[t._v("TOTAL")])])]),e("tbody",[e("tr",[e("td",[t._v("TOE")]),e("td",{staticClass:"total"},[t._v(t._s(t.totalToe))])]),e("tr",[e("td",[t._v("ACTUAL")]),e("td",{staticClass:"total"},[t._v(t._s(t.totalActual))])]),e("tr",[e("td",{staticStyle:{"background-color":"#0275d8",color:"white"},attrs:{colspan:"2"}},[e("b",[t._v("PSG RATING")])])]),e("tr",[e("td",{staticClass:"total",attrs:{colspan:"2"}},[t._v(t._s(t.psgRating)+"%")])])])])],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,{attrs:{"max-width":"100%"}},[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("GRADE")]),e("th",[t._v("TOE")]),e("th",[t._v("ACTUAL")])])]),t._l(t.psgTable,(function(a,i){return e("tbody",{key:i},[a.GroupDivision?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.GroupDivision))])]):t._e(),"-"!=a.GradeName?e("tr",[e("td",[t._v(t._s(a.GradeName))]),e("td",[t._v(t._s(a.countRequired))]),e("td",[t._v(t._s(a.countActual?a.countActual:""))])]):t._e(),a.GroupDivision||t.psgTable[i+2]&&!t.psgTable[i+1].GroupDivision?t._e():["-"!=a.GradeName?e("tr",{staticStyle:{"background-color":"lightgray"}},[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("Sub-Total")]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.totalCountRequired))]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.totalCountActual))])]):t._e()]],2)}))],2)],1)],1)],1)],1)],1),e($t.Z,{attrs:{value:"prs"}},[e(Et.Z,[e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},[e("thead",[e("tr",[e("th",[t._v("RATING")]),e("th",[t._v("PERCENTAGE")]),e("th",[t._v("WEIGHT"),e("br"),t._v("PERCENTAGE")])])]),e("tbody",[e("tr",[e("td",[t._v("PSGR (50%)")]),e("td",[t._v(t._s(t.psgRating)+"%")]),e("td",[t._v(t._s(t.psgRating05)+"%")])]),e("tr",[e("td",[t._v("Personnel Qualification Rating (50%)")]),e("td",[t._v(t._s(t.pqrRating05)+"%")]),e("td",[t._v(t._s(t.pqrRatingTotal)+"%")])]),e("tr",[e("td",[t._v("PRR (40%)")]),e("td",[t._v(t._s(t.gradeRating)+"%")]),e("td",[t._v(t._s(t.gradeRating04)+"%")])]),e("tr",[e("td",[t._v("PSR (60%)")]),e("td",[t._v(t._s(t.afposRating)+"%")]),e("td",[t._v(t._s(t.afposRating06)+"%")])]),e("tr",[e("td",[t._v("TOTAL (PSGR + PQR)")]),e("td"),e("td",[t._v(t._s(t.totalRating)+"%")])])])])],1)],1),e(c.Z),e("br"),e(Et.Z,[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])])])})),0)],1)],1)],1)],1)],1)],1)],1)],1)},Ei=[],Ii={data:()=>({reportDialog:!1,tableData:[],personel_tab:"pqr",generateDate:null,team:null,tableContainer:[]}),methods:{async openDialog(t){this.generateDate=t.Month,this.team=t.UnitTeamName,this.reportDialog=!0,await this.$store.dispatch("getLastMonth"),await this.$store.dispatch("diplayRemarks"),this.tableContainer=this.lastMonthData},decryptData(t){const e=atob(t);return e},pqr(t){this.personel_tab=t},psg(t){this.personel_tab=t},prs(t){this.personel_tab=t,this.$store.dispatch("diplayRemarks","personnel")},getTable(t){if("noData"==t)this.tableData=[{}];else try{const e=t,a=this.decryptData(e);let i=JSON.parse(a);this.tableData=i.reduce(((t,e)=>{let a=t.findIndex((t=>t.BranchCode==e.BranchCode));if(-1==a){let a={...e};a.GroupBranch=e.BranchName,a.TotalMP=Number(e.requiredMp),t.push(a)}else isNaN(e.requiredMp)||(t[a].TotalMP+=Number(e.requiredMp)),t[a].count+=1,e.total=t[a].TotalMP,t.push(e);return t}),[]).filter((t=>(t.requiredGradeName.includes(t.RankCode)||t.RankCode&&t.RankCode.match(/\d+/)-t.requiredGradeName.match(/\d+/)==1?t.actualGrade=1:t.actualGrade=0,t.RequiredAfpos==t.AfposCode||"AF011"==t.RequiredAfpos&&t.AfposCode?t.actualAfpos=1:t.actualAfpos=0,t)))}catch(e){console.error("Error fetching and decrypting grade data:",e)}}},computed:{...(0,T.rn)(["teamItems","lastMonthData","branchItems","positionItems","rankItems","serviceItems","afposItems","psgTable","gradePoints","afposPoints","overlay","remarksData"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},totalToe(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalRequired?t+e.TotalRequired:t),0):0},totalActual(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalActual?t+e.TotalActual:t),0):0},psgRating(){if(this.psgTable.length>0){let t;return t=this.totalActual/this.totalToe*100,t.toFixed(2)}return 0},gradeRating(){let t;return t=this.gradePoints/this.totalActual*100,t.toFixed(2)},gradeRating04(){let t;return t=.4*this.gradeRating,t.toFixed(2)},afposRating(){let t;return t=this.afposPoints/this.totalActual*100,t.toFixed(2)},afposRating06(){let t;return t=.6*this.afposRating,t.toFixed(2)},psgRating05(){let t;return t=this.psgRating?.5*this.psgRating:0,t.toFixed(2)},pqrRating05(){let t;return t=.5*this.pqrRatingTotal,t.toFixed(2)},pqrRatingTotal(){let t;return t=.4*this.gradeRating+.6*this.afposRating,t.toFixed(2)},totalRating(){let t;return t=Number(this.psgRating05)+Number(this.pqrRating05),t}},watch:{lastMonthData(t){t&&this.getTable(t)},tableData(t){t&&(this.$store.dispatch("getPsgTable"),this.$store.dispatch("getPoints"))},tableContainer(t){t&&this.getTable(t)}}},Zi=Ii,Pi=(0,Z.Z)(Zi,ki,Ei,!1,null,"0d1d6c44",null),Mi=Pi.exports,Ui=function(){var t=this,e=t._self._c;return e("div",[e(yt.Z,{attrs:{persistent:"",scrollable:""},model:{value:t.reportDialog,callback:function(e){t.reportDialog=e},expression:"reportDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" TRAINING READINESS "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.reportDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e(d.ZB,[e("h1",[e("center",[t._v(t._s(t.teamName))])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e("br"),e(c.Z),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.training_tab,callback:function(e){t.training_tab=e},expression:"training_tab"}},[e(qt.Z,{attrs:{href:"#mett"},on:{click:function(e){return t.mett("mett")}}},[t._v("MISSION ESSENNTIAL TASK TRAINING")]),t.tableData.length>0?e(qt.Z,{attrs:{href:"#orac"},on:{click:function(e){return t.orac("orac")}}},[t._v("CONSOLIDATED OPERATIONALLY & AVAILABLE CREW")]):t._e(),t.tableData.length>0?e(qt.Z,{attrs:{href:"#trr"},on:{click:function(e){return t.trr("trr")}}},[t._v("TRAINING READINESS RAITING")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.training_tab,callback:function(e){t.training_tab=e},expression:"training_tab"}},[e($t.Z,{attrs:{value:"mett"}},[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{height:"80vh","fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("MISSION ESSENTIAL TASK")]),e("th",[t._v("1st Qtr")]),e("th",[t._v("2nd Qtr")]),e("th",[t._v("3rd Qtr")]),e("th",[t._v("4th Qtr")]),e("th",[t._v("Required")]),e("th",[t._v("Actual")]),e("th",[t._v("Percentage")])])]),e("tbody",[t._l(t.tableData,(function(a,i){return e("tr",{key:i},[e("td",{staticStyle:{"white-space":"pre-wrap","font-weight":"bold"}},[t._v(t._s(a.Met))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Quarter1))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Quarter2))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Quarter3))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Quarter4))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Required))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Actual))]),e("td",[t._v(t._s(t.itemPercentage(a)))])])})),t.tableData.length>0?e("tr",[e("td",{attrs:{colspan:"5"}}),e("td",{staticClass:"total"},[t._v(t._s(t.totalRequired))]),e("td",{staticClass:"total"},[t._v(t._s(t.totalOrac))]),e("td",{staticClass:"total"},[t._v(t._s(t.metPercentage))])]):t._e()],2)])],1),e($t.Z,{attrs:{value:"orac"}},[e(Et.Z,[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("NR OF PERSONNEL"),e("br"),t._v("PER UMD")]),e("th",[t._v("NR ACTUAL"),e("br"),t._v("ASSIGNED")]),e("th",[t._v("ORAC")]),e("th",[t._v("PERCENTAGE")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.unitName))]),e("td",[t._v(t._s(t.totalToe))]),e("td",[t._v(t._s(t.totalAssigned))]),e("td",[t._v(t._s(t.totalOrac))]),e("td",[t._v(t._s(t.oracPercentage))])])])])],1)],1)],1),e($t.Z,{attrs:{value:"trr"}},[e(Et.Z,[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("PERCENTAGE"),e("br"),t._v("ORAC")]),e("th",[t._v("PERCENTAGE"),e("br"),t._v("METT")]),e("th",[t._v("TRR")])])]),e("tbody",[e("tr",[e("td",[t._v(t._s(t.unitName))]),e("td",[t._v(t._s(t.oracPercentage))]),e("td",[t._v(t._s(t.metPercentage))]),e("td",[t._v(t._s(t.trRating))])])])])],1)],1),e(c.Z),e("br"),e(Et.Z,[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])])])})),0)],1)],1)],1)],1)],1)],1)],1)],1)},qi=[],$i={data(){return{reportDialog:!1,training_tab:"mett",tableData:[],generateDate:null,teamName:null,team:null}},methods:{async openDialog(t){this.generateDate=t.Month,this.team=t.UnitTeamCode,this.teamName=t.UnitTeamName,this.reportDialog=!0,this.getTrainingData(),await this.$store.dispatch("diplayRemarks")},async getTrainingData(){this.$store.state.teamData=this.team,this.$store.state.monthData=this.generateDate,k()({method:"post",url:`${this.$baseUrl}api/getTrainingData`,data:{Team:this.team,Month:this.generateDate}}).then((t=>{this.tableData=t.data,console.log(this.tableData,"ceo")}))},mett(t){this.training_tab=t},orac(t){this.training_tab=t},trr(t){this.training_tab=t,this.$store.dispatch("diplayRemarks","training")},itemPercentage(t){return this.colPercentage=(t.Actual/t.Required*100).toFixed(2)}},computed:{...(0,T.rn)(["teamItems","psgTable","remarksData","trainingTableUpdate"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},submitted(){return this.tableData.length>0?this.tableData.find((t=>"1"==t.Submit)):0},totalRequired(){return this.tableData.length>0?this.tableData.reduce(((t,e)=>e.Required?t+Number(e.Required):t),0):0},totalOrac(){return this.tableData.length>0?this.tableData.reduce(((t,e)=>e.Actual?t+Number(e.Actual):t),0):0},metPercentage(){if(this.tableData.length>0){let t;return t=(this.totalOrac/this.totalRequired*100).toFixed(2)+"%",t}return 0},totalAssigned(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalActual?t+e.TotalActual:t),0):0},oracPercentage(){if(this.tableData.length>0){let t;return t=(this.totalOrac/this.totalAssigned*100).toFixed(2)+"%",t}return 0},trRating(){if(this.tableData.length>0){let t,e=this.totalOrac/this.totalRequired*.6,a=this.totalOrac/this.totalAssigned*.4;return t=(a+100*e).toFixed(2)+"%",t}return 0},unitName(){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.teamCode&&(t=e.UnitTeamName)})),t},yearItems(){const t=[],e=A()().year(),a=e+5;for(let i=2020;i<=a;i++)t.push(i);return t},totalToe(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalRequired?t+e.TotalRequired:t),0):0}},mounted(){this.$store.dispatch("getTeam")},watch:{tableData(t){t&&this.$store.dispatch("getPsgTable")},trainingTableUpdate(t){t&&this.getTrainingData()}}},Oi=$i,Li=(0,Z.Z)(Oi,Ui,qi,!1,null,"edcfe24a",null),zi=Li.exports,Fi=function(){var t=this,e=t._self._c;return e("div",[e(yt.Z,{attrs:{persistent:"",scrollable:""},model:{value:t.reportDialog,callback:function(e){t.reportDialog=e},expression:"reportDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" EQUIPMENT & MAINTENANCE READINESS "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.reportDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e(d.ZB,[e("h1",[e("center",[t._v(t._s(t.teamName))])],1),e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e(c.Z),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.equipment_tab,callback:function(e){t.equipment_tab=e},expression:"equipment_tab"}},[e(qt.Z,{attrs:{href:"#equip"},on:{click:function(e){return t.equip("equip")}}},[t._v("EQUIPMENT & MAINTENANCE")]),t.tableData.length>0?e(qt.Z,{attrs:{href:"#read"},on:{click:function(e){return t.read("read")}}},[t._v("REPORT READINESS")]):t._e()],1)],1),e(Lt.Z,{model:{value:t.equipment_tab,callback:function(e){t.equipment_tab=e},expression:"equipment_tab"}},[e($t.Z,{attrs:{value:"equip"}},[e(Et.Z,[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("Description")]),e("th",{attrs:{width:"20%"}},[t._v("Actual")]),e("th",{attrs:{width:"20%"}},[t._v("Serviceable")]),e("th",{directives:[{name:"show",rawName:"v-show",value:!t.submitted,expression:"!submitted"}],attrs:{width:"5%"}},[t._v("Action")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{style:"MOBILITY"!=a.SubMain&&"FIREPOWER"!=a.SubMain?"background-color: lightgray;vertical-align:middle;":"",attrs:{colspan:"3"}},[e("b",[t._v(t._s(a.Main))])])]),a.Details?t._l(JSON.parse(a.Details),(function(a,i){return e("tr",{key:i},[e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Item))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Actual?a.Actual:""))]),e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Service?a.Service:""))])])})):t._e()],2)}))],2)],1)],1)],1),e($t.Z,{attrs:{value:"read"}},[e(Et.Z,[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e("h2",[t._v("EQUIPMENT READINESS RATING")]),e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("MEE")]),e("th",[t._v("SE")]),e("th",[t._v("ERR")])])]),e("tbody",[e("tr",[e("td",{staticClass:"content"},[t._v(t._s(t.meEquipment)+"%")]),e("td",{staticClass:"content"},[t._v(t._s(t.seEquipment)+"%")]),e("td",{staticClass:"content"},[t._v(t._s(t.readinessRatingE)+"%")])])])])],1),e("br"),e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th"),e("th"),e("th",[t._v("TE")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("%")])])]),t._l(t.readinessTable,(function(a,i){return e("tbody",{key:i},[a.SubMain?t._e():e("tr",[e("td",[t._v(t._s(a.Main))])]),a.SubMain?e("tr",[e("td",[t._v(t._s("MOBILITY"!=a.SubMain&&"FIREPOWER"!=a.SubMain?a.Main:""))]),e("td",[t._v(t._s("MOBILITY"==a.SubMain||"FIREPOWER"==a.SubMain?a.Main:""))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(t.calculateActual(a.Details)))]),e("td",[t._v(t._s(t.itemPercentage(a.Required,t.calculateActual(a.Details)))+"%")])]):t._e(),a.Priority||t.readinessTable[i+1]&&!t.readinessTable[i+1].Priority?t._e():[e("tr",[e("td"),e("td",{staticClass:"content"},[t._v("Total")]),e("td",{staticClass:"content"},[t._v(t._s(a.total))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.totalPrimaryActual:t.totalSecondaryActual))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.averagePrimary:t.averageSecondary)+"%")])]),e("tr",[e("td"),e("td",{staticClass:"content",attrs:{colspan:"3"}},[t._v(t._s(t.remarks(a)))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.meEquipment:t.seEquipment)+"%")])])]],2)}))],2)],1)],1),e(z.Z,{attrs:{cols:"12",md:"6",lg:"6",xl:"6"}},[e("h2",[t._v("MAINTENANCE READINESS RATING")]),e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("MEE")]),e("th",[t._v("SE")]),e("th",[t._v("MRR")])])]),e("tbody",[e("tr",[e("td",{staticClass:"content"},[t._v(t._s(t.meEquipmentM)+"%")]),e("td",{staticClass:"content"},[t._v(t._s(t.seEquipmentM)+"%")]),e("td",{staticClass:"content"},[t._v(t._s(t.readinessRatingM)+"%")])])])])],1),e("br"),e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th"),e("th"),e("th",[t._v("ONHAND")]),e("th",[t._v("ACTUAL")]),e("th",[t._v("%")])])]),t._l(t.readinessTable,(function(a,i){return e("tbody",{key:i},[a.SubMain?t._e():e("tr",[e("td",[t._v(t._s(a.Main))])]),a.SubMain?e("tr",[e("td",[t._v(t._s("MOBILITY"!=a.SubMain&&"FIREPOWER"!=a.SubMain?a.Main:""))]),e("td",[t._v(t._s("MOBILITY"==a.SubMain||"FIREPOWER"==a.SubMain?a.Main:""))]),e("td",[t._v(t._s(t.calculateActual(a.Details)))]),e("td",[t._v(t._s(t.calculateService(a.Details)))]),e("td",[t._v(t._s(t.itemPercentage(t.calculateActual(a.Details),t.calculateService(a.Details)))+"%")])]):t._e(),a.Priority||t.readinessTable[i+1]&&!t.readinessTable[i+1].Priority?t._e():[e("tr",[e("td",{staticClass:"content"}),e("td",{staticClass:"content"},[t._v("Total")]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.totalPrimaryActual:t.totalSecondaryActual))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.totalPrimaryService:t.totalSecondaryService))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.averagePrimaryM:t.averageSecondaryM)+"%")])]),e("tr",[e("td",{staticClass:"content"}),e("td",{staticClass:"content",attrs:{colspan:"3"}},[t._v(t._s(t.remarks(a)))]),e("td",{staticClass:"content"},[t._v(t._s("primary"==a.Info?t.meEquipmentM:t.seEquipmentM)+"%")])])]],2)}))],2)],1)],1)],1),e(c.Z),e("br"),e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])])])})),0)],1)],1)],1)],1)],1)],1)],1)],1)},Bi=[],Yi={name:"EquipmentComponent",components:{},data:()=>({equipment_tab:"equip",tableData:[],reportDialog:!1,generateDate:null,id:null,team:null,teamName:null,year:A()().year(),rules:{required:[t=>!!t||"Field is required"],existing:[t=>"1"!==t||"Value '1' is not accepted"]},snackbar:{show:!1,message:null,color:null,icon:null},timeout:1500,monthnow:A()().format("YYYY-MM"),totalActual:0,totalService:0,percentage:0}),methods:{async openDialog(t){this.generateDate=t.Month,this.team=t.UnitTeamCode,this.teamName=t.UnitTeamName,this.reportDialog=!0,this.generate(),await this.$store.dispatch("diplayRemarks")},generate(){k()({method:"post",url:`${this.$baseUrl}api/getEquipment`,data:{Team:this.team,Month:this.generateDate}}).then((t=>{200==t.status&&(this.tableData=t.data,this.$store.state.teamData=this.team,this.$store.state.monthData=this.generateDate)}))},equip(t){this.equipment_tab=t},read(t){this.equipment_tab=t,this.$store.dispatch("diplayRemarks","equipment")},checkRequired(t,e){return t<e&&(alert("Error: The total value of Actual is greater than the Required Value"),!0)},calculateActual(t){return this.totalActual=JSON.parse(t).reduce(((t,e)=>Number(t)+Number(e.Actual)),0)},calculateService(t){return this.totalService=JSON.parse(t).reduce(((t,e)=>Number(t)+Number(e.Service)),0)},itemPercentage(t,e){let a;return a=e/t*100,this.percentage=a?this.roundUpValue(a):0},submitData(t,e){this.$store.dispatch("diplayRemarks","equipment"),this.$store.dispatch("getQuestion","Equipment"),this.$refs.RemarksDialog.openDialog(t,e,"equipment")},remarks(t){let e;return e="primary"==t.Info?"MISSION ESSENTIAL EQUIPMENT (80%)":"SECONDARY EQUIPMENT",e},roundUpValue(t){const e=Math.round(100*t)/100;return e.toFixed(2)}},computed:{...(0,T.rn)(["teamItems","psgTable","remarksData"]),readinessTable(){return this.tableData.length>0?this.tableData.reduce(((t,e)=>{let a=t.findIndex((t=>t.Info==e.Info));if(-1==a){let a={...e};a.totalRequired=Number(a.Required),a.Priority=e.Info,t.push(a)}else t[a].totalRequired+=Number(e.Required),e.total=t[a].totalRequired,t.push(e);return t}),[]):[]},totalPrimaryActual(){let t=0;for(const e of this.readinessTable)"primary"==e.Info&&(t+=this.calculateActual(e.Details));return t},totalSecondaryActual(){let t=0;for(const e of this.readinessTable)"secondary"==e.Info&&(t+=this.calculateActual(e.Details));return t},totalPrimaryService(){let t=0;for(const e of this.readinessTable)"primary"==e.Info&&(t+=this.calculateService(e.Details));return t},totalSecondaryService(){let t=0;for(const e of this.readinessTable)"secondary"==e.Info&&(t+=this.calculateService(e.Details));return t},averagePrimary(){let t=0,e=0;for(const a of this.readinessTable)if(a.SubMain&&"primary"==a.Info){let i=Number(this.itemPercentage(a.Required,this.calculateActual(a.Details)));i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averageSecondary(){let t=0,e=0;for(const a of this.readinessTable)if(a.SubMain&&"secondary"==a.Info){let i=Number(this.itemPercentage(a.Required,this.calculateActual(a.Details)));i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averagePrimaryM(){let t=0,e=0;for(const a of this.readinessTable)if(a.SubMain&&"primary"==a.Info){let i=Number(this.itemPercentage(this.calculateActual(a.Details),this.calculateService(a.Details)));i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averageSecondaryM(){let t=0,e=0;for(const a of this.readinessTable)if(a.SubMain&&"secondary"==a.Info){let i=Number(this.itemPercentage(this.calculateActual(a.Details),this.calculateService(a.Details)));i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},meEquipment(){let t=.8*this.averagePrimary;return this.roundUpValue(t)},seEquipment(){let t=.2*this.averageSecondary;return this.roundUpValue(t)},meEquipmentM(){let t=.8*this.averagePrimaryM;return this.roundUpValue(t)},seEquipmentM(){let t=.2*this.averageSecondaryM;return this.roundUpValue(t)},readinessRatingE(){return Number(this.meEquipment)+Number(this.seEquipment)},readinessRatingM(){return Number(this.meEquipmentM)+Number(this.seEquipmentM)},formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},submitted(){return this.tableData.length>0?this.tableData.find((t=>"1"==t.Submit)):0},unitName(){let t;return this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t},yearItems(){const t=[],e=A()().year(),a=e+5;for(let i=2020;i<=a;i++)t.push(i);return t}},mounted(){this.$store.dispatch("getTeam")},watch:{tableData(t){t&&this.$store.dispatch("getPsgTable")},trainingTableUpdate(t){t&&this.getTrainingData()}}},Gi=Yi,Qi=(0,Z.Z)(Gi,Fi,Bi,!1,null,null,null),ji=Qi.exports,Hi={components:{ReportPersonnelDialog:Mi,ReportTrainingDialog:zi,ReportEquipmentDialog:ji},name:"ReportComponent",data:()=>({reportRadio:"report",generateMonthDialog:!1,generateDate:null,itemsSubmit:[{text:"Submitted",value:"1"},{text:"Not Yet Submit",value:"2"}],submit:null,report:null,unit:null,tempSubmit:[],overlay:!1,departmentItems:[]}),methods:{getDepartment(){k()({method:"get",url:`${this.$baseUrl}api/getDepartmentListAdmin`}).then((t=>{this.departmentItems=t.data}))},view(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/getSubmitted`,data:{Month:this.generateDate,Submit:this.submit,Report:this.report.toLowerCase(),Unit:this.unit}}).then((t=>{this.tempSubmit=t.data,this.overlay=!1}))},unlocked(t){const e=window.confirm("Are you sure you want to unlock?");e&&k()({method:"post",url:`${this.$baseUrl}api/getUnlocked`,data:{Team:t.UnitTeamCode,Month:t.Month,Table:t.Table}}).then((t=>{200==t.status&&this.view()}))},async viewReport(t){this.$store.state.monthData=await t.Month,this.$store.state.teamData=await t.UnitTeamCode,"Personnel"==this.report?await this.$refs.ReportPersonnelDialog.openDialog(t):"Training"==this.report?await this.$refs.ReportTrainingDialog.openDialog(t):"Equipment"==this.report&&await this.$refs.ReportEquipmentDialog.openDialog(t)}},computed:{...(0,T.rn)(["teamItems"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},itemsReport(){let t,e=this.$store.state.user.office;return t="T12"==e?["Personnel"]:"15"==e?["Equipment","Maintenance","Facility"]:"T19"==e?["Training"]:["Personnel","Training","Equipment","Maintenance","Facility"],t},submitTable(){return!(!this.tempSubmit||!this.submit)&&this.tempSubmit.reduce(((t,e)=>("1"===this.submit?"5"===e.Submit&&t.push(e):"5"!==e.Submit&&t.push(e),t)),[])}},watch:{generateDate(t){t&&this.getDepartment()},report(t){t||(this.tempSubmit=[])}},mounted(){this.getDepartment()}},Vi=Hi,Wi=(0,Z.Z)(Vi,Ai,Ni,!1,null,null,null),Ki=Wi.exports,Ji=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("UPDATE TRAINING")])],1),e(c.Z),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(qt.Z,{attrs:{href:"#tab1"},on:{click:function(e){return t.tab1("tab1")}}},[t._v("MET")]),e(qt.Z,{attrs:{href:"#tab2"},on:{click:function(e){return t.tab2("tab2")}}},[t._v("ACTIVITY")])],1)],1),e("br"),e(Lt.Z,{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e($t.Z,{attrs:{value:"tab1"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",cl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[e("center",[t._v("CONTROL PANEL")])],1),e("br"),e(d.ZB,[e(Dt.Z,{ref:"add",on:{submit:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required,clearable:""},on:{change:function(e){return t.getDepartment()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(vt.Z,{attrs:{label:"Department","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required,clearable:!!t.category},on:{change:function(e){return t.getSection()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),e(vt.Z,{attrs:{label:"Unit","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required,clearable:!(!t.category||!t.department)},on:{change:function(e){return t.getTeam()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}),"CA01"==t.category?e(vt.Z,{attrs:{label:"Sub Unit","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required,clearable:!!(t.category&&t.department&&t.section)},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}):t._e(),e(vt.Z,{attrs:{label:"Select Year",dense:"",outlined:"",items:t.year},on:{change:function(e){return t.getTable()}},model:{value:t.selectedYear,callback:function(e){t.selectedYear=e},expression:"selectedYear"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:("CA01"==t.category&&t.team&&t.selectedYear||"CA01"!=t.category&&t.section&&t.selectedYear)&&0==t.tableData.length,expression:"(category == 'CA01' && team && selectedYear || category != 'CA01' && section && selectedYear) && tableData.length == 0"}]},[e("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".csv"},on:{change:t.handleFileSelect}}),e(l.Z,{attrs:{color:"success",dark:"",block:"",medium:""},on:{click:function(e){return t.upload()}}},[t._v("UPLOAD")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0,expression:"tableData.length > 0"}]},[e(l.Z,{attrs:{color:"error",dark:"",block:"",medium:""},on:{click:function(e){return t.deleteTable("training")}}},[t._v("DELETE")])],1)],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",xl:"9",lg:"9"}},[e(o.Z,{attrs:{elevation:"3"}},[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("Mission Essential Task")]),e("th",[t._v("Quarter1")]),e("th",[t._v("Quarter2")]),e("th",[t._v("Quarter3")]),e("th",[t._v("Quarter4")])])]),e("tbody",t._l(t.tableData,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Met))]),e("td",[t._v(t._s(a.Quarter1))]),e("td",[t._v(t._s(a.Quarter2))]),e("td",[t._v(t._s(a.Quarter3))]),e("td",[t._v(t._s(a.Quarter4))])])})),0)])],1)],1)],1)],1),e($t.Z,{attrs:{value:"tab2"}},[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e(Et.Z,[e("div",[e("br"),e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required,clearable:""},on:{change:function(e){return t.getDepartment()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(vt.Z,{attrs:{label:"Department","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required,clearable:!!t.category},on:{change:function(e){return t.getSection()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),e(vt.Z,{attrs:{label:"Unit","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required,clearable:!(!t.category||!t.department)},on:{change:function(e){return t.getTeam()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}),"CA01"==t.category?e(vt.Z,{attrs:{label:"Sub Unit","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required,clearable:!!(t.category&&t.department&&t.section)},on:{change:function(e){t.getTable(),t.changeTeam()}},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}):t._e(),e(vt.Z,{attrs:{label:"Select Year",dense:"",outlined:"",items:t.year},on:{change:function(e){return t.getMetTable()}},model:{value:t.selectedYear,callback:function(e){t.selectedYear=e},expression:"selectedYear"}})],1),e("v-div",{directives:[{name:"show",rawName:"v-show",value:t.selectedYear&&0==t.metTable.length,expression:"selectedYear && metTable.length == 0"}]},[e("input",{ref:"fileInput",staticClass:"file-input",attrs:{block:"",type:"file",accept:".csv"},on:{change:t.handleFileSelect}}),e(l.Z,{attrs:{color:"success",large:"",block:""},on:{click:function(e){return t.uploadActivity()}}},[t._v("UPLOAD")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.metTable.length>0,expression:"metTable.length > 0"}]},[e(l.Z,{attrs:{color:"error",dark:"",block:"",medium:""},on:{click:function(e){return t.deleteTable("training_met")}}},[t._v("DELETE")])],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",xl:"9",lg:"9"}},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.metTable.length>0,expression:"metTable.length > 0"}]},[e(Mt.Z,[e("thead",[e("tr",[e("th",[t._v("ACTIVITY FOR YEAR "+t._s(this.selectedYear))]),e("th",[t._v("UpdatedDate")]),e("th",[t._v("UpdatedBy")])])]),e("tbody",t._l(t.metTable,(function(a,i){return e("tr",{key:i},[e("td",{staticStyle:{"text-align":"left !important"}},[t._v(t._s(a.Met))]),e("td",[t._v(t._s(a.UpdatedDate))]),e("td",[t._v(t._s(a.UpdatedBy))])])})),0)])],1)])],1)],1)],1),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)},Xi=[],tn=a(7460),en=a.n(tn),an=a(5409),nn=a.n(an),rn={data(){return{category:null,categoryName:null,categoryItems:[],division:null,department:null,newDepartmentName:null,departmentItems:[],section:null,newSectionName:null,sectionItems:[],team:null,newTeamName:null,teamItems:[],tableData:[],rules:{required:[t=>!!t||"Field is required"]},tempFile:[],uploadFile:[],overlay:!1,tab:"tab1",selectedYear:null,metTable:[]}},methods:{tab1(t){this.tab=t},tab2(t){this.tab=t,this.getDepartment()},getCategory(){this.tableData=[],this.department=null,this.section=null,this.team=null,k()({method:"get",url:`${this.$baseUrl}api/getCategory`}).then((t=>{this.categoryItems=t.data}))},getDepartment(){this.tableData=[],this.section=null,this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getDepartment`,data:{data:this.category,list:this.departmentRadio}}).then((t=>{this.departmentItems=t.data}))},getSection(){this.tableData=[],this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getSection`,data:{data:this.department,list:this.sectionRadio}}).then((t=>{this.sectionItems=t.data}))},getTeam(){this.tableData=[],k()({method:"post",url:`${this.$baseUrl}api/getTeam`,data:{data:this.section,list:this.radioTO}}).then((t=>{this.teamItems=t.data}))},handleFileSelect(t){const e=t.target.files[0],a=new FileReader;a.onload=t=>{const e=t.target.result,a=en().parse(e,{header:!0,encoding:"UTF-8"}),i=a.data,n=Object.keys(i[0]);for(let r=0;r<i.length;r++){const t=i[r],e={};for(let a=0;a<n.length;a++){let i=t[n[a]];e[n[a]]=i}this.tempFile.push(e)}console.log(this.tempFile,"data")},a.readAsText(e)},forUpload(t){for(let e=0;e<t.length-1;e++){const a=t[e];let i={Department:this.department,Section:this.section,Team:"CA01"==this.category?this.team:this.section,Met:a.met,Required1:a.quarter1?1:0,Required2:a.quarter2?1:0,Required3:a.quarter3?1:0,Required4:a.quarter4?1:0,Quarter1:a.quarter1,Quarter2:a.quarter2,Quarter3:a.quarter3,Quarter4:a.quarter4,UpdatedDate:A()().format("YYYY-MM-DD HH:mm:ss"),UpdatedBy:this.$store.state.user.name};this.uploadFile.push(i)}console.log(this.uploadFile,"this.uploadFile")},upload(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/insertTrainingReq`,data:{data:this.uploadFile}}).then((t=>{"success"==t.data&&(console.log(t.data),this.$refs.fileInput.value="",this.tempFile=[],this.getTable(),this.overlay=!1)}))},getTable(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/trainingTableReq`,data:{Team:"CA01"==this.category?this.team:this.section,Year:this.selectedYear}}).then((t=>{this.tableData=t.data,this.overlay=!1}))},uploadActivity(){const t=[];for(let e=0;e<this.tempFile.length;e++){const a=this.tempFile[e];let i={code:`ACT${this.selectedYear}${e}`,activity:a.activity,year:this.selectedYear,department:this.department,section:this.section,team:"D01"==this.department?this.team:this.section,name:this.user.name,time:A()().format("YYYY-MM-DD HH:mm:ss")};t.push(i)}k()({method:"post",url:`${this.$baseUrl}api/importActivity`,data:{data:t}}).then((t=>{200==t.status&&this.getMetTable()}))},getMetTable(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/getMetItems`,data:{year:this.selectedYear,team:"D01"==this.department?this.team:this.section}}).then((t=>{this.metTable=t.data,this.overlay=!1}))},changeTeam(){this.selectedYear=null,this.metTable=[]},deleteTable(t){const e=window.confirm("Are you sure you want to delete this information?");if(e){this.overlay=!0;let e={Table:t,Team:"D01"==this.department?this.team:this.section,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss"),Year:this.selectedYear,url:`${this.$baseUrl}api/deleteRequired`};return"training_met"==t?nn()(e,this.getMetTable):nn()(e,this.getTable)}}},computed:{year(){let t=[],e=2023;for(let a=e;a<2040;a++)t.push(a);return t},...(0,T.rn)(["user"])},watch:{tempFile(t){t&&this.forUpload(t)}},mounted(){this.getCategory()}},sn=rn,ln=(0,Z.Z)(sn,Ji,Xi,!1,null,"266a2940",null),on=ln.exports,dn=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("UPDATE TABLE EQUIPMENT")])],1),e(c.Z),e("br"),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",cl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[e("center",[t._v("CONTROL PANEL")])],1),e("br"),e(d.ZB,[e(Dt.Z,{ref:"add",on:{submit:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required,clearable:""},on:{change:function(e){return t.getDepartment()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(vt.Z,{attrs:{label:"Unit","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required,clearable:!!t.category},on:{change:function(e){return t.getSection()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),e(vt.Z,{attrs:{label:"Sub-Unit","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required,clearable:!(!t.category||!t.department)},on:{change:function(e){return t.getTeam()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}),"CA01"==t.category?e(vt.Z,{attrs:{label:"Office","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required,clearable:!!(t.category&&t.department&&t.section)},on:{change:function(e){return t.getTable()}},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:("CA01"==t.category&&t.team||"CA01"!=t.category&&t.section)&&0==t.tableData.length,expression:"(category == 'CA01' && team || category != 'CA01' && section) && tableData.length == 0"}]},[e("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".csv"},on:{change:t.handleFileSelect}}),e(l.Z,{attrs:{color:"success",dark:"",block:"",medium:""},on:{click:function(e){return t.upload()}}},[t._v("UPLOAD")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0,expression:"tableData.length > 0"}]},[e(l.Z,{attrs:{color:"error",dark:"",block:"",medium:""},on:{click:function(e){return t.deleteTable("equipment")}}},[t._v("DELETE")])],1)],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("Description")]),e("th",[t._v("Required")]),e("th",[t._v("Delete")])])]),e("tbody",t._l(t.tableData,(function(a,i){return e("tr",{key:i},[e("td",{style:a.Title?"font-weight:bold;text-align:left !important;":"text-align:left !important;"},[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[a.Title?t._e():e(l.Z,{attrs:{icon:""}},[e(h.Z,{attrs:{color:"error"}},[t._v("mdi-delete-outline")])],1)],1)])})),0)])],1)],1)],1),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)},cn=[],un={data(){return{category:null,categoryName:null,categoryItems:[],division:null,department:null,newDepartmentName:null,departmentItems:[],section:null,newSectionName:null,sectionItems:[],team:null,newTeamName:null,teamItems:[],tableData:[],rules:{required:[t=>!!t||"Field is required"]},tempFile:[],uploadFile:[],overlay:!1}},methods:{getCategory(){this.tableData=[],this.department=null,this.section=null,this.team=null,k()({method:"get",url:`${this.$baseUrl}api/getCategory`}).then((t=>{this.categoryItems=t.data}))},getDepartment(){this.tableData=[],this.section=null,this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getDepartment`,data:{data:this.category}}).then((t=>{this.departmentItems=t.data}))},getSection(){this.tableData=[],this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getSection`,data:{data:this.department}}).then((t=>{this.sectionItems=t.data}))},getTeam(){this.tableData=[],k()({method:"post",url:`${this.$baseUrl}api/getTeam`,data:{data:this.section}}).then((t=>{this.teamItems=t.data,"CA01"!=this.category&&this.getTable()}))},handleFileSelect(t){const e=t.target.files[0],a=new FileReader;let i="",n="";a.onload=t=>{const e=t.target.result,a=en().parse(e,{header:!0,encoding:"UTF-8"}),r=a.data,s=Object.keys(r[0]);for(let l=0;l<r.length;l++){const t=r[l],e={};for(let i=0;i<s.length;i++){let a=t[s[i]];e[s[i]]=a}let a={description:e.description,required:e.required?parseInt(e.required.replace(/,/g,""),10):"",category:null,sub:null};e.category?(a.category=e.category,i=e.category,n=""):a.category=i,e.sub?(a.sub=e.sub,n=e.sub):a.sub=n,""!==a.description.trim()&&this.tempFile.push(a)}console.log(this.tempFile,"data")},a.readAsText(e)},customSort(t,e){const a={MOBILITY:1,FIREPOWER:2,COMMUNICATIONS:3,MEDICAL:4,DENTAL:5,QUARTERMASTER:6};return a[t.category]-a[e.category]},upload(){this.overlay=!0;let t=[];this.tempFile.forEach((e=>{e.description&&(e.Title=e.required?"":"1",e.Sub=e.required?e.sub:"",e.Info="FIREPOWER"==e.category||"MOBILITY"==e.category||"COMMUNICATIONS"==e.category?"primary":"secondary",t.push(e))})),t.sort(this.customSort),k()({method:"post",url:`${this.$baseUrl}api/requiredEquipment`,data:{department:this.department,section:this.section,team:"CA01"!=this.category?this.section:this.team,date:A()().format("YYYY-MM-DD HH:mm:ss"),name:this.$store.state.user.name,data:t}}).then((t=>{200==t.status&&(this.getTable(),this.overlay=!1)}))},getTable(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/requiredEquipmentTable`,data:{department:this.department,section:this.section,team:"CA01"!=this.category?this.section:this.team}}).then((t=>{this.tableData=t.data,this.overlay=!1}))},deleteTable(t){const e=window.confirm("Are you sure you want to delete this information?");if(e){this.overlay=!0;let e={Table:t,Team:"D01"==this.department?this.team:this.section,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss"),Year:A()().format("YYYY"),url:`${this.$baseUrl}api/deleteRequired`};return nn()(e,this.getTable)}}},computed:{...(0,T.rn)(["user"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null}},mounted(){this.getCategory()},watch:{}},hn=un,mn=(0,Z.Z)(hn,dn,cn,!1,null,"46ac4e14",null),pn=mn.exports,gn=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("UPDATE TABLE FACILITY")])],1),e(c.Z),e("br"),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",cl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[e("center",[t._v("CONTROL PANEL")])],1),e("br"),e(d.ZB,[e(Dt.Z,{ref:"add",on:{submit:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required,clearable:""},on:{change:function(e){return t.getDepartment()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(vt.Z,{attrs:{label:"Unit","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required,clearable:!!t.category},on:{change:function(e){return t.getSection()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),e(vt.Z,{attrs:{label:"Sub-Unit","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required,clearable:!(!t.category||!t.department)},on:{change:function(e){return t.getTeam()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}),"CA01"==t.category?e(vt.Z,{attrs:{label:"Office","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required,clearable:!!(t.category&&t.department&&t.section)},on:{change:function(e){return t.getTable()}},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}):t._e(),e("div",{directives:[{name:"show",rawName:"v-show",value:("CA01"==t.category&&t.team||"CA01"!=t.category&&t.section)&&0==t.tableData.length,expression:"(category == 'CA01' && team || category != 'CA01' && section) && tableData.length == 0"}]},[e("input",{ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".csv, .xls, .xlsx"},on:{change:t.handleFileSelect}}),e(l.Z,{attrs:{color:"success",dark:"",block:"",medium:""},on:{click:function(e){return t.upload()}}},[t._v("UPLOAD")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0,expression:"tableData.length > 0"}]},[e(l.Z,{attrs:{color:"error",dark:"",block:"",medium:""},on:{click:function(e){return t.deleteTable("facility")}}},[t._v("DELETE")])],1)],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":""}},[e("thead",[e("tr",[e("th",[t._v("Description")]),e("th",[t._v("Required sq.m.")])])]),e("tbody",t._l(t.tableData,(function(a,i){return e("tr",{key:i},[e("td",{style:a.Detail==a.Info?"font-weight:bold;text-align:left !important;background-color:lightgrey":"text-align:left !important;"},[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))])])})),0)])],1)],1)],1),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)},fn=[],bn={data(){return{category:null,categoryName:null,categoryItems:[],division:null,department:null,newDepartmentName:null,departmentItems:[],section:null,newSectionName:null,sectionItems:[],team:null,newTeamName:null,teamItems:[],tableData:[],rules:{required:[t=>!!t||"Field is required"]},tempFile:[],uploadFile:[],overlay:!1}},methods:{getCategory(){this.tableData=[],this.department=null,this.section=null,this.team=null,k()({method:"get",url:`${this.$baseUrl}api/getCategory`}).then((t=>{this.categoryItems=t.data}))},getDepartment(){this.tableData=[],this.section=null,this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getDepartment`,data:{data:this.category}}).then((t=>{this.departmentItems=t.data}))},getSection(){this.tableData=[],this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getSection`,data:{data:this.department}}).then((t=>{this.sectionItems=t.data}))},getTeam(){this.tableData=[],k()({method:"post",url:`${this.$baseUrl}api/getTeam`,data:{data:this.section}}).then((t=>{this.teamItems=t.data,"CA01"!=this.category&&this.getTable()}))},handleFileSelect(t){const e=t.target.files[0],a=new FileReader;a.onload=t=>{const e=t.target.result,a=en().parse(e,{header:!0,encoding:"UTF-8"}),i=a.data,n=Object.keys(i[0]);for(let r=0;r<i.length;r++){const t=i[r],e={};for(let a=0;a<n.length;a++){let i=t[n[a]];e[n[a]]=i}this.tempFile.push(e)}},a.readAsText(e)},upload(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/requiredFacility`,data:{department:this.department,section:this.section,team:"CA01"!=this.category?this.section:this.team,date:A()().format("YYYY-MM-DD HH:mm:ss"),name:this.$store.state.user.name,data:this.tempFile}}).then((t=>{200==t.status&&this.getTable()}))},getTable(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/requiredFacilityTable`,data:{department:this.department,section:this.section,team:"CA01"!=this.category?this.section:this.team}}).then((t=>{this.tableData=t.data,this.overlay=!1}))},deleteTable(t){const e=window.confirm("Are you sure you want to delete this information?");if(e){this.overlay=!0;let e={Table:t,Team:"D01"==this.department?this.team:this.section,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss"),Year:A()().format("YYYY"),url:`${this.$baseUrl}api/deleteRequired`};return nn()(e,this.getTable)}}},computed:{...(0,T.rn)(["user"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null}},mounted(){this.getCategory()},watch:{}},vn=bn,yn=(0,Z.Z)(vn,gn,fn,!1,null,"6f0e4200",null),Dn=yn.exports,xn=a(343),Rn=a(9884),_n=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("User Information")])],1),e(c.Z),e("br"),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[e("center",[t._v("CONTROL PANEL")])],1),e(Et.Z,[e("br"),e(F.Z,{staticClass:"d-flex justify-center"},[e(xi.Z,{directives:[{name:"show",rawName:"v-show",value:!t.edit,expression:"!edit"}],attrs:{row:""},model:{value:t.userRadio,callback:function(e){t.userRadio=e},expression:"userRadio"}},[e(Di.Z,{attrs:{label:"Add",value:"add"}}),e(Di.Z,{attrs:{label:"Search",value:"search"}})],1)],1),e(Dt.Z,{ref:"add",on:{submit:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required,clearable:""},on:{change:function(e){t.getDepartment(),t.searchUser()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}),e(vt.Z,{attrs:{label:"Unit","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required,clearable:""},on:{change:function(e){t.getSection(),t.searchUser()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}),e(vt.Z,{attrs:{label:"Sub-Unit","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required,clearable:""},on:{change:function(e){t.getTeam(),t.searchUser()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}),"CA01"==t.category?e(vt.Z,{attrs:{label:"Offices","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required,clearable:""},on:{change:function(e){return t.searchUser()}},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}):t._e(),e(Rt.Z,{attrs:{label:"Name",outlined:"",dense:"",rules:t.rules.required,clearable:""},on:{click:function(e){!t.name&&"add"==t.userRadio&&(t.dialogAddName=!0)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),e(vt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.userRadio,expression:"userRadio == 'add'"}],attrs:{label:"Unit Approver",items:t.approverItems,"item-text":"text","item-value":"value",outlined:"",dense:"",rules:t.rules.required,clearable:""},model:{value:t.approver,callback:function(e){t.approver=e},expression:"approver"}}),e(vt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.userRadio,expression:"userRadio == 'add'"}],attrs:{label:"Office Admin",items:t.restrictionItems,"item-text":"text","item-value":"value",outlined:"",dense:"",rules:t.rules.required,clearable:""},model:{value:t.restriction,callback:function(e){t.restriction=e},expression:"restriction"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.userRadio,expression:"userRadio == 'add'"}],attrs:{label:"Email Address",outlined:"",dense:"",rules:t.rules.required},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.userRadio,expression:"userRadio == 'add'"}],attrs:{label:"Username",outlined:"",dense:"",rules:t.rules.required,maxlength:"10",hint:"Maximum of 10 characters"},on:{blur:function(e){return t.generatePassword()}},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.userRadio,expression:"userRadio == 'add'"}],attrs:{label:"Password",outlined:"",dense:"",rules:t.rules.required,maxlength:"6",hint:"Maximum of 6 characters"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.userRadio&&!t.edit,expression:"userRadio == 'add' && !edit"}],attrs:{block:"",color:"success",type:"submit"}},[t._v("ADD")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:t.edit,expression:"edit"}],attrs:{block:"",color:"success",type:"submit"}},[t._v("SAVE")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:"search"==t.userRadio,expression:"userRadio == 'search'"}],attrs:{block:"",color:"primary"},on:{click:function(e){return t.searchUser()}}},[t._v("SEARCH")])],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("No.")]),e("th",[t._v("Unit")]),e("th",[t._v("Sub-Unit")]),e("th",[t._v("Office")]),e("th",[t._v("Name")]),e("th",[t._v("Designation")]),e("th",[t._v("Username")]),e("th",[t._v("Password")]),e("th",[t._v("No")]),e("th",[t._v("AccessRight")]),e("th",[t._v("Logs")]),e("th",[t._v("Actions")])])]),e("tbody",t._l(t.tableData,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(i+1))]),e("td",[t._v(t._s(a.UnitDepartmentAbr))]),e("td",[t._v(t._s(a.UnitSectionName.toUpperCase()))]),e("td",[t._v(t._s(a.UnitTeamName))]),e("td",[t._v(t._s(a.Name))]),e("td",[t._v(t._s(t.designation(a)))]),e("td",[t._v(t._s(a.Username))]),e("td",[t._v(t._s(a.Password))]),e("td",[t._v(t._s(a.Office))]),e("td",{staticStyle:{"text-align":"center"}},[e(Rn.Z,{attrs:{value:a.id,inset:""},on:{change:function(e){return t.addRights(a)}},model:{value:t.rights,callback:function(e){t.rights=e},expression:"rights"}})],1),e("td",[e(l.Z,{attrs:{icon:""}},[e(h.Z,{attrs:{color:"success"},on:{click:function(e){t.viewLogs(JSON.parse(a.Log),a.Name)}}},[t._v("mdi-eye")])],1)],1),e("td",[e(l.Z,{attrs:{icon:""},on:{click:function(e){return t.dialogActionOpen(a.id)}}},[e(h.Z,{attrs:{color:"warning"}},[t._v("mdi-pencil-circle-outline")])],1)],1)])})),0)]),e(Zt.Z,{attrs:{value:t.overlay,absolute:""}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)],1),e(yt.Z,{attrs:{persistent:"",width:"600px"},model:{value:t.logDialog,callback:function(e){t.logDialog=e},expression:"logDialog"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(t._s(t.dialogName)+" "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.logDialog=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e("br"),e(d.ZB,[e(Mt.Z,[e("thead",[e("tr",[e("th",[t._v("LOGIN")]),e("th",[t._v("LOGOUT")])])]),e("tbody",t._l(t.logTable,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Login))]),e("td",[t._v(t._s(a.Logout))])])})),0)])],1)],1)],1),e(yt.Z,{attrs:{width:"600px",persistent:""},model:{value:t.dialogAddName,callback:function(e){t.dialogAddName=e},expression:"dialogAddName"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v("Name Details "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.dialogAddName=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e(d.ZB,[e("br"),e(Dt.Z,{ref:"addName",on:{submit:function(e){return e.preventDefault(),t.addName.apply(null,arguments)}}},[e("div",{staticClass:"d-flex align-center"},[e(F.Z,[e(xn.Z,{staticClass:"custom-select",attrs:{dense:"",outlined:"",label:"Rank",rules:t.rules.required,items:t.rankItems,"item-text":"Rank","item-value":"Rank"},model:{value:t.selectRank,callback:function(e){t.selectRank=e},expression:"selectRank"}}),e(Rt.Z,{attrs:{label:"Name",dense:"",outlined:"",rules:t.rules.required},model:{value:t.nameData,callback:function(e){t.nameData=e},expression:"nameData"}}),e(xn.Z,{staticClass:"custom-select",attrs:{label:"Service",dense:"",outlined:"",rules:t.rules.required,items:t.serviceItems},model:{value:t.selectService,callback:function(e){t.selectService=e},expression:"selectService"}}),e(l.Z,{attrs:{type:"submit",color:"success"}},[t._v("SAVE")])],1)],1)])],1)],1)],1),e(yt.Z,{attrs:{persistent:"",width:"250px"},model:{value:t.dialogAction,callback:function(e){t.dialogAction=e},expression:"dialogAction"}},[e(o.Z,[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v("Actions "),e(x.Z),e(l.Z,{attrs:{icon:""},on:{click:function(e){t.dialogAction=!1}}},[e(h.Z,{attrs:{color:"white"}},[t._v("mdi-close-circle-outline")])],1)],1),e(d.ZB,[e("br"),e(F.Z,[e(l.Z,{attrs:{block:"",color:"warning",dark:""},on:{click:function(e){return t.editUser(t.idValue)}}},[t._v("EDIT")]),e(l.Z,{staticClass:"mt-3",attrs:{block:"",color:"error",dark:""},on:{click:function(e){return t.deleteUser(t.idValue)}}},[t._v("DELETE")])],1)],1)],1)],1)],1)},Sn=[],Cn={data(){return{userRadio:"add",category:null,categoryName:null,categoryItems:[],division:null,department:null,departmentItems:[],section:null,newSectionName:null,sectionItems:[],team:null,newTeamName:null,teamItems:[],service:null,approver:null,restriction:null,restrictionItems:[{text:"NO RESTRICTION",value:"-"},{text:"1-PERSONNEL",value:1},{text:"8-TRAINING",value:8},{text:"4-EQUIPT&FAC",value:4},{text:"6-COMMUNICATION",value:6},{text:"3-ALL",value:3}],tableData:[],name:null,username:null,password:null,email:null,rules:{required:[t=>!!t||"Field is required"]},overlay:!1,rights:[],logDialog:!1,dialogName:null,dialogAddName:!1,logTable:[],selectRank:null,selectService:null,nameData:null,dialogAction:!1,idValue:null,edit:!1}},methods:{decryptData(t){const e=atob(t);return e},getCategory(){this.tableData=[],this.department=null,this.section=null,this.team=null,k()({method:"get",url:`${this.$baseUrl}api/getCategory`}).then((t=>{this.categoryItems=t.data}))},getDepartment(){this.tableData=[],this.section=null,this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getDepartment`,data:{data:this.category,list:this.departmentRadio}}).then((t=>{this.departmentItems=t.data}))},getSection(){this.tableData=[],this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getSection`,data:{data:this.department,list:this.sectionRadio}}).then((t=>{this.sectionItems=t.data}))},getTeam(){this.tableData=[],k()({method:"post",url:`${this.$baseUrl}api/getTeam`,data:{data:this.section,list:this.radioTO}}).then((t=>{this.teamItems=t.data}))},generatePassword(){const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let e="";for(let a=0;a<7;a++){const a=Math.floor(Math.random()*t.length);e+=t[a]}return this.username?this.password=e:this.password=null,this.password},add(){this.$refs.add.validate()&&(this.edit?k()({method:"post",url:`${this.$baseUrl}api/updateUser`,data:{id:this.idValue,category:this.category,department:this.department,section:this.section,team:"CA01"==this.category?this.team:null,name:this.name.toUpperCase(),approver:this.approver,email:this.email,restriction:this.restriction,username:this.username,password:this.password,updatedBy:this.$store.state.user.name}}).then((t=>{200==t.status&&(this.$refs.add.reset(),this.edit=!1,alert("The user was updated successfully!"),this.overlay=!1,this.getUser())})):k()({method:"post",url:`${this.$baseUrl}api/insertUser`,data:{category:this.category,department:this.department,section:this.section,team:"CA01"==this.category?this.team:null,name:this.name.toUpperCase(),approver:this.approver,username:this.username,password:this.password,email:this.email,restriction:this.restriction,updatedBy:this.$store.state.user.name}}).then((t=>{200==t.status&&(this.name=null,this.username=null,this.password=null,this.getUser())})))},searchUser(){k()({method:"post",url:`${this.$baseUrl}api/searchUser`,data:{category:this.category,department:this.department,section:this.section,team:this.team,name:this.name}}).then((t=>{if(200==t.status){this.tableData=[];const e=this.decryptData(t.data),a=JSON.parse(e);a.filter((t=>{"ceo"!=t.Username&&this.tableData.push(t)}))}}))},getUser(){k()({method:"post",url:`${this.$baseUrl}api/getUser`}).then((t=>{if(200==t.status){this.tableData=[];const e=this.decryptData(t.data),a=JSON.parse(e);a.filter((t=>{"ceo"!=t.Username&&this.tableData.push(t),t.AccessRight&&this.rights.push(t.id)}))}}))},addName(){this.$refs.addName.validate()&&(this.name=`${this.selectRank} ${this.nameData.toUpperCase()} ${this.selectService}`,this.dialogAddName=!1)},addRights(t){let e;e=t.AccessRight?null:1,k()({method:"post",url:`${this.$baseUrl}api/updateRights`,data:{id:t.id,addRights:e}}).then((async t=>{200==t.status&&this.getUser()}))},designation(t){return 1==t.Approver?"Encoder":2==t.Approver?"OIC":3==t.Approver?"D01"!=t.UnitDepartmentCode?"CHIEF OF STAFF":"EX-O":4==t.Approver?"DEPUTY":"D01"!=t.UnitDepartmentCode?"COMMANDER":t.UnitTeamAbr},viewLogs(t,e){this.dialogName=e,this.logDialog=!0;const a=[...t];this.logTable=a.sort(((t,e)=>new Date(e.Login)-new Date(t.Login)))},dialogActionOpen(t){this.dialogAction=!0,this.idValue=t},deleteUser(t){const e=confirm("Are you sure you want to delete?");e&&k()({method:"post",url:`${this.$baseUrl}api/deleteUser`,data:{id:t}}).then((t=>{200==t.status&&this.getUser()}))},editUser(t){const e=confirm("Are you sure you want to edit?");e&&(this.edit=!0,this.overlay=!0,console.log(t),k()({method:"post",url:`${this.$baseUrl}api/editUser`,data:{id:t}}).then((t=>{if(200==t.status){const e=this.decryptData(t.data),a=JSON.parse(e);this.idValue=a.id,this.name=a.Name,this.email=a.Email,this.username=a.Username,this.password=a.Password,this.dialogAction=!1}})))}},computed:{...(0,T.rn)(["rankItems","serviceItems"]),approverItems(){let t;return t=["T01","T02","T03"].includes(this.team)?[{text:"Encoder/Drafter",value:1},{text:"OIC",value:5}]:[{text:"Encoder/Drafter",value:1},{text:"OIC",value:2},{text:"EX-O/COS",value:3},{text:"DEPUTY",value:4},{text:"COMMANDER",value:5}],t}},mounted(){this.getCategory(),this.getUser()},watch:{category(t){t||this.getUser()},dialogAddName(t){t&&this.$store.dispatch("getRank")}}},Tn=Cn,wn=(0,Z.Z)(Tn,_n,Sn,!1,null,"4b0a6c64",null),An=wn.exports,Nn=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("INVENTORY TABLE")])],1),e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e(qt.Z,{attrs:{href:"#mobility",disabled:1!=t.user.rights&&!["T14","T15","T22"].includes(this.user.office)},on:{click:function(e){return t.mobilityTab("mobility")}}},[t._v("MOBILITY")]),e(qt.Z,{attrs:{href:"#weapon",disabled:1!=t.user.rights&&!["T14","T15"].includes(this.user.office)},on:{click:function(e){return t.weaponTab("weapon")}}},[t._v("WEAPON")]),e(qt.Z,{attrs:{href:"#communication",disabled:1!=t.user.rights&&!["T14","T15","T17"].includes(this.user.office)},on:{click:function(e){return t.commTab("communication")}}},[t._v("COMMUNICATIONS")]),e(qt.Z,{attrs:{href:"#medical",disabled:1!=t.user.rights&&!["T14","T15","T12"].includes(this.user.office)},on:{click:function(e){return t.medicalTab("medical")}}},[t._v("MEDICAL")]),e(qt.Z,{attrs:{href:"#dental",disabled:1!=t.user.rights&&!["T14","T15","T12"].includes(this.user.office)},on:{click:function(e){return t.dentalTab("dental")}}},[t._v("DENTAL")]),e(qt.Z,{attrs:{href:"#quartermaster",disabled:1!=t.user.rights&&!["T14","T15"].includes(this.user.office)},on:{click:function(e){return t.quarterTab("quartermaster")}}},[t._v("QUARTERMASTER")]),e(qt.Z,{attrs:{href:"#allCategory",disabled:1!=t.user.rights&&!["T14","T15"].includes(this.user.office)},on:{click:function(e){return t.allCategory("allCategory")}}},[t._v("ALL")])],1),e(c.Z),e("br"),e(Et.Z,[e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(vt.Z,{attrs:{label:"Unit",dense:"",outlined:"",items:t.addNewDepartment,"item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode"},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}})],1),e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"2",lg:"2",xl:"2"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")])],1),e(z.Z,{attrs:{cols:"12",md:"2",lg:"2",xl:"2"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:0==t.equipment.length},on:{click:function(e){return t.print()}}},[t._v("PRINT")])],1)],1)],1),e(Et.Z,[e(F.Z,{staticClass:"d-flex justify-center"},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:null!=t.totalMP,expression:"totalMP != null"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{rounded:"2",color:"yellow"}},[e(d.ZB,{staticStyle:{"text-align":"center"}},[e("p",{staticStyle:{"font-size":"20px","font-weight":"bold"}},[t._v("As of "+t._s(t.formattedDate))]),e("p",{staticStyle:{"font-size":"30px","font-weight":"bold"}},[t._v("TOTAL MANPOWER :"),e("span",{staticStyle:{color:"blue"}},[t._v(" "+t._s(t.totalMP))])])])],1)],1)],1),e(Lt.Z,{model:{value:t.tab,callback:function(e){t.tab=e},expression:"tab"}},[e($t.Z,{attrs:{value:"mobility"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T14","T15","T22"].includes(this.user.office),expression:"user.rights == 1 || ['T14','T15','T22'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("MOBILITY")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}}),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Item")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.mobility,(function(a,i){return e("tr",{key:i},[a.count>0?e("td",{staticStyle:{border:"solid lightgrey .5px"},attrs:{rowspan:a.count>1?a.count:1}},[t._v(t._s(a.Group))]):t._e(),e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobility.length>0,expression:"mobility.length > 0"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e($t.Z,{attrs:{value:"weapon"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T14","T15"].includes(this.user.office),expression:"user.rights == 1 || ['T14','T15'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("WEAPON")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}}),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Item")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.weapon,(function(a,i){return e("tr",{key:i},[a.count>0?e("td",{staticStyle:{border:"solid lightgrey .5px"},attrs:{rowspan:a.count>1?a.count:1}},[t._v(t._s(a.Group))]):t._e(),e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobility.length>0,expression:"mobility.length > 0"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e($t.Z,{attrs:{value:"communication"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T14","T15","T17"].includes(this.user.office),expression:"user.rights == 1 || ['T14','T15','T17'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("COMMUNICATIONS")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Item")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.communications,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobility.length>0,expression:"mobility.length > 0"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e($t.Z,{attrs:{value:"medical"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T12","T14","T15"].includes(this.user.office),expression:"user.rights == 1 || ['T12','T14','T15'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("MEDICAL")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Item")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.medical,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobility.length>0,expression:"mobility.length > 0"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e($t.Z,{attrs:{value:"dental"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T12","T14","T15"].includes(this.user.office),expression:"user.rights == 1 || ['T12','T14','T15'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("DENTAL")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Item")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.dental,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobility.length>0,expression:"mobility.length > 0"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e($t.Z,{attrs:{value:"quartermaster"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T14","T15"].includes(this.user.office),expression:"user.rights == 1 || ['T14','T15'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("QUARTERMASTER")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Item")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.quartermaster,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.mobility.length>0,expression:"mobility.length > 0"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1),e($t.Z,{attrs:{value:"allCategory"}},[e(z.Z,{directives:[{name:"show",rawName:"v-show",value:1==t.user.rights||["T14","T15"].includes(this.user.office),expression:"user.rights == 1 || ['T14','T15'].includes(this.user.office)"}],attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(o.Z,{attrs:{elevation:"4"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8"}},[t._v("ALL")]),e("br"),e(d.ZB,[e(Mt.Z,{attrs:{"fixed-header":"",height:"40vh"}},[e("thead",[e("tr",[e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Category")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Required")]),e("th",{staticStyle:{"background-color":"lightgrey !important"}},[t._v("Actual")])])]),e("tbody",t._l(t.allInventory,(function(a,i){return e("tr",{key:i},[e("td",[t._v(t._s(a.Detail))]),e("td",[t._v(t._s(a.Required))]),e("td",[t._v(t._s(a.Actual))])])})),0)])],1)],1)],1)],1)],1)],1),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1),e("InventoryPrint",{ref:"InventoryPrint",attrs:{department:t.department}})],1)},kn=[],En=function(){var t=this,e=t._self._c;return e("div")},In=[];Qt().vfs=jt.I.vfs;var Zn={props:{department:{type:String,default:null,required:!0}},data(){return{imageDataUrl:"",unit:null}},methods:{async print(t){"All"!=t.department?this.unit=this.$store.state.user.main:this.unit="D01",Promise.all([this.inventory(t)]).then((function(){alert("Files are printed!")}))},inventory(t){let e=[],a=[],i=[],n=[],r=[],s=[];t.mobility.forEach((t=>{let a=[{text:t.Detail||"",alignment:"center",fontSize:10,bold:!0},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];e.push(a)})),t.weapon.forEach((t=>{let e=[{text:t.Detail||"",alignment:"center",fontSize:10,bold:!0},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];a.push(e)})),t.communications.forEach((t=>{let e=[{text:t.Detail||"",alignment:"center",fontSize:10,bold:!0},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];i.push(e)})),t.medical.forEach((t=>{let e=[{text:t.Detail||"",alignment:"center",fontSize:10,bold:!0},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];n.push(e)})),t.dental.forEach((t=>{let e=[{text:t.Detail||"",alignment:"center",fontSize:10,bold:!0},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];r.push(e)})),t.quartermaster.forEach((t=>{let e=[{text:t.Detail||"",alignment:"center",fontSize:10,bold:!0},{text:t.Required||"",alignment:"center",fontSize:10},{text:t.Actual||"",alignment:"center",fontSize:10}];s.push(e)}));let l=[];t.assesment&&t.remarksData.forEach((t=>{if(t.Question){let e=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];l.push(e)}if(t.Remarks){let e=[{text:t.Remarks||"",alignment:"left",fontSize:10}];l.push(e)}}));let o={margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:this.encoder?this.encoder:"",alignment:"center",fontSize:this.encoder&&this.encoder.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:this.oic?this.oic:"",alignment:"center",fontSize:this.oic&&this.oic.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:this.commander?this.commander:"",alignment:"center",fontSize:this.commander&&this.commander.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]};const d=["Item","Required","Actual"],c={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0};let u={content:[],pageOrientation:"portait",styles:{tableHeader:c},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};"mobility"==t.tab&&u.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"All"==t.unit?null:"\n","All"==t.unit?null:{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"MOBILITY REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["*","*","*"],body:[d.map((t=>({text:t,style:"tableHeader"}))),...e],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:l}},{},{...o}),"weapon"==t.tab&&u.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"All"==t.unitName?null:{text:t.unitName,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"WEAPON REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["*","*","*"],body:[d.map((t=>({text:t,style:"tableHeader"}))),...a],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:l}},{},{...o}),"communication"==t.tab&&u.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"All"==t.unitName?null:{text:t.unitName,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"COMMUNICATIONS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["*","*","*"],body:[d.map((t=>({text:t,style:"tableHeader"}))),...i],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:l}},{},{...o}),"medical"==t.tab&&u.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"All"==t.unitName?null:{text:t.unitName,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"MEDICAL REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["*","*","*"],body:[d.map((t=>({text:t,style:"tableHeader"}))),...n],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:l}},{},{...o}),"dental"==t.tab&&u.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"All"==t.unitName?null:{text:t.unitName,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"DENTAL REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["*","*","*"],body:[d.map((t=>({text:t,style:"tableHeader"}))),...r],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:l}},{},{...o}),"quartermaster"==t.tab&&u.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"All"==t.unitName?null:{text:t.unitName,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"QUARTERMASTER REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["*","*","*"],body:[d.map((t=>({text:t,style:"tableHeader"}))),...s],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:l}},{},{...o}),Qt().createPdf(u).download("INVENTORY_REPORT.pdf")}},computed:{encoder(){let t,e=this.$store.state.signatories;return e.map((e=>{t=1==e.Approver&&e.Name==this.$store.state.user.name?e.Name:"N/A"})),t},oic(){let t,e=this.$store.state.signatories;return e.map((e=>{2==e.Approver&&(t=e.Name)})),t},commander(){let t,e=this.$store.state.signatories;return e.map((e=>{5==e.Approver&&(t=e.Name)})),t}},created(){},mounted(){},watch:{department(t){let e;e="All"==t?"D01":t;let i=a(8719)(`./${e}.png`);const n=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};n(i,(t=>{this.imageDataUrl=t}))}}},Pn=Zn,Mn=(0,Z.Z)(Pn,En,In,!1,null,"71050ee3",null),Un=Mn.exports,qn={name:"InventoryFile",components:{InventoryPrint:Un},data(){return{generateMonthDialog:!1,generateDate:null,department:null,totalMP:null,equipment:[],search:null,overlay:!1,tab:"",editing:!1,editIndex:null}},methods:{mobilityTab(t){this.tab=t,this.$store.dispatch("diplayRemarks","mobility")},weaponTab(t){this.tab=t,this.$store.dispatch("diplayRemarks","weapon")},commTab(t){this.tab=t,this.$store.dispatch("diplayRemarks","communication")},medicalTab(t){this.tab=t,this.$store.dispatch("diplayRemarks","medical")},dentalTab(t){this.tab=t,this.$store.dispatch("diplayRemarks","dental")},quarterTab(t){this.tab=t,this.$store.dispatch("diplayRemarks","quartermaster")},allCategory(t){this.tab=t},manpower(){k()({method:"post",url:`${this.$baseUrl}api/getManpower`,data:{department:this.department,Month:this.generateDate}}).then((t=>{this.totalMP=t.data}))},getEquipment(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/getEquipmentInventory`,data:{department:this.department,searchKey:this.search,Month:this.generateDate}}).then((t=>{this.equipment=t.data,this.overlay=!1}))},generate(){this.manpower(),this.getEquipment(),this.$store.state.monthData=this.generateDate,this.$store.state.teamData=this.department,this.$store.dispatch("diplayRemarks",this.tab)},print(){const t=window.confirm("Are you sure you want to print this report?");t&&this.$refs.InventoryPrint.print(this.dataDownload)},printPdf(){this.$refs.InventoryPrint.print(this.dataDownload)},updateRemarks(t){this.editing=!1,this.editIndex=null;const e=event.target.innerText;let a={id:t.id,remarks:e};this.$store.dispatch("updateRemarks",a)}},computed:{...(0,T.rn)(["departmentItems","user","loadingPage","remarksData"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},addNewDepartment(){let t={UnitDepartmentName:"All",UnitDepartmentCode:"All"},e=this.departmentItems.concat(t);return e},unitName(){let t;return this.addNewDepartment.filter((e=>{e.UnitDepartmentCode==this.department&&(t=e.UnitDepartmentName)})),t},mobility(){const t=this.equipment;return t.reduce(((t,e)=>{let a=t.findIndex((t=>t.Detail==e.Detail)),i={Group:null,Detail:null,Required:0,Actual:0};return-1==a?e.Required&&"MOBILITY"==e.Category&&(i.Group=e.Sub,i.Detail=e.Detail,i.Required=Number(e.Required),i.Actual=Number(e.Actual),t.push(i)):e.Required&&(t[a].Detail=e.Detail,t[a].Required+=Number(e.Required),t[a].Actual+=Number(e.Actual)),t}),[]).sort(((t,e)=>{let a=["Ground","Air","Sea"];return a.indexOf(t.Group)-a.indexOf(e.Group)})).reduce(((t,e)=>{let a=t.findIndex((t=>t.Group==e.Group));return-1==a?(e.count=1,t.push(e)):(t[a].count+=1,t.push(e)),t}),[])},weapon(){const t=this.equipment;return t.reduce(((t,e)=>{let a=t.findIndex((t=>t.Detail==e.Detail)),i={Group:null,Detail:null,Required:0,Actual:0};return-1==a?e.Required&&"FIREPOWER"==e.Category&&(i.Group=e.Sub,i.Detail=e.Detail,i.Required=Number(e.Required),i.Actual=Number(e.Actual),t.push(i)):e.Required&&(t[a].Detail=e.Detail,t[a].Required+=Number(e.Required),t[a].Actual+=Number(e.Actual)),t}),[]).sort(((t,e)=>{let a=["Individual","Crew Served Weapon"];return a.indexOf(t.Group)-a.indexOf(e.Group)})).reduce(((t,e)=>{let a=t.findIndex((t=>t.Group==e.Group));return-1==a?(e.count=1,t.push(e)):(t[a].count+=1,t.push(e)),t}),[])},communications(){const t=this.equipment;return t.reduce(((t,e)=>{let a=t.findIndex((t=>t.Detail==e.Detail)),i={Detail:null,Required:0,Actual:0};return-1==a?e.Required&&"COMMUNICATIONS"==e.Category&&(i.Detail=e.Detail,i.Required=Number(e.Required),i.Actual=Number(e.Actual),t.push(i)):e.Required&&(t[a].Detail=e.Detail,t[a].Required+=Number(e.Required),t[a].Actual+=Number(e.Actual)),t}),[])},dental(){const t=this.equipment;return t.reduce(((t,e)=>{let a=t.findIndex((t=>t.Detail==e.Detail)),i={Detail:null,Required:0,Actual:0};return-1==a?e.Required&&"DENTAL"==e.Category&&(i.Detail=e.Detail,i.Required=Number(e.Required),i.Actual=Number(e.Actual),t.push(i)):e.Required&&(t[a].Detail=e.Detail,t[a].Required+=Number(e.Required),t[a].Actual+=Number(e.Actual)),t}),[])},medical(){const t=this.equipment;return t.reduce(((t,e)=>{let a=t.findIndex((t=>t.Detail==e.Detail)),i={Detail:null,Required:0,Actual:0};return-1==a?e.Required&&"MEDICAL"==e.Category&&(i.Detail=e.Detail,i.Required=Number(e.Required),i.Actual=Number(e.Actual),t.push(i)):e.Required&&(t[a].Detail=e.Detail,t[a].Required+=Number(e.Required),t[a].Actual+=Number(e.Actual)),t}),[])},quartermaster(){const t=this.equipment;return t.reduce(((t,e)=>{let a=t.findIndex((t=>t.Detail==e.Detail)),i={Detail:null,Required:0,Actual:0};return-1==a?e.Required&&"QUARTERMASTER"==e.Category&&(i.Detail=e.Detail,i.Required=Number(e.Required),i.Actual=Number(e.Actual),t.push(i)):e.Required&&(t[a].Detail=e.Detail,t[a].Required+=Number(e.Required),t[a].Actual+=Number(e.Actual)),t}),[])},allInventory(){const t=this.equipment;let e=["MOBILITY","FIREPOWER","COMMUNICATIONS","DENTAL","MEDICAL","QUARTERMASTER"],a=e.map((t=>({Detail:t,Required:0,Actual:0})));return t.sort(((t,a)=>e.indexOf(t.Group)-e.indexOf(a.Group))).forEach((t=>{let e=a.findIndex((e=>e.Detail===t.Category)),i={Detail:t.Category,Required:Number(t.Required),Actual:Number(t.Actual)};-1===e?a.push(i):(a[e].Required+=i.Required,a[e].Actual+=i.Actual)})),a.sort(((t,a)=>e.indexOf(t.Detail)-e.indexOf(a.Detail))),a},dataDownload(){let t={mobility:this.mobility,weapon:this.weapon,communications:this.communications,medical:this.medical,dental:this.dental,quartermaster:this.quartermaster,unit:this.unitName,month:this.formattedDate,rights:this.$store.state.user.rights,office:this.$store.state.user.office,department:this.department,remarksData:this.remarksData,assesment:this.remarksData.length>0,tab:this.tab};return t}},mounted(){this.$store.dispatch("getDepartment")},watch:{allInventory(t){console.log(t)}}},$n=qn,On=(0,Z.Z)($n,Nn,kn,!1,null,"662d9974",null),Ln=On.exports,zn=function(){var t=this,e=t._self._c;return e("div",[e("h1",[e("center",[t._v("Add/Update TO")])],1),e(c.Z),e("br"),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticStyle:{"background-color":"#0275d8",color:"white"}},[e("center",[t._v("CONTROL PANEL")])],1),e(Et.Z,[e("br"),e(F.Z,{staticClass:"d-flex justify-center"},["delete"!=t.radioGroup&&"search"!=t.radioGroup?e(xi.Z,{attrs:{row:""},model:{value:t.radioTO,callback:function(e){t.radioTO=e},expression:"radioTO"}}):t._e()],1),e(Dt.Z,{ref:"add",on:{submit:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},["new"==t.radioTO?e(xi.Z,{attrs:{row:""},model:{value:t.categoryRadio,callback:function(e){t.categoryRadio=e},expression:"categoryRadio"}},[e("h3",[t._v("Category : ")]),e(x.Z),e(Di.Z,{attrs:{label:"Existing",value:"exist"}}),e(Di.Z,{attrs:{label:"New",value:"new"}})],1):t._e(),"new"!=t.categoryRadio?e(vt.Z,{attrs:{label:"Category","item-text":"CategoryName","item-value":"CategoryCode",dense:"",outlined:"",items:t.categoryItems,rules:t.rules.required},on:{change:function(e){return t.getDepartment()}},model:{value:t.category,callback:function(e){t.category=e},expression:"category"}}):e(Rt.Z,{attrs:{label:"New Category",dense:"",outlined:"",rules:t.rules.required},model:{value:t.categoryName,callback:function(e){t.categoryName=e},expression:"categoryName"}}),"new"==t.radioTO?e(xi.Z,{staticClass:"margin-top",attrs:{row:""},model:{value:t.departmentRadio,callback:function(e){t.departmentRadio=e},expression:"departmentRadio"}},[e("h3",[t._v("Department : ")]),e(x.Z),e(Di.Z,{attrs:{label:"Existing",value:"exist"}}),e(Di.Z,{attrs:{label:"New",value:"new"},on:{click:function(e){return t.getDepartment()}}})],1):t._e(),"new"!=t.departmentRadio?e(vt.Z,{attrs:{label:"Unit","item-text":"UnitDepartmentName","item-value":"UnitDepartmentCode",dense:"",outlined:"",items:t.departmentItems,rules:t.rules.required,clearable:"delete"==t.radioGroup},on:{change:function(e){return t.getSection()}},model:{value:t.department,callback:function(e){t.department=e},expression:"department"}}):e(Rt.Z,{attrs:{label:"New Department",dense:"",outlined:"",rules:t.rules.required},model:{value:t.newDepartmentName,callback:function(e){t.newDepartmentName=e},expression:"newDepartmentName"}}),"new"==t.radioTO?e(xi.Z,{staticClass:"margin-top",attrs:{row:""},model:{value:t.sectionRadio,callback:function(e){t.sectionRadio=e},expression:"sectionRadio"}},[e("h3",[t._v("Section : ")]),e(x.Z),e(Di.Z,{attrs:{label:"Existing",value:"exist"}}),e(Di.Z,{attrs:{label:"New",value:"new"},on:{click:function(e){return t.getSection()}}})],1):t._e(),"new"!=t.sectionRadio?e(vt.Z,{attrs:{label:"Sub-Unit","item-text":"UnitSectionName","item-value":"UnitSectionCode",dense:"",outlined:"",items:t.sectionItems,rules:t.rules.required,clearable:"delete"==t.radioGroup},on:{change:function(e){return t.getTeam()}},model:{value:t.section,callback:function(e){t.section=e},expression:"section"}}):e(Rt.Z,{attrs:{label:"New Section",dense:"",outlined:"",rules:t.rules.required},on:{blur:function(e){return t.getTeam()}},model:{value:t.newSectionName,callback:function(e){t.newSectionName=e},expression:"newSectionName"}}),"new"!=t.radioTO&&"CA01"==t.category?e(vt.Z,{attrs:{label:"Office","item-text":"UnitTeamName","item-value":"UnitTeamCode",dense:"",outlined:"",items:t.teamItems,rules:t.rules.required,clearable:"delete"==t.radioGroup},on:{change:function(e){return t.getEmpty()}},model:{value:t.team,callback:function(e){t.team=e},expression:"team"}}):e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"CA01"==t.category,expression:"category == 'CA01'"}],attrs:{label:"New Team",dense:"",outlined:"",rules:t.rules.required},model:{value:t.newTeamName,callback:function(e){t.newTeamName=e},expression:"newTeamName"}}),"new"!=t.radioTO?e(F.Z,{staticClass:"d-flex justify-center"},[e(xi.Z,{attrs:{row:""},model:{value:t.radioGroup,callback:function(e){t.radioGroup=e},expression:"radioGroup"}})],1):t._e(),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.radioGroup,expression:"radioGroup == 'add'"}],attrs:{label:"Branch",dense:"",outlined:"",rules:t.rules.required},on:{blur:function(e){return t.getBranch()}},model:{value:t.branch,callback:function(e){t.branch=e},expression:"branch"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.radioGroup,expression:"radioGroup == 'add'"}],attrs:{label:"Position",dense:"",outlined:"",rules:t.rules.required},on:{blur:function(e){return t.getPosition()}},model:{value:t.position,callback:function(e){t.position=e},expression:"position"}}),e(vt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.radioGroup,expression:"radioGroup == 'add'"}],attrs:{label:"Grade","item-text":"GradeName","item-value":"GradeCode",dense:"",outlined:"",items:t.gradeItems,rules:t.rules.required},on:{change:function(e){return t.getDivision()}},model:{value:t.grade,callback:function(e){t.grade=e},expression:"grade"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.radioGroup,expression:"radioGroup == 'add'"}],attrs:{label:"AFPOS",dense:"",outlined:"",rules:t.rules.required},on:{blur:function(e){return t.getAfpos()}},model:{value:t.afpos,callback:function(e){t.afpos=e},expression:"afpos"}}),e(Rt.Z,{directives:[{name:"show",rawName:"v-show",value:"add"==t.radioGroup,expression:"radioGroup == 'add'"}],attrs:{label:"Required MP",dense:"",outlined:"",rules:t.rules.required},model:{value:t.requiredmp,callback:function(e){t.requiredmp=e},expression:"requiredmp"}}),e("div",{directives:[{name:"show",rawName:"v-show",value:0==this.tableData.length&&"D01"==t.department&&t.team||0==this.tableData.length&&"D01"!=t.department&&t.section,expression:"this.tableData.length == 0 && department == 'D01' && team || this.tableData.length == 0 && department != 'D01' && section"}]},[e("input",{directives:[{name:"show",rawName:"v-show",value:"upload"==t.radioGroup&&"new"!=t.radioTO,expression:"radioGroup == 'upload'  && radioTO != 'new'"}],ref:"fileInput",staticClass:"file-input",attrs:{type:"file",accept:".csv"},on:{change:t.handleFileSelect}}),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:"upload"==t.radioGroup&&"new"!=t.radioTO,expression:"radioGroup == 'upload'  && radioTO != 'new'"}],attrs:{color:"success",dark:"",block:"",medium:""},on:{click:function(e){return t.upload()}}},[t._v("UPLOAD")])],1),e("div",{directives:[{name:"show",rawName:"v-show",value:t.tableData.length>0,expression:"tableData.length > 0"}]},[e(l.Z,{attrs:{color:"error",dark:"",block:"",medium:""},on:{click:function(e){return t.deleteTable("personnel")}}},[t._v("DELETE")])],1),"add"==t.radioGroup?e(l.Z,{attrs:{color:"primary",dark:"",block:"",medium:"",type:"submit"}},[t._v("ADD")]):t._e(),"new"==t.radioTO?e(l.Z,{attrs:{color:"success",dark:"",block:"",medium:""},on:{click:function(e){return t.addUnitManual()}}},[t._v("ADD")]):t._e(),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:"delete"==t.radioGroup,expression:"radioGroup == 'delete'"}],attrs:{color:"error",dark:"",block:"",medium:""},on:{click:function(e){return t.deleteUnit()}}},[t._v("DELETE "+t._s(t.deleteNameDisplay))])],1)],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,{attrs:{elevation:"5"}},[e("div",{staticClass:"d-flex flex-column justify-content-center text-center"},[e("h2",[t._v(t._s(t.departmentName))]),e("h2",[t._v(t._s(t.sectionName))]),e("h3",[t._v(t._s(t.teamName))])]),e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("DESCRIPTION/POSITION")]),e("th",[t._v("GRADE")]),e("th",[t._v("AFPOS")]),e("th",[t._v("REQUIRED")]),e("th",[t._v("DELETE")])])]),t._l(t.tableData,(function(a,i){return e("tbody",{key:i},[a.OfficeName?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px","background-color":"lightgrey !important"},attrs:{colspan:"5"}},[t._v(t._s(a.OfficeName))])]):t._e(),a.GroupBranch&&!a.OfficeName?e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.GroupBranch))])]):t._e(),a.GradeName?e("tr",[e("td",{staticStyle:{"text-align":"left !important"}},[t._v(t._s(a.PositionName))]),e("td",[t._v(t._s(a.GradeName))]),e("td",[t._v(t._s(a.AfposName))]),e("td",[t._v(t._s(a.requiredMp))]),e("td",[e(l.Z,{attrs:{icon:""},on:{click:function(e){return t.deleteItem(a)}}},[e(h.Z,{attrs:{color:"error"}},[t._v("mdi-trash-can-outline")])],1)],1)]):t._e(),a.GroupBranch||t.tableData[i+1]&&!t.tableData[i+1].GroupBranch?t._e():[e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"},attrs:{colspan:"2"}}),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("Total")]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(a.total))])])],i===t.tableData.length-1?[e("tr",[e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"},attrs:{colspan:"2"}}),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v("Aggregate Total")]),e("td",{staticStyle:{"font-weight":"bold","font-size":"15px"}},[t._v(t._s(t.Manpower))])])]:t._e()],2)}))],2),e(Zt.Z,{attrs:{value:t.overlay}},[e(Pt.Z,{attrs:{indeterminate:"",size:"64"}})],1)],1)],1)],1)],1)},Fn=[],Bn={components:{},data:()=>({radioGroup:"upload",category:null,categoryName:null,categoryItems:[],division:null,department:null,newDepartmentName:null,departmentItems:[],section:null,newSectionName:null,sectionItems:[],team:null,newTeamName:null,teamItems:[],branch:null,branchCode:null,position:null,positionCode:null,grade:null,gradeItems:[],afpos:null,afposCode:null,requiredmp:null,selectedFile:null,tableData:[],tempFile:[],tempInsert:[],tempBranch:[],tempPosition:[],tempAfpos:[],forUpload:[],categoryRadio:"exist",departmentRadio:"exist",sectionRadio:"exist",radioTO:"exist",rules:{required:[t=>!!t||"Field is required"]},overlay:!1,dataToExport:[]}),methods:{exportcsv(){k()({method:"post",url:`${this.$baseUrl}api/forExport`}).then((t=>{const e=this.convertToCSV(t.data),a=new Blob([e],{type:"text/csv"}),i=window.URL.createObjectURL(a),n=document.createElement("a");n.href=i,n.download="exported-data.csv",n.style.display="none",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(i)}))},convertToCSV(t){const e=Object.keys(t[0]).join(","),a=t.map((t=>Object.values(t).join(",")));return`${e}\n${a.join("\n")}`},decryptData(t){const e=atob(t);return e},async getGradeInsert(t){if(t){let e;return this.gradeItems.filter((a=>{a.GradeName==t&&(e=a.GradeCode)})),e}},async getDivisionInsert(t){if(t)return new Promise((e=>{let a;this.gradeItems.filter((e=>{e.GradeCode==t&&(a=e.DivisionCode)})),e(a)}))},getBranchInsert(){k()({method:"post",url:`${this.$baseUrl}api/getBranch`,data:{data:"CA01"==this.category?this.team:this.section}}).then((t=>{this.tempBranch=t.data}))},async branchFilter(t){if(t)return new Promise((e=>{let a;this.tempBranch.filter((e=>{e.BranchName==t&&(a=e.BranchCode)})),e(a)}))},getPositionInsert(){k()({method:"post",url:`${this.$baseUrl}api/getPosition`,data:{data:"CA01"==this.category?this.team:this.section}}).then((t=>{this.tempPosition=t.data}))},async positionFilter(t){if(t)return new Promise((e=>{let a;this.tempPosition.filter((e=>{e.PositionName==t&&(a=e.PositionCode)})),e(a)}))},getAfposInsert(){k()({method:"post",url:`${this.$baseUrl}api/getAfpos`}).then((t=>{this.tempAfpos=t.data}))},async afposFilter(t){if(t)return new Promise((e=>{let a;this.tempAfpos.filter((e=>{e.AfposName==t&&(a=e.AfposCode)})),e(a)}))},handleFileSelect(t){const e=t.target.files[0],a=new FileReader;a.onload=t=>{const e=t.target.result,a=en().parse(e,{header:!0,encoding:"UTF-8"}),i=a.data,n=Object.keys(i[0]);for(let r=0;r<i.length;r++){const t=i[r],e={};for(let a=0;a<n.length;a++){let i=t[n[a]];e[n[a]]=i}this.tempFile.push(e)}},a.readAsText(e)},async upload(){this.overlay=!0;let t="",e="";for(let a=0;a<this.tempFile.length-1;a++){const i=this.tempFile[a];if("Total"!=i.description){if(t){t.match(/\d+$/)}const a=await this.positionFilter(i.description),n=await this.afposFilter(i.afpos);let r={DivisionCode:null,CategoryCode:this.category,DepartmentCode:this.department,SectionCode:this.section,TeamCode:"CA01"==this.category?this.team:this.section,BranchCode:null,BranchName:null,PositionCode:null,PositionName:null,GradeCode:null,AfposCode:null,AfposName:null,RequiredMp:null,Office:null,process:"upload"};if(r.UnitCode="CA01"==this.category?this.team:this.section,""!==i.description.trim()&&""==i.grade.trim()&&""==i.afpos.trim()&&""==i.required.trim()){if(this.tempBranch.length>0){let t=this.tempBranch[this.tempBranch.length-1],e=t.BranchCode.match(/\d+/),a=parseInt(e[0],10)+1,n=t.BranchCode.replace(/\d+/,a.toString().padStart(e[0].length,"0"));r.BranchCode=n;let s={BranchCode:r.BranchCode,BranchName:i.description};this.tempBranch.push(s)}else{r.BranchCode=`BS001${r.UnitCode}`;let t={BranchCode:r.BranchCode,BranchName:i.description};this.tempBranch.push(t)}r.PositionCode=i.office?"00000":null,r.PositionName=i.office?"office_unit":null,r.DivisionCode=i.office?"001":null,r.BranchName=i.description,t=r.BranchCode,e=r.BranchName}else{if(r.BranchCode=t,r.BranchName=e,a)r.PositionCode=a;else if(this.tempPosition.length>0){let t=this.tempPosition[this.tempPosition.length-1],e=t.PositionCode.match(/\d+/),a=parseInt(e[0],10)+1,n=t.PositionCode.replace(/\d+/,a.toString().padStart(e[0].length,"0"));r.PositionCode=n;let s={PositionCode:r.PositionCode,PositionName:i.description};this.tempPosition.push(s)}else{r.PositionCode=`PS001${r.UnitCode}`;let t={PositionCode:r.PositionCode,PositionName:i.description};this.tempPosition.push(t)}if(n)r.AfposCode=n;else if(this.tempAfpos.length>0){let t=this.tempAfpos[this.tempAfpos.length-1],e=t.AfposCode.match(/\d+/),a=parseInt(e[0],10)+1,n=t.AfposCode.replace(/\d+/,a.toString().padStart(e[0].length,"0"));r.AfposCode=n;let s={AfposCode:r.AfposCode,AfposName:i.afpos};this.tempAfpos.push(s)}else{r.AfposCode="AF001";let t={AfposCode:r.AfposCode,AfposName:i.afpos};this.tempAfpos.push(t)}r.PositionName=i.description,r.AfposName=i.afpos,r.GradeCode=await this.getGradeInsert(i.grade),r.RequiredMp=i.required,r.DivisionCode=await this.getDivisionInsert(r.GradeCode)}r.DivisionCode&&this.forUpload.push(r)}}this.$refs.fileInput.value="",this.addUpload(this.forUpload)},addUpload(t){k()({method:"post",url:`${this.$baseUrl}api/getInsertUpload`,data:{data:t}}).then((t=>{200==t.status&&(alert("uploaded"),this.forUpload=[],this.tempFile=[],this.tempBranch=[],this.tempPosition=[],this.tempAfpos=[],this.getTable(),this.overlay=!1)}))},newCodeTO(t,e){let a,i=t[t.length-1],n=i[e].match(/\d+/),r=parseInt(n[0],10)+1;return a=i[e].replace(/\d+/,r.toString().padStart(n[0].length,"0")),a},getCategory(){this.tableData=[],this.department=null,this.section=null,this.team=null,k()({method:"get",url:`${this.$baseUrl}api/getCategory`}).then((t=>{this.categoryItems=t.data}))},getDepartment(){this.tableData=[],this.section=null,this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getDepartment`,data:{data:this.category,list:this.departmentRadio}}).then((t=>{this.departmentItems=t.data}))},getSection(){this.tableData=[],this.team=null,k()({method:"post",url:`${this.$baseUrl}api/getSection`,data:{data:this.department,list:this.sectionRadio}}).then((t=>{this.sectionItems=t.data}))},getTeam(){this.tableData=[],k()({method:"post",url:`${this.$baseUrl}api/getTeam`,data:{data:this.section,list:this.radioTO}}).then((t=>{this.teamItems=t.data,"CA01"!=this.category&&this.getTable()}))},getGrade(){k()({method:"post",url:`${this.$baseUrl}api/getGrade`}).then((t=>{const e=t.data,a=this.decryptData(e);this.gradeItems=JSON.parse(a)})).catch((t=>{console.error("Error fetching and decrypting grade data:",t)}))},getDivision(){k()({method:"post",url:`${this.$baseUrl}api/getDivision`,data:{data:this.grade}}).then((t=>{t.data.filter((t=>{this.division=t.DivisionCode}))}))},getEmpty(){this.tableData=[],this.getTable()},addCode(t,e){let a,i=t.pop(),n=i[e].match(/\d+/),r=parseInt(n[0],10)+1;return a=i[e].replace(/\d+/,r.toString().padStart(n[0].length,"0")),a},getNewCode(t,e,a,i){return new Promise(((n,r)=>{let s;k()({method:"post",url:`${this.$baseUrl}api/${t}`,data:{data:e}}).then((r=>{if(r.data.length>0){const t=r.data.find((t=>t[a]==e));s=t?t[i]:this.addCode(r.data,i)}else s="getBranch"==t?"BR001":"getPosition"==t?"PS001":"AF001";n(s)})).catch((t=>{r(t)}))}))},async getBranch(){this.branchCode=await this.getNewCode("getBranch",this.branch,"BranchName","BranchCode")},async getPosition(){this.positionCode=await this.getNewCode("getPosition",this.position,"PositionName","PositionCode")},async getAfpos(){this.afposCode=await this.getNewCode("getAfpos",this.afpos,"AfposName","AfposCode")},add(){this.$refs.add.validate()&&k()({method:"post",url:`${this.$baseUrl}api/getInsert`,data:{DivisionCode:this.division,CategoryCode:this.category,DepartmentCode:this.department,SectionCode:this.section,TeamCode:this.team,BranchCode:this.branchCode,BranchName:this.branch,PositionCode:this.positionCode,PositionName:this.position,GradeCode:this.grade,AfposCode:this.afposCode,AfposName:this.afpos,RequiredMp:this.requiredmp,process:"single"}}).then((t=>{200==t.status&&(alert("added"),this.position=null,this.grade=null,this.afpos=null,this.requiredmp=null,this.getTable())}))},addUnitManual(){k()({method:"post",url:`${this.$baseUrl}api/getInsertManual`,data:{CategoryCode:"exist"==this.categoryRadio?this.category:this.newCodeTO(this.categoryItems,"CategoryCode"),CategoryName:this.categoryName?this.categoryName.toUpperCase():null,DepartmentCode:"exist"==this.departmentRadio?this.department:this.newCodeTO(this.departmentItems,"UnitDepartmentCode"),DepartmentName:this.newDepartmentName?this.newDepartmentName.toUpperCase():null,SectionCode:"exist"==this.sectionRadio?this.section:this.newCodeTO(this.sectionItems,"UnitSectionCode"),SectionName:this.newSectionName?this.newSectionName.toUpperCase():null,SectionAbr:this.newSectionName?this.getAbbreviation(this.newSectionName):null,TeamCode:this.newCodeTO(this.teamItems,"UnitTeamCode"),TeamName:this.newTeamName.toUpperCase(),TeamAbr:this.newTeamName?this.getAbbreviation(this.newTeamName):null}}).then((t=>{200==t.status&&(this.radioTO="exist",this.categoryRadio="exist",this.departmentRadio="exist",this.sectionRadio="exist",this.getCategory(),this.getDepartment(),this.getSection(),this.getTeam(),alert("added"))}))},getTable(){this.overlay=!0,k()({method:"post",url:`${this.$baseUrl}api/getTable`,data:{DivisionCode:this.division,CategoryCode:this.category,DepartmentCode:this.department,SectionCode:this.section,TeamCode:"CA01"==this.category?this.team:this.section,BranchCode:this.branchCode,BranchName:this.branch,PositionCode:this.positionCode,PositionName:this.position,GradeCode:this.grade,AfposCode:this.afposCode,AfposName:this.afpos,RequiredMp:this.requiredmp}}).then((t=>{const e=t.data,a=this.decryptData(e);let i=JSON.parse(a);this.tableData=i.reduce(((t,e)=>{let a=t.findIndex((t=>t.BranchCode==e.BranchCode));if(-1==a){let a={...e};a.OfficeName="office_unit"==e.PositionName?e.BranchName:null,a.GroupBranch=e.BranchName,a.TotalMP=isNaN(e.requiredMp)?0:Number(e.requiredMp),t.push(a)}else isNaN(e.requiredMp)||(t[a].TotalMP+=Number(e.requiredMp)),t[a].count+=1,e.total=t[a].TotalMP,t.push(e);return t}),[]),this.getAfposInsert(),this.getPositionInsert(),this.getBranchInsert(),this.overlay=!1})).catch((t=>{console.error("Error fetching and decrypting grade data:",t)}))},deleteItem(t){k()({method:"post",url:`${this.$baseUrl}api/deleteItem`,data:{id:t.id}}).then((t=>{200==t.status&&(alert("Delete"),this.getTable())}))},deleteUnit(){window.confirm(`Are you sure you want to delete this ${this.deleteNameDisplay.toLowerCase()}?`)&&k()({method:"post",url:`${this.$baseUrl}api/deleteUnit`,data:{data:"DEPARTMENT"==this.deleteNameDisplay?this.department:"SECTION"==this.deleteNameDisplay?this.section:"TEAM"==this.deleteNameDisplay?this.team:null,table:this.deleteNameDisplay,department:this.department,section:this.section}}).then((t=>{200==t.status&&(alert(`This ${this.deleteNameDisplay.toLowerCase()} was deleted`),this.radioTO="exist",this.categoryRadio="exist",this.departmentRadio="exist",this.sectionRadio="exist",this.getCategory(),this.getDepartment(),this.getSection(),this.getTeam())}))},getAbbreviation(t){const e=t.split(" ");let a="";for(let i=0;i<e.length;i++)a+=e[i][0].toUpperCase();return a},deleteTable(t){const e=window.confirm("Are you sure you want to delete this information?");if(e){this.overlay=!0;let e={Table:t,Team:"D01"==this.department?this.team:this.section,Name:this.user.name,Time:A()().format("YYYY-MM-DD HH:mm:ss"),Year:A()().format("YYYY"),url:`${this.$baseUrl}api/deleteRequired`};return nn()(e,this.getTable)}}},computed:{...(0,T.rn)(["user"]),departmentName(){let t;return this.department&&this.departmentItems.filter((e=>{e.UnitDepartmentCode==this.department&&(t=e.UnitDepartmentName)})),t},sectionName(){let t;return this.section&&this.sectionItems.filter((e=>{e.UnitSectionCode==this.section&&(t=e.UnitSectionName)})),t},teamName(){let t;return this.team&&this.teamItems.filter((e=>{e.UnitTeamCode==this.team&&(t=e.UnitTeamName)})),t},Manpower(){return this.tableData.length>0?this.tableData.reduce(((t,e)=>e.TotalMP?t+e.TotalMP:t),0):0},deleteNameDisplay(){return!this.department||this.section||this.team?this.department&&this.section&&!this.team?"SECTION":this.department&&this.section&&this.team?"TEAM":"":"DEPARTMENT"}},mounted(){this.getCategory(),this.getGrade(),this.getAfposInsert(),this.getPositionInsert(),this.getBranchInsert()},watch:{radioTO(t){"new"==t&&(this.category=null,this.department=null,this.section=null,this.team=null,this.newTeamName=null)}}},Yn=Bn,Gn=(0,Z.Z)(Yn,zn,Fn,!1,null,null,null),Qn=Gn.exports,jn=function(){var t=this,e=t._self._c;return e("div",[e("h2",[e("center",[t._v(t._s(t.formattedDate))])],1),e("h2",[e("center",[t._v("Readiness Report")])],1),e(c.Z),e("br"),e("br"),"office"!=t.selectedUnit?e(Ot.Z,{attrs:{"justify-center":""},model:{value:t.all_tab,callback:function(e){t.all_tab=e},expression:"all_tab"}},[e(qt.Z,{attrs:{href:"#personnelTab",disabled:"all"==t.selectedUnit&&("1"!=t.user.rights&&!["1","3"].includes(t.user.res))},on:{click:function(e){return t.personnelTab("personnelTab")}}},[t._v("PERSONNEL")]),e(qt.Z,{attrs:{href:"#trainingTab",disabled:"all"==t.selectedUnit&&("1"!=t.user.rights&&!["3","8"].includes(t.user.res))},on:{click:function(e){return t.trainingTab("trainingTab")}}},[t._v("TRAINING")]),e(qt.Z,{attrs:{href:"#equipmentTab",disabled:"all"==t.selectedUnit&&("1"!=t.user.rights&&!["3","4"].includes(t.user.res))},on:{click:function(e){return t.equipmentTab("equipmentTab")}}},[t._v("EQUIPMENT")]),e(qt.Z,{attrs:{href:"#maintenanceTab",disabled:"all"==t.selectedUnit&&("1"!=t.user.rights&&!["3","4"].includes(t.user.res))},on:{click:function(e){return t.maintenanceTab("maintenanceTab")}}},[t._v("MAINTENANCE")]),e(qt.Z,{attrs:{href:"#facilityTab",disabled:"all"==t.selectedUnit&&("1"!=t.user.rights&&!["3","4"].includes(t.user.res))},on:{click:function(e){return t.facilityTab("facilityTab")}}},[t._v("FACILITY")]),e(qt.Z,{attrs:{href:"#overallTab",disabled:"all"==t.selectedUnit&&("1"!=t.user.rights&&"3"!=t.user.res)},on:{click:function(e){return t.overallTab("overallTab")}}},[t._v("OVERALL")])],1):t._e(),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"3",lg:"3",xl:"3"}},[e(o.Z,{staticClass:"justify-center",attrs:{elevation:"3"}},[e(d.EB,{staticClass:"d-flex justify-center",staticStyle:{"background-color":"#0275d8",color:"white"}},[t._v(" CONTROL ")]),e("br"),e(d.ZB,[e(Et.Z,[e("br"),e(F.Z,[e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(vt.Z,{staticStyle:{"margin-bottom":"-40px","margin-top":"-30px"},attrs:{label:"View Report",dense:"",outlined:"",items:t.unitItems,"item-text":"text","item-value":"value"},on:{change:function(e){return t.changeFilter()}},model:{value:t.selectedUnit,callback:function(e){t.selectedUnit=e},expression:"selectedUnit"}})],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(yt.Z,{ref:"dialog",attrs:{"return-value":t.generateDate,persistent:"",width:"290px"},on:{"update:returnValue":function(e){t.generateDate=e},"update:return-value":function(e){t.generateDate=e}},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:i}){return[e(Rt.Z,t._g(t._b({staticClass:"text-center",attrs:{label:"Select Month","prepend-inner-icon":"mdi-calendar",readonly:"",dense:"",outlined:""},model:{value:t.formattedDate,callback:function(e){t.formattedDate=e},expression:"formattedDate"}},"v-text-field",i,!1),a))]}}]),model:{value:t.generateMonthDialog,callback:function(e){t.generateMonthDialog=e},expression:"generateMonthDialog"}},[e(It.Z,{attrs:{type:"month",scrollable:""},model:{value:t.generateDate,callback:function(e){t.generateDate=e},expression:"generateDate"}},[e(x.Z),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.generateMonthDialog=!1}}},[t._v("Cancel")]),e(l.Z,{attrs:{text:"",color:"primary"},on:{click:function(e){t.$refs.dialog.save(t.generateDate),t.tableData=[]}}},[t._v("OK")])],1)],1)],1),e(z.Z,{attrs:{cols:"12",md:"12",lg:"12",xl:"12"}},[e(l.Z,{staticClass:"mb-2",attrs:{color:"warning",medium:"",block:"",disabled:!t.generateDate},on:{click:function(e){return t.generate()}}},[t._v("GENERATE")]),e(l.Z,{staticClass:"mb-2",attrs:{color:"primary",medium:"",block:"",disabled:!t.generateDate},on:{click:function(e){return t.print()}}},[t._v("PRINT")]),"all"==t.selectedUnit&&"T14"==t.user.office&&t.generateDate&&"overallTab"==t.all_tab?e("div",[e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.overAll.length||1!=t.statusN3&&2==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.user.office,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.overAll.length||2!=t.statusN3&&3==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.user.office,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.overAll.length||3!=t.statusN3&&4==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.user.office,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],staticClass:"mb-2",attrs:{color:"error",medium:"",block:"",disabled:0==t.overAll.length||4!=t.statusN3&&5==t.user.approver},on:{click:function(e){return t.declined(t.generateDate,t.user.office,t.user.approver)}}},[t._v("DECLINED")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:1==this.user.approver,expression:"this.user.approver == 1"}],attrs:{color:"success",medium:"",block:"",disabled:!(0!=t.overAll.all&&!t.statusN3)},on:{click:function(e){return t.submitData(t.generateDate,t.user.office)}}},[t._v("SUBMIT")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:2==this.user.approver,expression:"this.user.approver == 2"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.overAll.length||1!=t.statusN3},on:{click:function(e){return t.approvedData(t.generateDate,t.user.office,"2")}}},[t._v("CONCURRENCE")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:3==this.user.approver,expression:"this.user.approver == 3"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.overAll.length||2!=t.statusN3},on:{click:function(e){return t.approvedData(t.generateDate,t.user.office,"3")}}},[t._v("CONCURRENCE")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:4==this.user.approver,expression:"this.user.approver == 4"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.overAll.length||3!=t.statusN3},on:{click:function(e){return t.approvedData(t.generateDate,t.user.office,"4")}}},[t._v("CONCURRENCE")]),e(l.Z,{directives:[{name:"show",rawName:"v-show",value:5==this.user.approver,expression:"this.user.approver == 5"}],attrs:{color:"success",medium:"",block:"",disabled:0==t.overAll.length||4!=t.statusN3},on:{click:function(e){return t.approvedData(t.generateDate,t.user.office,"5")}}},[t._v("APPROVED")]),e("div",[e("br"),e("hr"),e("center",[e("StatusTimeline",{ref:"StatusTimeline",attrs:{month:t.generateDate,department:t.department,team:t.user.office,table:"n3"},on:{fromTimeline:t.handledTimelineData}})],1)],1)],1):t._e()],1)],1)],1)],1)],1)],1),"office"==t.selectedUnit?e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(o.Z,[e(d.ZB,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("Key Measurement Area (KMA)")]),e("th",[t._v("Rating")]),e("th",[t._v("RedCon Level")])])]),e("tbody",[e("tr",[e("td",[t._v("Personnel Readiness")]),e("td",[t._v(t._s(t.totalRating?t.totalRating.toFixed(2)+"%":""))]),e("td",{class:t.totalRating?t.redConStyle(t.redConResult(t.totalRating)):""},[t._v(t._s(t.totalRating?t.redConResult(t.totalRating):""))])]),e("tr",[e("td",[t._v("Training Readiness")]),e("td",[t._v(t._s(t.trRating?t.trRating.toFixed(2)+"%":""))]),e("td",{class:t.trRating?t.redConStyle(t.redConResult(t.trRating)):""},[t._v(t._s(t.trRating?t.redConResult(t.trRating):""))])]),e("tr",[e("td",[t._v("Equipment Readiness")]),e("td",[t._v(t._s(t.readinessRating?t.readinessRating.toFixed(2)+"%":""))]),e("td",{class:t.readinessRating?t.redConStyle(t.redConResult(t.readinessRating)):""},[t._v(t._s(t.readinessRating?t.redConResult(t.readinessRating):""))])]),e("tr",[e("td",[t._v("Maintenance Readiness")]),e("td",[t._v(t._s(t.readinessRatingM?t.readinessRatingM.toFixed(2)+"%":""))]),e("td",{class:t.readinessRatingM?t.redConStyle(t.redConResult(t.readinessRatingM)):""},[t._v(t._s(t.readinessRatingM?t.redConResult(t.readinessRatingM):""))])]),e("tr",[e("td",[t._v("Facility Readiness")]),e("td",[t._v(t._s(t.readinessFacility?t.readinessFacility.toFixed(2)+"%":""))]),e("td",{class:t.readinessFacility?t.redConStyle(t.redConResult(t.readinessFacility)):""},[t._v(t._s(t.readinessFacility?t.redConResult(t.readinessFacility):""))])]),e("tr",[e("td",[e("b",[t._v("OVER ALL RATING")])]),e("td",[e("b",[t._v(t._s(t.TotalReadiness?t.TotalReadiness.toFixed(2)+"%":""))])]),e("td",{class:t.TotalReadiness?t.redConStyle(t.redConResult(t.TotalReadiness)):""},[t._v(t._s(t.TotalReadiness?t.redConResult(t.TotalReadiness):""))])])])])],1)],1)],1):e(z.Z,{attrs:{cols:"12",md:"9",lg:"9",xl:"9"}},[e(Lt.Z,{model:{value:t.all_tab,callback:function(e){t.all_tab=e},expression:"all_tab"}},[e($t.Z,{attrs:{value:"personnelTab"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("TO")]),e("th",[t._v("Actual"),e("br"),t._v("Assigned")]),e("th",[t._v("PSGR"),e("br"),t._v("(Actual"),e("br"),t._v("/TO x"),e("br"),t._v("100)")]),e("th",[t._v("Rank"),e("br"),t._v("(Nr"),e("br"),t._v("/Aligned)"),e("br"),t._v("PRR")]),e("th",[t._v("Specialty"),e("br"),t._v("(Nr"),e("br"),t._v("/Aligned)"),e("br"),t._v("FOS"),e("br"),t._v("and"),e("br"),t._v("Rating)"),e("br"),t._v("PSR")]),e("th",[t._v("PRR"),e("br"),t._v("(Aligned"),e("br"),t._v("/Actual x"),e("br"),t._v("100)")]),e("th",[t._v("PSR"),e("br"),t._v("(Aligned"),e("br"),t._v("/Actual x"),e("br"),t._v("100)")]),e("th",[t._v("READINESS")]),e("th",[t._v("RedCon")])])]),e("tbody",[t._l(t.psgTable,(function(a,i){return e("tr",{key:i},[e("td",[e("b",[t._v(t._s("unit"==t.selectedUnit?a.UnitSectionAbr:"all"==t.selectedUnit?a.UnitDepartmentAbr:a.UnitTeamAbr))])]),e("td",[t._v(t._s(a.RequiredMP))]),e("td",[t._v(t._s(a.actualMP))]),e("td",[t._v(t._s(a.psgr?a.psgr.toFixed(2)+"%":0))]),e("td",[t._v(t._s(a.GradePoint))]),e("td",[t._v(t._s(a.AfposPoint))]),e("td",[t._v(t._s(a.prr?a.prr.toFixed(2)+"%":0))]),e("td",[t._v(t._s(a.psr?a.psr.toFixed(2)+"%":0))]),e("td",[t._v(t._s(a.readiness?a.readiness.toFixed(2)+"%":0))]),e("td",{class:a.readiness?t.redConStyle(t.redConResult(a.readiness)):""},[t._v(t._s(a.readiness?t.redConResult(a.readiness).substr(0,2):""))])])})),t.psgTable.length>0?e("tr",{staticStyle:{"font-weight":"bold !important","background-color":"lightgrey !important"}},[e("td"),e("td",[t._v(t._s(t.personnelOverall.RequiredMP))]),e("td",[t._v(t._s(t.personnelOverall.actualMP))]),e("td",[t._v(t._s(t.personnelOverall.psgr.toFixed(2)+"%"))]),e("td",[t._v(t._s(t.personnelOverall.GradePoint))]),e("td",[t._v(t._s(t.personnelOverall.AfposPoint))]),e("td",[t._v(t._s(t.personnelOverall.prr.toFixed(2)+"%"))]),e("td",[t._v(t._s(t.personnelOverall.psr.toFixed(2)+"%"))]),e("td",[t._v(t._s(t.personnelOverall.all.toFixed(2)+"%"))]),e("td",{class:t.redConStyle(t.redConResult(t.personnelOverall.all))},[t._v(t._s(t.personnelOverall.all?t.redConResult(t.personnelOverall.all).substr(0,2):""))])]):t._e()],2)])],1)],1),e($t.Z,{attrs:{value:"trainingTab"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("Percentage"),e("br"),t._v("ORAC")]),e("th",[t._v("Percentage"),e("br"),t._v("METT")]),e("th",[t._v("READINESS")]),e("th",[t._v("RedCon")])])]),e("tbody",[t._l(t.trainingTable,(function(a,i){return e("tr",{key:i},[e("td",[e("b",[t._v(t._s("unit"==t.selectedUnit?a.UnitSectionAbr:"all"==t.selectedUnit?a.UnitDepartmentAbr:a.UnitTeamAbr))])]),e("td",[t._v(t._s(a.orac40.toFixed(2)+"%"))]),e("td",[t._v(t._s(a.Mett60.toFixed(2)+"%"))]),e("td",[t._v(t._s(a.trr.toFixed(2)+"%"))]),e("td",{class:a.trr?t.redConStyle(t.redConResult(a.trr)):""},[t._v(t._s(a.trr?t.redConResult(a.trr).substr(0,2):""))])])})),t.psgTable.length>0?e("tr",{staticStyle:{"font-weight":"bold !important","background-color":"lightgrey !important"}},[e("td"),e("td",[t._v(t._s(t.trainingOverall.orac40_all.toFixed(2)+"%"))]),e("td",[t._v(t._s(t.trainingOverall.mett60_all.toFixed(2)+"%"))]),e("td",[t._v(t._s(t.trainingOverall.all.toFixed(2)+"%"))]),e("td",{class:t.redConStyle(t.redConResult(t.trainingOverall.all))},[t._v(t._s(t.trainingOverall.all?t.redConResult(t.trainingOverall.all).substr(0,2):""))])]):t._e()],2)])],1)],1),e($t.Z,{attrs:{value:"equipmentTab"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table sticky",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("READINNES")]),e("th",[t._v("RedCon")])])]),e("tbody",[t._l(t.equipmentTable,(function(a,i){return e("tr",{key:i},[e("td",[e("b",[t._v(t._s("unit"==t.selectedUnit?a.UnitSectionAbr:"all"==t.selectedUnit?a.UnitDepartmentAbr:a.UnitTeamAbr))])]),e("td",[e("b",[t._v(t._s(a.Readiness.toFixed(2)+"%"))])]),e("td",{class:a.Readiness?t.redConStyle(t.redConResult(a.Readiness)):""},[t._v(t._s(a.Readiness?t.redConResult(a.Readiness).substr(0,2):""))])])})),e("tr",{staticStyle:{"background-color":"lightgrey !important","font-weight":"bold"}},[e("td"),e("td",[t._v(t._s(t.equipmentOverall.all.toFixed(2)+"%"))]),e("td",{class:t.equipmentOverall.all?t.redConStyle(t.redConResult(t.equipmentOverall.all)):""},[t._v(t._s(t.equipmentOverall.all?t.redConResult(t.equipmentOverall.all).substr(0,2):""))])])],2)])],1)],1),e($t.Z,{attrs:{value:"maintenanceTab"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table sticky",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",{staticClass:"sticky"},[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("READINNES")]),e("th",[t._v("RedCon")])])]),e("tbody",[t._l(t.maintenanceTable,(function(a,i){return e("tr",{key:i},[e("td",[e("b",[t._v(t._s("unit"==t.selectedUnit?a.UnitSectionAbr:"all"==t.selectedUnit?a.UnitDepartmentAbr:a.UnitTeamAbr))])]),e("td",[e("b",[t._v(t._s(a.Readiness.toFixed(2)+"%"))])]),e("td",{class:a.Readiness?t.redConStyle(t.redConResult(a.Readiness)):""},[t._v(t._s(a.Readiness?t.redConResult(a.Readiness).substr(0,2):""))])])})),e("tr",{staticStyle:{"background-color":"lightgrey !important","font-weight":"bold"}},[e("td"),e("td",[t._v(t._s(t.maintenanceOverall.all.toFixed(2)+"%"))]),e("td",{class:t.maintenanceOverall.all?t.redConStyle(t.redConResult(t.maintenanceOverall.all)):""},[t._v(t._s(t.maintenanceOverall.all?t.redConResult(t.maintenanceOverall.all).substr(0,2):""))])])],2)])],1)],1),e($t.Z,{attrs:{value:"facilityTab"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table sticky",attrs:{"fixed-header":"",height:"80vh"}},[e("thead",[e("tr",[e("th",[t._v("UNIT")]),e("th",[t._v("READINESS")]),e("th",[t._v("RedCon")])])]),e("tbody",[t._l(t.facilityTable,(function(a,i){return e("tr",{key:i},[e("td",[e("b",[t._v(t._s("unit"==t.selectedUnit?a.UnitSectionAbr:"all"==t.selectedUnit?a.UnitDepartmentAbr:a.UnitTeamAbr))])]),e("td",[e("b",[t._v(t._s(a.Readiness.toFixed(2)+"%"))])]),e("td",{class:a.Readiness?t.redConStyle(t.redConResult(a.Readiness)):""},[t._v(t._s(a.Readiness?t.redConResult(a.Readiness).substr(0,2):""))])])})),e("tr",{staticStyle:{"background-color":"lightgrey !important","font-weight":"bold"}},[e("td"),e("td",[t._v(t._s(t.facilityOverlall.all.toFixed(2)+"%"))]),e("td",{class:t.facilityOverlall.all?t.redConStyle(t.redConResult(t.facilityOverlall.all)):""},[t._v(t._s(t.facilityOverlall.all?t.redConResult(t.facilityOverlall.all).substr(0,2):""))])])],2)])],1)],1),e($t.Z,{attrs:{value:"overallTab"}},[e(o.Z,[e(Mt.Z,{staticClass:"elevation-1 custom-table"},[e("thead",[e("tr",[e("th",[t._v("Key Measurement Area (KMA)")]),e("th",[t._v("Rating")]),e("th",[t._v("RedCon Level")])])]),e("tbody",[e("tr",[e("td",[t._v("Personnel Readiness")]),e("td",[t._v(t._s(t.overAll.personnel?t.overAll.personnel.toFixed(2)+"%":""))]),e("td",{class:t.overAll.personnel?t.redConStyle(t.redConResult(t.overAll.personnel)):""},[t._v(t._s(t.overAll.personnel?t.redConResult(t.overAll.personnel):""))])]),e("tr",[e("td",[t._v("Training Readiness")]),e("td",[t._v(t._s(t.overAll.training?t.overAll.training.toFixed(2)+"%":""))]),e("td",{class:t.overAll.training?t.redConStyle(t.redConResult(t.overAll.training)):""},[t._v(t._s(t.overAll.training?t.redConResult(t.overAll.training):""))])]),e("tr",[e("td",[t._v("Equipment Readiness")]),e("td",[t._v(t._s(t.overAll.equipment?t.overAll.equipment.toFixed(2)+"%":""))]),e("td",{class:t.overAll.equipment?t.redConStyle(t.redConResult(t.overAll.equipment)):""},[t._v(t._s(t.overAll.equipment?t.redConResult(t.overAll.equipment):""))])]),e("tr",[e("td",[t._v("Maintenance Readiness")]),e("td",[t._v(t._s(t.overAll.maintenance?t.overAll.maintenance.toFixed(2)+"%":""))]),e("td",{class:t.overAll.maintenance?t.redConStyle(t.redConResult(t.overAll.maintenance)):""},[t._v(t._s(t.overAll.maintenance?t.redConResult(t.overAll.maintenance):""))])]),e("tr",[e("td",[t._v("Facility Readiness")]),e("td",[t._v(t._s(t.overAll.facility?t.overAll.facility.toFixed(2)+"%":""))]),e("td",{class:t.overAll.facility?t.redConStyle(t.redConResult(t.overAll.facility)):""},[t._v(t._s(t.overAll.facility?t.redConResult(t.overAll.facility):""))])]),e("tr",[e("td",[e("b",[t._v("OVER ALL RATING")])]),e("td",[e("b",[t._v(t._s(t.overAll.all?t.overAll.all.toFixed(2)+"%":""))])]),e("td",{class:t.overAll.all?t.redConStyle(t.redConResult(t.overAll.all)):""},[t._v(t._s(t.overAll.all?t.redConResult(t.overAll.all):""))])])])])],1),e(Et.Z,{directives:[{name:"show",rawName:"v-show",value:"all"==t.selectedUnit,expression:"selectedUnit == 'all'"}]},[e("h3",[t._v("Assessment:")]),e(o.Z,{attrs:{elevation:"2"}},[e(Mt.Z,{staticClass:"custom-table"},t._l(t.remarksData,(function(a,i){return e("tbody",{key:i},[e("tr",[e("td",{staticStyle:{"font-weight":"bold","text-align":"left !important","background-color":"lightgray"}},[t._v(t._s(a.Question))])]),e("tr",{attrs:{height:"90%"}},[e("td",{staticStyle:{"text-align":"left !important","white-space":"pre-wrap"},on:{dblclick:function(e){t.editing=!0,t.editIndex=i}}},[t.editing&&t.editIndex===i?[e("div",{staticStyle:{"white-space":"pre-wrap"},attrs:{contenteditable:""},on:{blur:function(e){return t.updateRemarks(a)}}},[t._v(t._s(a.Remarks))])]:[e("div",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(a.Remarks))])]],2)])])})),0)],1)],1)],1)],1)],1)],1),e(F.Z,{directives:[{name:"show",rawName:"v-show",value:"all"==t.selectedUnit&&"T14"==t.user.office&&t.generateDate&&"overallTab"==t.all_tab,expression:"selectedUnit == 'all' &&  user.office == 'T14' && generateDate && all_tab == 'overallTab'"}]},[e(z.Z,{attrs:{cols:"12",xl:"3",md:"3",lg:"3"}},[e("DeclinedCard",{ref:"DeclinedCard",attrs:{details:t.reasonDetails}})],1)],1),e(Zt.Z,{attrs:{value:t.loadingPage}},[e(Pt.Z,{attrs:{indeterminate:"",size:"70"}}),e("br"),e("span",[t._v("LOADING")])],1),e("Details",{ref:"Details"}),e("AllPrint",{ref:"AllPrint"}),e("SubmitDialog",{ref:"SubmitDialog",attrs:{getAll:t.statusn3Logs}}),e("DeclinedDialog",{ref:"DeclinedDialog",on:{"data-to-parent":t.handleDeclinedData}})],1)},Hn=[],Vn=function(){var t=this,e=t._self._c;return e("div")},Wn=[];Qt().vfs=jt.I.vfs;var Kn={data(){return{imageDataUrl:""}},methods:{redCon(t){let e;return e=t<=100&&t>=85?"R1 - Fully Mission Capable":t<=84&&t>=75?"R2 - Mission Capable":t<=74&&t>=51?"R3 - Partially Mission Capable":"R4 - Not Mission Capable",e},redConStyle(t){let e;return e=t.includes("R1")?"redCon1":t.includes("R2")?"redCon2":t.includes("R3")?"redCon3":"redCon4",e},printData(t){"office"==t.select?this.printOffice(t):this.printUnit(t)},async printOffice(t){const e=["Key Measurement Area (KMA)","Rating","RedCon Level"],a={fillColor:"lightgrey",fontSize:11,bold:!0,alignment:"center",noWrap:!0},i={fontSize:8,noWrap:!0},n={width:"100%",content:[{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:70,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:t.subUnit,alignment:"center",fontSize:11,margin:[0,0,0,2]},"\n",{text:"READINNES REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["35%","30%","35%"],body:[e.map((t=>({text:t,style:"tableHeader"}))),[{text:"Personnel Readiness",alignment:"center",fontSize:10},{text:t.personnel.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.personnel)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.personnel))}],[{text:"Training Readiness",alignment:"center",fontSize:10},{text:t.training.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.training)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.training))}],[{text:"Equipment Readiness",alignment:"center",fontSize:10},{text:t.equipment.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.equipment)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.equipment))}],[{text:"Maintenance Readiness",alignment:"center",fontSize:10},{text:t.maintenance.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.maintenance)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.maintenance))}],[{text:"Facility Readiness",alignment:"center",fontSize:10},{text:t.facility.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.facility)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.facility))}],[{text:"OVER ALL RATING",alignment:"center",fontSize:10,bold:!0},{text:t.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0},{text:this.redCon(t.all)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all))}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}}],styles:{tableHeader:a,tableBody:i,redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};Qt().createPdf(n).download("Readiness_Report.pdf")},printUnit(t){let e=[],a=[],i=[],n=[],r=[];t.personnel.forEach((a=>{let i=[{text:"unit"==t.select?a.UnitSectionAbr:"all"==t.select?a.UnitDepartmentAbr:a.UnitTeamAbr||"",alignment:"center",fontSize:"unit"==t.select?a.UnitSectionAbr.length>5:"all"==t.select?a.UnitDepartmentAbr.length>5:a.UnitTeamAbr.length>5?8:10,bold:!0},{text:a.RequiredMP||"",alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.actualMP||"",alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.psgr.toFixed(2)+"%"||0,alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.GradePoint||"",alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.AfposPoint||"",alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.prr.toFixed(2)+"%"||0,alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.psr.toFixed(2)+"%"||0,alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:a.readiness.toFixed(2)+"%"||0,alignment:"center",fontSize:"hpn"!=t.select?10:9},{text:this.redCon(a.readiness).substr(0,2)||"",alignment:"center",fontSize:"hpn"!=t.select?10:9,style:this.redConStyle(this.redCon(a.readiness))}];e.push(i)})),t.training.forEach((e=>{let i=[{text:"unit"==t.select?e.UnitSectionAbr:"all"==t.select?e.UnitDepartmentAbr:e.UnitTeamAbr||"",alignment:"center",fontSize:10,bold:!0},{text:e.orac40.toFixed(2)+"%"||0,alignment:"center",fontSize:10},{text:e.Mett60.toFixed(2)+"%"||0,alignment:"center",fontSize:10},{text:e.trr.toFixed(2)+"%"||0,alignment:"center",fontSize:10},{text:this.redCon(e.trr).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(e.trr))}];a.push(i)})),t.equipment.forEach((e=>{let a=[{text:"unit"==t.select?e.UnitSectionAbr:"all"==t.select?e.UnitDepartmentAbr:e.UnitTeamAbr||"",alignment:"center",fontSize:10,bold:!0},{text:e.Readiness.toFixed(2)+"%"||0,alignment:"center",fontSize:10},{text:this.redCon(e.Readiness).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(e.Readiness))}];i.push(a)})),t.maintenance.forEach((e=>{let a=[{text:"unit"==t.select?e.UnitSectionAbr:"all"==t.select?e.UnitDepartmentAbr:e.UnitTeamAbr||"",alignment:"center",fontSize:10,bold:!0},{text:e.Readiness.toFixed(2)+"%"||0,alignment:"center",fontSize:10},{text:this.redCon(e.Readiness).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(e.Readiness))}];n.push(a)})),t.facility.forEach((e=>{let a=[{text:"unit"==t.select?e.UnitSectionAbr:"all"==t.select?e.UnitDepartmentAbr:e.UnitTeamAbr||"",alignment:"center",fontSize:10,bold:!0},{text:e.Readiness.toFixed(2)+"%"||0,alignment:"center",fontSize:10},{text:this.redCon(e.Readiness).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(e.Readiness))}];r.push(a)}));let s={content:[],styles:{tableHeader:{fillColor:"lightgrey",bold:!0,alignment:"center"},redCon1:{color:"white",fillColor:"green"},redCon2:{color:"white",fillColor:"blue"},redCon3:{fillColor:"yellow"},redCon4:{color:"white",fillColor:"red"}},footer(t,e){return{text:`Page ${t.toString()} of ${e.toString()}`,alignment:"right",margin:[50,0],fontSize:"6"}}};if(("1"==t.rights||["1","3"].includes(t.res)&&"all"==t.select||"unit"==t.select)&&s.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"all"==t.select?null:"\n","all"==t.select?null:{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"PERSONNEL READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["10%","10%","10%","10%","10%","10%","10%","10%","10%","10%"],body:[[{text:"UNIT",style:"tableHeader",margin:[0,15],fontSize:8},{text:"TO",style:"tableHeader",margin:[0,15],fontSize:8},{text:"Actual \n Assigned",style:"tableHeader",margin:[0,15],fontSize:8},{text:"PSGR \n (Actual \n /TO x \n 100)",style:"tableHeader",margin:[0,10],fontSize:7},{text:"Rank \n (Nr \n /Aligned) \n PRR)",style:"tableHeader",margin:[0,10],fontSize:7},{text:"Specialty \n (Nr / Aligned) \n FOS and \n Rating)\n PSR",style:"tableHeader",fontSize:7},{text:"PRR \n (Aligned \n /Actual x \n 100)",style:"tableHeader",margin:[0,10],fontSize:7},{text:"PSR \n (Aligned \n /Actual x \n 100)",style:"tableHeader",margin:[0,10],fontSize:7},{text:"READINESS",style:"tableHeader",margin:[0,15],fontSize:8},{text:"RedCon",style:"tableHeader",margin:[0,15],fontSize:8}],...e,[{text:"",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.RequiredMP,alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.actualMP,alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.psgr.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.GradePoint,alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.AfposPoint,alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.prr.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.psr.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.personnelAll.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:this.redCon(t.personnelAll.all).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.personnelAll.all)),bold:!0}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{text:"",pageBreak:"after"}),("1"==t.rights||["8","3"].includes(t.res)&&"all"==t.select||"unit"==t.select)&&s.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"TRAINING READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["20%","20%","20%","20%","20%"],body:[[{text:"UNIT",alignment:"center",fontSize:10,margin:[0,2],style:"tableHeader"},{text:"Percentage \n ORAC",alignment:"center",fontSize:10,style:"tableHeader"},{text:"Percentage \n METT",alignment:"center",fontSize:10,style:"tableHeader"},{text:"READINESS",alignment:"center",fontSize:10,margin:[0,2],style:"tableHeader"},{text:"RedCon",alignment:"center",fontSize:10,margin:[0,2],style:"tableHeader"}],...a,[{text:"",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.trainingAll.orac40_all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.trainingAll.mett60_all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.trainingAll.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:this.redCon(t.trainingAll.all).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.trainingAll.all)),bold:!0}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{text:"",pageBreak:"after"}),("1"==t.rights||["4","3"].includes(t.res)&&"all"==t.select||"unit"==t.select)&&s.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"EQUIPMENT READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["40%","30%","30%"],body:[[{text:"UNIT",alignment:"center",fontSize:10,style:"tableHeader"},{text:"READINESS",alignment:"center",fontSize:10,style:"tableHeader"},{text:"RedCon",alignment:"center",fontSize:10,style:"tableHeader"}],...i,[{text:"",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.equipmentAll.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:this.redCon(t.equipmentAll.all).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.equipmentAll.all)),bold:!0}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{text:"",pageBreak:"after"},{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"MAINTENANCE READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["40%","30%","30%"],body:[[{text:"UNIT",alignment:"center",fontSize:10,style:"tableHeader"},{text:"READINESS",alignment:"center",fontSize:10,style:"tableHeader"},{text:"RedCon",alignment:"center",fontSize:10,style:"tableHeader"}],...n,[{text:"",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.maintenanceAll.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:this.redCon(t.maintenanceAll.all).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.maintenanceAll.all)),bold:!0}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{text:"",pageBreak:"after"},{margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"FACILITY READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["40%","30%","30%"],body:[[{text:"UNIT",alignment:"center",fontSize:10,style:"tableHeader"},{text:"READINESS",alignment:"center",fontSize:10,style:"tableHeader"},{text:"RedCon",alignment:"center",fontSize:10,style:"tableHeader"}],...r,[{text:"",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.facilityAll.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:this.redCon(t.facilityAll.all).substr(0,2)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.facilityAll.all)),bold:!0}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}},{text:"",pageBreak:"after"}),"1"==t.rights||"3"==t.res&&"all"==t.select||"unit"==t.select){let e=[];s.content.push({margin:[120,0,0,0],columns:[{image:this.imageDataUrl,width:60,alignment:"right",margin:[0,0,0,0]},{width:"auto",text:[{text:"PHILIPPINE NAVY",alignment:"center",fontSize:15,margin:[0,0,0,2]},"\n",{text:t.unit,alignment:"center",fontSize:12,margin:[0,0,0,2]},"\n",{text:"OVERALL READINESS REPORT",alignment:"center",fontSize:13,margin:[0,0,0,2]},"\n",{text:t.month,alignment:"center",fontSize:10,margin:[0,0,0,2]}]}]},{table:{headerRows:1,widths:["40%","30%","30%"],body:[[{text:"Key Measurement Area (KMA)",alignment:"center",fontSize:10,style:"tableHeader"},{text:"Rating",alignment:"center",fontSize:10,style:"tableHeader"},{text:"RedCon Level",alignment:"center",fontSize:10,style:"tableHeader"}],[{text:"Personnel Readiness",alignment:"center",fontSize:10},{text:t.all.personnel.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.all.personnel)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all.personnel))}],[{text:"Training Readiness",alignment:"center",fontSize:10},{text:t.all.training.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.all.training)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all.training))}],[{text:"Equipment Readiness",alignment:"center",fontSize:10},{text:t.all.equipment.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.all.equipment)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all.equipment))}],[{text:"Maintenance Readiness",alignment:"center",fontSize:10},{text:t.all.maintenance.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.all.maintenance)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all.maintenance))}],[{text:"Facility Readiness",alignment:"center",fontSize:10},{text:t.all.facility.toFixed(2)+"%",alignment:"center",fontSize:10},{text:this.redCon(t.all.facility)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all.facility))}],[{text:"OVER ALL RATING",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:t.all.all.toFixed(2)+"%",alignment:"center",fontSize:10,bold:!0,fillColor:"lightgrey"},{text:this.redCon(t.all.all)||"",alignment:"center",fontSize:10,style:this.redConStyle(this.redCon(t.all.all))}]],layout:{fillColor:"autoTableAlternate",hLineWidth:function(t,e){return 0===t||1===t||t===e.table.body.length?1:0},vLineWidth:function(){return 0},hLineColor:function(t){return 1===t?"#000000":"#00000000"}}}}),"all"==t.select&&t.remarksData&&t.remarksData.length>0&&(t.remarksData.forEach((t=>{if(t.Question){let a=[{text:t.Question||"",alignment:"left",fontSize:10,fillColor:"lightgrey",bold:!0}];e.push(a)}if(t.Remarks){let a=[{text:t.Remarks||"",alignment:"left",fontSize:10}];e.push(a)}})),s.content.push({},{text:"Assessment:",alignment:"left",fontSize:15,bold:!0,margin:[0,20,0,0]},{table:{widths:["*"],body:e}},{},{margin:[0,70,0,0],columns:[{text:[{text:"PREPARED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.PreparedBy,alignment:"center",fontSize:t.sign.PreparedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]},{text:[{text:"NOTED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.NotedBy,alignment:"center",fontSize:t.sign.NotedBy&&t.sign.NotedBy.length<23?12:10,bold:!0,margin:[0,0,80,0]},"\n"]},{text:[{text:"APPROVED BY:",alignment:"center",fontSize:12},"\n","\n","\n","\n",{text:t.sign.ApprovedBy,alignment:"center",fontSize:t.sign.ApprovedBy&&t.sign.ApprovedBy.length<23?12:10,bold:!0,margin:[0,0,0,0]},"\n"]}]}))}Qt().createPdf(s).download("READINESS_REPORT_ALL.pdf")}},computed:{},mounted(){let t=a(8719)(`./${this.$store.state.user.main}.png`);const e=(t,e)=>{const a=new Image;a.crossOrigin="Anonymous",a.onload=()=>{const t=document.createElement("canvas");t.width=a.width,t.height=a.height;const i=t.getContext("2d");i.drawImage(a,0,0);const n=t.toDataURL("image/png");e(n)},a.src=t};e(t,(t=>{this.imageDataUrl=t}))}},Jn=Kn,Xn=(0,Z.Z)(Jn,Vn,Wn,!1,null,"f5048f26",null),tr=Xn.exports,er={components:{Details:ie,AllPrint:tr,StatusTimeline:Ve,SubmitDialog:ze,DeclinedDialog:De,DeclinedCard:ue},data(){return{selectedUnit:null,generateDate:null,department:null,section:null,team:null,generateMonthDialog:!1,actualMP:[],tableData:[],psgTable:[],trainingTable:[],equipmentTable:[],maintenanceTable:[],facilityTable:[],all_tab:"",editing:!1,editIndex:null,statusN3:0,declinedData:!1,timelineData:{}}},methods:{personnelTab(t){this.all_tab=t},trainingTab(t){this.all_tab=t},equipmentTab(t){this.all_tab=t},maintenanceTab(t){this.all_tab=t},facilityTab(t){this.all_tab=t},overallTab(t){this.all_tab=t},async callGetTimeline(){this.$refs.StatusTimeline?await this.$refs.StatusTimeline.getTimeline():console.error("StatusTimeline ref not available yet.")},async generate(){this.$store.state.loadingPage=!0,this.$store.state.monthData=this.generateDate,Promise.all([this.getPsgTable(),this.getTrainingData(),this.getEquipment(),this.getMaintenance(),this.getFacility()]),"T14"==this.user.office&&this.statusn3Logs()},changeFilter(){this.psgTable=[],this.trainingTable=[],this.equipmentTable=[],this.maintenanceTable=[],this.facilityTable=[]},statusn3Logs(){k()({method:"post",url:`${this.$baseUrl}api/getN3status`,data:{table:"n3",Month:this.generateDate}}).then((async t=>{this.statusN3=t.data,await this.callGetTimeline(),await this.$store.dispatch("diplayRemarks","n3"),await this.$refs.DeclinedCard.getReason()}))},async getPsgTable(){"office"==this.selectedUnit?(this.$store.state.monthData=this.generateDate,this.$store.state.sectionData=this.section,this.$store.state.teamData=this.team,this.$store.dispatch("getPoints"),k()({method:"post",url:`${this.$baseUrl}api/reportPsgTable`,data:{department:this.department,section:this.section,team:this.team,Month:this.generateDate,selected:this.selectedUnit}}).then((t=>{this.selectedUnit&&(this.psgTable=t.data.reduce(((t,e)=>{let a=t.findIndex((t=>t.DivisionCode==e.DivisionCode));if(-1==a){let a={...e};a.count=1,a.GroupDivision=e.DivisionName,a.TotalRequired=e.countRequired,a.TotalActual=e.countActual,t.push(a)}else t[a].TotalRequired+=e.countRequired,t[a].TotalActual+=e.countActual,t[a].count+=1,e.totalCountRequired=t[a].TotalRequired,e.totalCountActual=t[a].TotalActual,t.push(e);return t}),[]),console.log(this.psgTable,"ceo"))}))):k()({method:"post",url:`${this.$baseUrl}api/personnelAll`,data:{Month:this.generateDate,selected:this.selectedUnit,department:this.department}}).then((t=>{this.psgTable=t.data.reduce(((t,e)=>{let a;return a="unit"==this.selectedUnit?t.findIndex((t=>t.UnitSectionCode==e.UnitSectionCode)):"all"==this.selectedUnit?t.findIndex((t=>t.UnitDepartmentCode==e.UnitDepartmentCode)):t.findIndex((t=>t.UnitTeamCode==e.UnitTeamCode)),-1==a&&(e.actualMP=e.actualMP?e.actualMP:0,e.RequiredMP=e.RequiredMP?e.RequiredMP:0,e.GradePoint=e.GradePoint?e.GradePoint:0,e.AfposPoint=e.AfposPoint?e.AfposPoint:0,e.psgr=e.actualMP?e.actualMP/e.RequiredMP*100:0,e.psgr50=e.actualMP?.5*e.psgr:0,e.prr=e.actualMP?e.GradePoint/e.actualMP*100:0,e.prr40=e.actualMP?.4*e.prr:0,e.psr=e.actualMP?e.AfposPoint/e.actualMP*100:0,e.psr60=e.actualMP?.6*e.psr:0,e.pqr=e.actualMP?e.prr40+e.psr60:0,e.pqr50=e.actualMP?.5*e.pqr:0,e.readiness=e.actualMP?e.psgr50+e.pqr50:0,t.push(e)),t}),[])}))},async getTrainingData(){k()({method:"post",url:`${this.$baseUrl}api/trainingReportData`,data:{department:this.department,Section:this.section,Team:this.team,Month:this.generateDate,selected:this.selectedUnit}}).then((t=>{"office"==this.selectedUnit?(this.trainingTable=t.data.reduce(((t,e)=>{let a=t.findIndex((t=>t.id==e.id));return-1==a&&(1==this.quarterDate?(e.Required=e.Required1,e.Actual=e.Actual1):2==this.quarterDate?(e.Required=e.Required1+e.Required2,e.Actual=e.Actual1+e.Actual2):3==this.quarterDate?(e.Required=e.Required1+e.Required2+e.Required3,e.Actual=e.Actual1+e.Actual2+e.Actual3):4==this.quarterDate&&(e.Required=e.Required1+e.Required2+e.Required3+e.Required4,e.Actual=e.Actual1+e.Actual2+e.Actual3+e.Actual4),e.colPercentage=e.Actual/e.Required*100,t.push(e)),t}),[]),console.log(this.trainingTable,"trainig")):this.trainingTable=t.data.reduce(((t,e)=>{let a;a="unit"==this.selectedUnit?t.findIndex((t=>t.UnitSectionCode==e.UnitSectionCode)):"all"==this.selectedUnit?t.findIndex((t=>t.UnitDepartmentCode==e.UnitDepartmentCode)):t.findIndex((t=>t.UnitTeamCode==e.UnitTeamCode));let i=Number(e.Actual)/e.Required;return-1==a?(e.orac=e.ActualMp&&e.totalAssigned?Number(e.ActualMp)/e.totalAssigned*100:0,e.orac40=e.orac?.4*e.orac:0,e.ActualMet=e.Actual,e.RequiredMet=e.Required,e.Mett=!isNaN(e.Actual)&&i?100*i:0,e.Mett60=e.Mett?.6*e.Mett:0,e.trr=Number(e.orac40)+Number(e.Mett60),t.push(e)):(t[a].ActualMet=e.Actual,t[a].RequiredMet=e.Required,t[a].Mett=!isNaN(e.Actual)&&i?100*i:0,t[a].Mett60=t[a].Mett?.6*t[a].Mett:0,t[a].trr=Number(t[a].orac40)+Number(t[a].Mett60)),t}),[]),this.getActualMp()}))},getActualMp(){k()({method:"post",url:`${this.$baseUrl}api/ActualMPTrainingReport`,data:{department:this.department,Section:this.section,Team:this.team,Month:this.generateDate}}).then((t=>{this.actualMP=t.data,this.$store.state.loadingPage=!1}))},async getEquipment(){k()({method:"post",url:`${this.$baseUrl}api/equipmentReportData`,data:{department:this.department,Section:this.section,Team:this.team,Month:this.generateDate,selected:this.selectedUnit}}).then((t=>{"office"!=this.selectedUnit?(this.equipmentTable=t.data.reduce(((t,e)=>{let a;if(a="unit"==this.selectedUnit?t.findIndex((t=>t.UnitSectionCode==e.UnitSectionCode)):"all"==this.selectedUnit?t.findIndex((t=>t.UnitDepartmentCode==e.UnitDepartmentCode)):t.findIndex((t=>t.UnitTeamCode==e.UnitTeamCode)),-1==a){let a={...e};a.Readiness=e.Readiness,t.push(e)}else t[a].Readiness+=e.Readiness;return t}),[]),"hpn"!=this.selectedUnit&&this.equipmentTable.forEach((t=>{0!=t.Readiness&&(t.Readiness/=t.Report)}))):this.equipmentTable=t.data}))},getMaintenance(){k()({method:"post",url:`${this.$baseUrl}api/maintenanceReportData`,data:{department:this.department,Section:this.section,Team:this.team,Month:this.generateDate,selected:this.selectedUnit}}).then((t=>{"office"!=this.selectedUnit?(this.maintenanceTable=t.data.reduce(((t,e)=>{let a;if(a="unit"==this.selectedUnit?t.findIndex((t=>t.UnitSectionCode==e.UnitSectionCode)):"all"==this.selectedUnit?t.findIndex((t=>t.UnitDepartmentCode==e.UnitDepartmentCode)):t.findIndex((t=>t.UnitTeamCode==e.UnitTeamCode)),-1==a){let a={...e};a.Readiness=e.Readiness,t.push(e)}else t[a].Readiness+=e.Readiness;return t}),[]),"hpn"!=this.selectedUnit&&this.maintenanceTable.forEach((t=>{0!=t.Readiness&&(t.Readiness/=t.Report)}))):this.maintenanceTable=t.data}))},getFacility(){k()({method:"post",url:`${this.$baseUrl}api/facilityReportData`,data:{department:this.department,Section:this.section,Team:this.team,Month:this.generateDate,selected:this.selectedUnit}}).then((t=>{"office"!=this.selectedUnit?this.facilityTable=t.data.reduce(((t,e)=>{let a;return a="unit"==this.selectedUnit?t.findIndex((t=>t.UnitSectionCode==e.UnitSectionCode)):"all"==this.selectedUnit?t.findIndex((t=>t.UnitDepartmentCode==e.UnitDepartmentCode)):t.findIndex((t=>t.UnitTeamCode==e.UnitTeamCode)),-1==a&&t.push(e),t}),[]):this.facilityTable=t.data}))},roundUpValue(t){const e=Math.round(100*t)/100;return e.toFixed(2)},redConResult(t){if(this.psgTable.length>0)return this.$refs.Details.redCon(Number(t))},redConStyle(t){if(t)return this.$refs.Details.redConStyle(t)},updateRemarks(t){this.editing=!1,this.editIndex=null;const e=event.target.innerText;let a={id:t.id,remarks:e};this.$store.dispatch("updateRemarks",a)},submitData(t,e){const a=window.confirm("Are you sure you want to submit this report?");a&&(this.$store.dispatch("diplayRemarks","n3"),this.$store.dispatch("getQuestion","n3"),this.$refs.SubmitDialog.openDialog(t,e,"n3"))},approvedData(t,e,a){const i=window.confirm("Are you sure you want to approved this report?");if(i){let i={month:t,team:e,table:"n3",name:this.$store.state.user.name,url:this.$baseUrl,status:a};return Promise.all([re()(i),this.statusn3Logs()])}},async declined(t,e){this.declinedData=!1;let a={month:t,title:`Reason for the Decline in the Reporting Month of ${this.formattedDate}`,team:e,table:"n3",name:this.$store.state.user.name,url:this.$baseUrl,today:A()().format("YYYY-MM-DD HH:mm:ss")};this.$refs.DeclinedDialog.openDialog(a)},handleDeclinedData(t){this.declinedData=t},handledTimelineData(t){this.timelineData={...t[0]}},print(){const t=window.confirm("Are you sure you want to print this report?");if("T14"==this.user.office&&this.$store.dispatch("diplayRemarks","n3"),t){let t={};t="office"==this.selectedUnit?{month:this.formattedDate,select:this.selectedUnit,unit:this.$store.state.user.mainName,subUnit:"D01"==this.$store.state.user.main?this.$store.state.user.officeName:this.$store.state.user.unitName,personnel:this.totalRating,training:this.trRating,equipment:this.readinessRating,maintenance:this.readinessRatingM,facility:this.readinessFacility,all:this.TotalReadiness}:{month:this.formattedDate,select:this.selectedUnit,unit:this.$store.state.user.mainName,personnel:this.psgTable,personnelAll:this.personnelOverall,training:this.trainingTable,trainingAll:this.trainingOverall,equipment:this.equipmentTable,equipmentAll:this.equipmentOverall,maintenance:this.maintenanceTable,maintenanceAll:this.maintenanceOverall,facility:this.facilityTable,facilityAll:this.facilityOverlall,all:this.overAll,rights:this.$store.state.user.rights,office:this.$store.state.user.office,res:this.$store.state.user.res,remarksData:this.remarksData,status:this.statusN3,sign:this.timelineData},this.$refs.AllPrint.printData(t)}}},computed:{...(0,T.rn)(["user","gradePoints","afposPoints","loadingPage","remarksData"]),formattedDate(){if(this.generateDate){const t=new Date(this.generateDate),e=t.toLocaleString("default",{month:"long"}),a=t.getFullYear();return`${e} ${a}`}return null},unitItems(){const t=this.$store.state.user;let e;return e="1"==t.rights||["1","3","4","8"].includes(t.res)&&"D01"==t.main?["T38","T14"].includes(t.office)?[{text:"My Office",value:"office"},{text:"Unit",value:"unit"},{text:"HPN",value:"hpn"},{text:"All",value:"all"}]:[{text:"My Office",value:"office"},{text:"Unit",value:"unit"},{text:"All",value:"all"}]:[{text:"Unit",value:"unit"},{text:"Sub Unit",value:"office"}],e},reasonDetails(){let t={table:"n3",month:this.generateDate,unit:this.user.office};return t},personnelOverall(){let t={RequiredMP:0,actualMP:0,psgr:0,psgr50:0,GradePoint:0,AfposPoint:0,prr:0,prr40:0,psr:0,psr60:0,pqr:0,pqr50:0,all:0};for(const e of this.psgTable)t.RequiredMP+=e.RequiredMP,t.actualMP+=e.actualMP,t.psgr=t.actualMP/t.RequiredMP*100,t.psgr50=.5*t.psgr,t.GradePoint+=e.GradePoint,t.AfposPoint+=e.AfposPoint,t.prr=t.GradePoint/t.actualMP*100,t.prr40=.4*t.prr,t.psr=t.AfposPoint/t.actualMP*100,t.psr60=.6*t.psr,t.pqr=t.prr40+t.psr60,t.pqr50=.5*t.pqr,t.all=t.psgr50+t.pqr50;return t},totalToe(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalRequired?t+e.TotalRequired:t),0):0},totalActual(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalActual?t+e.TotalActual:t),0):0},psgRating(){if(this.psgTable.length>0){let t;return t=this.totalActual/this.totalToe*100,t}return 0},gradeRating(){let t;return t=this.gradePoints/this.totalActual*100,t},gradeRating04(){let t;return t=.4*this.gradeRating,t},afposRating(){let t;return t=this.afposPoints/this.totalActual*100,t},afposRating06(){let t;return t=.6*this.afposRating,t},psgRating05(){let t;return t=this.psgRating?.5*this.psgRating:0,t},pqrRating05(){let t;return t=.5*this.pqrRatingTotal,t},pqrRatingTotal(){let t;return t=.4*this.gradeRating+.6*this.afposRating,t},totalRating(){let t;return t=Number(this.psgRating05)+Number(this.pqrRating05),t==1/0?0:t},quarterDate(){if(this.generateDate){let t=parseInt(this.generateDate.substr(5,2),10),e=null;return t>=1&&t<=3?e="1":t>=4&&t<=6?e="2":t>=7&&t<=9?e="3":t>=10&&t<=12&&(e="4"),e}return!1},trainingOverall(){let t={assigned_all:0,actaulMp_all:0,orac_all:0,orac40_all:0,required_all:0,actualMet_all:0,mett_all:0,mett60_all:0,all:0};for(const e of this.trainingTable)t.assigned_all+=e.totalAssigned,t.actaulMp_all+=Number(e.ActualMp),t.orac_all=t.actaulMp_all/t.assigned_all*100,t.orac40_all=t.orac_all?.4*t.orac_all:0,t.required_all+=Number(e.RequiredMet),t.actualMet_all+=Number(e.ActualMet),t.mett_all=t.actualMet_all/t.required_all*100,t.mett60_all=t.mett_all?.6*t.mett_all:0,t.all=t.mett60_all+t.orac40_all;return t},totalActualMp(){return this.trainingTable.length>0?this.actualMP.reduce(((t,e)=>e.ActualMp&&e.Month==this.generateDate?t+Number(e.ActualMp):t),0):0},totalRequired(){return this.trainingTable.length>0?this.trainingTable.reduce(((t,e)=>e.Month<=this.generateDate&&e.Required?t+Number(e.Required):t),0):0},totalOrac(){return this.trainingTable.length>0?this.trainingTable.reduce(((t,e)=>e.Month<=this.generateDate&&e.Actual?t+Number(e.Actual):t),0):0},metPercentage(){if(this.trainingTable.length>0){let t;return t=this.totalOrac/this.totalRequired*100,t}return 0},totalAssigned(){return this.psgTable.length>0?this.psgTable.reduce(((t,e)=>e.TotalActual?t+e.TotalActual:t),0):0},oracPercentage(){if(this.trainingTable.length>0){let t;return t=this.totalActualMp/this.totalAssigned*100,t}return 0},trRating(){if(this.trainingTable.length>0){let t,e=this.totalOrac/this.totalRequired*100*.6,a=this.totalActualMp/this.totalAssigned*100*.4;return t=Number(a)+Number(e),t==1/0?0:t}return 0},equipmentOverall(){let t={count:0,totalReadiness:0,all:0};for(const e of this.equipmentTable)e.Readiness&&(t.count++,t.totalReadiness+=e.Readiness);return t.count>0&&(t.all=t.totalReadiness/t.count),t},totalTable(){const t=["MOBILITY","Ground","Sea","Air","FIREPOWER","Individual","Crew Served Weapon","COMMUNICATIONS","MEDICAL","DENTAL","QUARTERMASTER"];return t.map((t=>{const e=this.equipmentTable.find((e=>e.Sub===t||e.Category===t));if(e){const a=e.Category||t,i=e.Sub||t,n=this.equipmentTable.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.Required):0)),0),r=this.equipmentTable.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.Actual):0)),0),s=r>n?100:0!==n?r/n*100:0;return{Category:a,Sub:i,totalRequired:n,totalActual:r,percent:s,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"MOBILITY"==a||"FIREPOWER"==a||"COMMUNICATIONS"==a?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}return{Category:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t?"MOBILITY":"Crew Served Weapon"===t?"FIREPOWER":t,Sub:t,totalRequired:0,totalActual:0,percent:0,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t||"Crew Served Weapon"===t||"COMMUNICATIONS"==t?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}))},totalPrimaryRequired(){return this.equipmentTable.reduce(((t,e)=>t+("primary"===e.Info?Number(e.Required):0)),0)},totalSecondaryRequired(){return this.equipmentTable.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.Required):0)),0)},totalPrimaryActual(){return this.equipmentTable.reduce(((t,e)=>t+("primary"===e.Info?Number(e.Actual):0)),0)},totalSecondaryActual(){return this.equipmentTable.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.Actual):0)),0)},averagePrimary(){let t=0,e=0;for(const a of this.totalTable)if(a.percent&&"primary"==a.info&&"MOBILITY"!=a.Sub&&"FIREPOWER"!=a.Sub){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averageSecondary(){let t=0,e=0;for(const a of this.totalTable)if(a.percent&&"secondary"==a.info){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},mee(){return.8*this.averagePrimary},see(){return.2*this.averageSecondary},readinessRating(){return this.mee+this.see},maintenanceOverall(){let t={count:0,totalReadiness:0,all:0};for(const e of this.maintenanceTable)e.Readiness&&(t.count++,t.totalReadiness+=e.Readiness);return t.count>0&&(t.all=t.totalReadiness/t.count),t},totalTableM(){const t=["MOBILITY","Ground","Sea","Air","FIREPOWER","Individual","Crew Served Weapon","COMMUNICATIONS","MEDICAL","DENTAL","QUARTERMASTER"];return t.map((t=>{const e=this.maintenanceTable.find((e=>e.Sub===t||e.Category===t));if(e){const a=e.Category||t,i=e.Sub||t,n=this.maintenanceTable.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.Actual):0)),0),r=this.maintenanceTable.reduce(((e,a)=>e+(a.Sub===t||a.Category===t?Number(a.ActualM):0)),0),s=0!==n?r/n*100:0;return{Category:a,Sub:i,totalRequired:n,totalActual:r,percent:s,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"MOBILITY"==a||"FIREPOWER"==a||"COMMUNICATIONS"==a?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}return{Category:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t?"MOBILITY":"Crew Served Weapon"===t?"FIREPOWER":t,Sub:t,totalRequired:0,totalActual:0,percent:0,title:"MOBILITY"==t||"FIREPOWER"==t?1:0,info:"Ground"===t||"Sea"===t||"Air"===t||"Individual"===t||"Crew Served Weapon"===t||"COMMUNICATIONS"==t?"primary":"secondary",break:"COMMUNICATIONS"==t||"QUARTERMASTER"==t?1:0}}))},totalPrimaryRequiredM(){return this.maintenanceTable.reduce(((t,e)=>t+("primary"===e.Info?Number(e.Actual):0)),0)},totalSecondaryRequiredM(){return this.maintenanceTable.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.Actual):0)),0)},totalPrimaryActualM(){return this.maintenanceTable.reduce(((t,e)=>t+("primary"===e.Info?Number(e.ActualM):0)),0)},totalSecondaryActualM(){return this.maintenanceTable.reduce(((t,e)=>t+("secondary"===e.Info?Number(e.ActualM):0)),0)},averagePrimaryM(){let t=0,e=0;for(const a of this.totalTableM)if(a.percent&&"primary"==a.info&&"MOBILITY"!=a.Sub&&"FIREPOWER"!=a.Sub){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},averageSecondaryM(){let t=0,e=0;for(const a of this.totalTableM)if(a.percent&&"secondary"==a.info){let i=a.percent;i&&(t+=i,e++)}return 0===e?0:this.roundUpValue(t/e)},meeM(){return.8*this.averagePrimaryM},seeM(){return.2*this.averageSecondaryM},readinessRatingM(){return this.meeM+this.seeM},facilityOverlall(){let t={count:0,totalReadiness:0,all:0};for(const e of this.facilityTable)e.Readiness&&(t.count++,t.totalReadiness+=e.Readiness);return t.count>0&&(t.all=t.totalReadiness/t.count),t},facilityData(){return this.facilityTable.reduce(((t,e)=>{let a=t.findIndex((t=>t.Info==e.Info));if(-1==a){let a={...e};a.count=1,a.countQuanRating=0,a.countQualRating=0,a.quanRating=e.Rating,a.qualRating=e.overall,a.quanPercent=0,a.qualPercent=0,a.facilityRating=0,t.push(a)}else t[a].count+=1,t[a].quanRating+=e.Rating,t[a].qualRating+=e.overall,e.Rating&&(t[a].countQuanRating+=1),e.overall&&(t[a].countQualRating+=1),t[a].quanPercent=t[a].quanRating/t[a].countQuanRating*.5,t[a].qualPercent=t[a].qualRating/t[a].countQuanRating*.5,e.ratingQuanPercent=t[a].quanRating/t[a].countQuanRating*.5,e.ratingQualPercent=t[a].qualRating/t[a].countQualRating*.5,t[a].facilityRating=e.ratingQuanPercent+e.ratingQualPercent,t.push(e);return t}),[])},facilityReport(){return this.facilityData.reduce(((t,e)=>{let a=t.findIndex((t=>t.Info==e.Info));if(-1==a){let a={...e};a.Required=e.Required,a.Actual=e.Actual,a.Quantitative=0,a.Qualitative=0,a.total=0,a.weight=0,t.push(a)}else t[a].Required+=e.Required,t[a].Actual+=e.Actual,t[a].Quantitative=2*e.ratingQuanPercent,t[a].Qualitative=2*e.ratingQualPercent,t[a].total=(t[a].Quantitative+t[a].Qualitative)/2,t[a].weight=t[a].total?t[a].total/2:0;return t}),[])},readinessFacility(){let t=0;for(const e of this.facilityReport)e.weight&&(t+=e.weight);return t},overAll(){let t={personnel:this.personnelOverall.all?this.personnelOverall.all:0,training:this.trainingOverall.all?this.trainingOverall.all:0,equipment:this.equipmentOverall.all?this.equipmentOverall.all:0,maintenance:this.maintenanceOverall.all?this.maintenanceOverall.all:0,facility:this.facilityOverlall.all?this.facilityOverlall.all:0,all:0};return t.all=(t.personnel+t.training+t.equipment+t.maintenance+t.facility)/5,t},TotalReadiness(){let t=[];t.push(this.totalRating,this.trRating,this.readinessRating,this.readinessRatingM,this.readinessFacility);let e=t.reduce(((t,e)=>t+e),0),a=e/t.length;return"Infinity"!=a?a:0}},watch:{selectedUnit(t){"unit"==t?(this.section=this.$store.state.user.main,this.team=null):"office"==t?(this.section=null,this.team="D01"==this.$store.state.user.main?this.$store.state.user.office:this.$store.state.user.unit):(this.section=null,this.team=null,"T12"==this.user.office?this.all_tab="personnelTab":"T15"==this.user.office?this.all_tab="equipmentTab":"T19"==this.user.office&&(this.all_tab="trainingTab"))},declinedData(t){t&&this.statusn3Logs()}},mounted(){this.selectedUnit="office",this.department=this.$store.state.user.main}},ar=er,ir=(0,Z.Z)(ar,jn,Hn,!1,null,"22730a43",null),nr=ir.exports,rr=function(){var t=this,e=t._self._c;return e(Et.Z,{staticClass:"container",attrs:{fluid:""}},[e("div",{staticClass:"d-none d-md-block d-lg-block d-xl-block"},[e(m.Z,{attrs:{src:t.image[1].val}})],1),e("div",{staticClass:"d-sm-flex d-md-none"},[e(m.Z,{attrs:{src:t.image[5].val}})],1)])},sr=[],lr=a.p+"img/image0.701cd7ab.jpg",or=a(2086),dr=a.p+"img/image2.f0e46214.jpg",cr=a.p+"img/image3.66a67b02.jpg",ur=a.p+"img/image4.7be67ac7.jpg",hr={name:"HomeView",data(){return{image:[{val:lr},{val:or},{val:dr},{val:cr},{val:ur},{val:G}],isAuthenticated:!1,inactivityTimeout:null}},created(){},methods:{login(){this.isAuthenticated=!0,this.startInactivityTimer()},logout(){this.clearInactivityTimeout(),this.isAuthenticated=!1,this.getLogout()},getLogout(){k()({method:"post",url:`${this.$baseUrl}api/logout`,data:{id:this.$store.state.user.id,log:A()().format("YYYY-MM-DD HH:mm:ss")}}).then((t=>{200==t.status&&(this.$store.dispatch("getLogin","logout"),this.$store.state.hideLogin=!1,this.$router.push("/login"))}))},startInactivityTimer(){const t=6e5;this.inactivityTimeout=setTimeout((()=>{this.logout()}),t);const e=()=>{clearTimeout(this.inactivityTimeout),this.inactivityTimeout=setTimeout((()=>{this.logout()}),t)},a=()=>{e(),window.addEventListener("mousemove",e),window.addEventListener("keydown",e)};a(),window.addEventListener("beforeunload",(()=>{window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e)}))},clearInactivityTimeout(){clearTimeout(this.inactivityTimeout),this.inactivityTimeout=null}}},mr=hr,pr=(0,Z.Z)(mr,rr,sr,!1,null,"56409a5e",null),gr=pr.exports;i.ZP.use(q.ZP);const fr=[{path:"/welcome",name:"welcome",component:bt,meta:{hideNavbar:!0}},{path:"/login",name:"login",component:kt,meta:{hideNavbar:!0}},{path:"/home",name:"home",component:gr},{path:"/personnel",name:"personnel",component:Xe},{path:"/training",name:"training",component:va},{path:"/equipment",name:"equipment",component:Ua},{path:"/maintenance",name:"maintenance",component:ti},{path:"/facility",name:"facility",component:vi},{path:"/admin",name:"admin",component:wi},{path:"/ceo",name:"ceo",component:Qn},{path:"/report",name:"report",component:Ki},{path:"/trainingAdmin",name:"trainingAdmin",component:on},{path:"/equipmentAdmin",name:"equipmentAdmin",component:pn},{path:"/facilityAdmin",name:"facilityAdmin",component:Dn},{path:"/addUser",name:"addUser",component:An},{path:"/inventory",name:"inventory",component:Ln},{path:"/unitReport",name:"unitReport",component:nr}],br=new q.ZP({routes:fr});br.beforeEach(((t,e,a)=>{"/login"!==t.path?L.state.user.username?"/home"===t.path||"/personnel"===t.path||"/training"===t.path||"/equipment"===t.path||"/maintenance"===t.path||"/facility"===t.path||"/admin"===t.path||"/ceo"===t.path||"/report"===t.path||"/trainingAdmin"===t.path||"/equipmentAdmin"===t.path||"/facilityAdmin"===t.path||"/addUser"===t.path||"/unitReport"===t.path||"/inventory"===t.path?a():a("/home"):a("/login"):L.state.user.username?a("home"):a()}));var vr=br,yr=a(1705);i.ZP.use(yr.Z);var Dr=new yr.Z({});i.ZP.config.productionTip=!1;const xr="https://afpjrrs.navy.mil.ph/jrrs/";i.ZP.prototype.$baseUrl=xr,new i.ZP({router:vr,store:L,vuetify:Dr,render:t=>t(M)}).$mount("#app")},643:function(t,e,a){"use strict";t.exports=a.p+"img/D00.25e8dccf.png"},6618:function(t,e,a){"use strict";t.exports=a.p+"img/D01.218d3c37.png"},7328:function(t,e,a){"use strict";t.exports=a.p+"img/D02.dcbd2ed7.png"},794:function(t,e,a){"use strict";t.exports=a.p+"img/D03.77292799.png"},4633:function(t,e,a){"use strict";t.exports=a.p+"img/D04.efb44a49.png"},4383:function(t,e,a){"use strict";t.exports=a.p+"img/D05.2a89cfb3.png"},3031:function(t,e,a){"use strict";t.exports=a.p+"img/D06.01799c9b.png"},9353:function(t,e,a){"use strict";t.exports=a.p+"img/D07.1d9929a7.png"},7072:function(t,e,a){"use strict";t.exports=a.p+"img/D08.7762c114.png"},4005:function(t,e,a){"use strict";t.exports=a.p+"img/D09.7d04c09a.png"},6013:function(t,e,a){"use strict";t.exports=a.p+"img/D10.4c46df27.png"},2737:function(t,e,a){"use strict";t.exports=a.p+"img/D11.ac210572.png"},8442:function(t,e,a){"use strict";t.exports=a.p+"img/D12.7ac706ed.png"},3254:function(t,e,a){"use strict";t.exports=a.p+"img/D13 - Copy.aed0dba9.png"},1934:function(t,e,a){"use strict";t.exports=a.p+"img/D13.3f66e537.png"},2846:function(t,e,a){"use strict";t.exports=a.p+"img/D14.dbbb650a.png"},5055:function(t,e,a){"use strict";t.exports=a.p+"img/D15.6623d433.png"},142:function(t,e,a){"use strict";t.exports=a.p+"img/D16.9294795d.png"},2189:function(t,e,a){"use strict";t.exports=a.p+"img/D17.a6336bc6.png"},9597:function(t,e,a){"use strict";t.exports=a.p+"img/D18.1139f794.png"},726:function(t,e,a){"use strict";t.exports=a.p+"img/D19.c5fdb15c.png"},9085:function(t,e,a){"use strict";t.exports=a.p+"img/D20.780e7414.png"},172:function(t,e,a){"use strict";t.exports=a.p+"img/D21.f7d99d02.png"},5817:function(t,e,a){"use strict";t.exports=a.p+"img/D22.7fa2bcc8.png"},2019:function(t,e,a){"use strict";t.exports=a.p+"img/D23.b677bcb8.png"},9432:function(t,e,a){"use strict";t.exports=a.p+"img/D24.53f64895.png"},2086:function(t,e,a){"use strict";t.exports=a.p+"img/home.bf331096.png"},6915:function(t,e,a){"use strict";t.exports=a.p+"img/navyLogo.218d3c37.png"},2916:function(t,e,a){"use strict";t.exports=a.p+"img/person.d9745019.png"}},e={};function a(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}a.m=t,function(){var t=[];a.O=function(e,i,n,r){if(!i){var s=1/0;for(c=0;c<t.length;c++){i=t[c][0],n=t[c][1],r=t[c][2];for(var l=!0,o=0;o<i.length;o++)(!1&r||s>=r)&&Object.keys(a.O).every((function(t){return a.O[t](i[o])}))?i.splice(o--,1):(l=!1,r<s&&(s=r));if(l){t.splice(c--,1);var d=n();void 0!==d&&(e=d)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,n,r]}}(),function(){a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,{a:e}),e}}(),function(){a.d=function(t,e){for(var i in e)a.o(e,i)&&!a.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){a.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){a.p="/jrrs/"}(),function(){var t={143:0};a.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,s=i[0],l=i[1],o=i[2],d=0;if(s.some((function(e){return 0!==t[e]}))){for(n in l)a.o(l,n)&&(a.m[n]=l[n]);if(o)var c=o(a)}for(e&&e(i);d<s.length;d++)r=s[d],a.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return a.O(c)},i=self["webpackChunkfrontend_app"]=self["webpackChunkfrontend_app"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=a.O(void 0,[998],(function(){return a(9579)}));i=a.O(i)})();
//# sourceMappingURL=app.d439b211.js.map